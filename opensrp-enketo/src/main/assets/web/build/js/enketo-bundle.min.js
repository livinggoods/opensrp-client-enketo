!function r(s,a,l){function h(e,t){if(!a[e]){if(!s[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(u)return u(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=a[e]={exports:{}};s[e][0].call(o.exports,function(t){return h(s[e][1][t]||t)},o,o.exports,r,s,a,l)}return a[e].exports}for(var u="function"==typeof require&&require,t=0;t<l.length;t++)h(l[t]);return h}({1:[function(t,e,i){"use strict";t("./src/js/workarounds-ie11");var n,o,r,s,a=t("jquery"),l=t("./src/js/support"),h=t("./src/js/Form"),u=t("./src/js/file-manager"),c=f("xform");if("true"===f("touch")&&(l.touch=!0,a("html").addClass("touch")),c&&"null"!==c){a(".guidance").remove(),c=/^https?:\/\//.test(c)?c:location.origin+"/"+c;var d="http://"+location.hostname+":8085/transform?xform="+c;a.getJSON(d).done(function(t){r=t.form,s=t.model,a(".form-header").after(r),p()}).fail(function(){window.alert("Error fetching form from enketo-transformer at:\n\n"+d+".\n\nPlease check that enketo-transformer has been started.")})}else 0<a("form.or").length&&(a(".guidance").remove(),s=window.globalModelStr,p());function p(){o=new h("form.or:eq(0)",{modelStr:s},{arcGis:{basemaps:["streets","topo","satellite","osm"],webMapId:"f2e9b762544945f390ca4ac3671cfa72",hasZ:!0},clearIrrelevantImmediately:!0}),window.form=o,0<(n=o.init()).length&&window.alert("loadErrors: "+n.join(", "))}function f(t){return decodeURI((new RegExp(t+"=(.+?)(&|$)").exec(location.search)||[null,null])[1])}a("#validate-form").on("click",function(){o.validate().then(function(t){t?(window.alert("Form is valid! (see XML record and media files in the console)"),a("form.or").trigger("beforesave"),console.log("record:",o.getDataStr()),console.log("media files:",u.getCurrentFiles())):window.alert("Form contains errors. Please see fields marked in red.")})})},{"./src/js/Form":20,"./src/js/file-manager":29,"./src/js/support":45,"./src/js/workarounds-ie11":51,jquery:12}],2:[function(t,e,i){e.exports={maps:[{tiles:["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"],name:"streets",attribution:'Â© <a href="http://openstreetmap.org">OpenStreetMap</a> | <a href="www.openstreetmap.org/copyright">Terms</a>'},{tiles:"GOOGLE_SATELLITE",name:"satellite"}],googleApiKey:"",repeatOrdinals:!1,validateContinuously:!1,validatePage:!0,swipePage:!0,arcGis:{jsUrl:"",cssUrl:"",webMapId:"",hasZ:!0,basemaps:["streets"]}}},{}],3:[function(t,e,i){var n;n=function(E,C){function D(){return new Date(Date.UTC.apply(Date,arguments))}function b(){var t=new Date;return D(t.getFullYear(),t.getMonth(),t.getDate())}function r(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function t(t,e){return function(){return e!==C&&E.fn.datepicker.deprecated(e),this[t].apply(this,arguments)}}var e,i=(e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),i=0,n=this.length;i<n;i++)if(0<=this[i].valueOf()-e&&this[i].valueOf()-e<864e5)return i;return-1},remove:function(t){this.splice(t,1)},replace:function(t){t&&(E.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var t=new i;return t.replace(this),t}},function(){var t=[];return t.push.apply(t,arguments),E.extend(t,e),t}),x=function(t,e){E.data(t,"datepicker",this),this._process_options(e),this.dates=new i,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=E(t),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=E(S.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(t,e){return Number(e)+1}),this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled}),this._allow_update=!1,this.setViewMode(this.o.startView),this._allow_update=!0,this.fillDow(),this.fillMonths(),this.update(),this.isInline&&this.show()};x.prototype={constructor:x,_resolveViewName:function(i){return E.each(S.viewModes,function(t,e){if(i===t||-1!==E.inArray(i,e.names))return i=t,!1}),i},_resolveDaysOfWeek:function(t){return E.isArray(t)||(t=t.split(/[,\s]*/)),E.map(t,Number)},_check_template:function(t){try{return t!==C&&""!==t&&((t.match(/[<>]/g)||[]).length<=0||0<E(t).length)}catch(t){return!1}},_process_options:function(t){this._o=E.extend({},this._o,t);var e=this.o=E.extend({},this._o),i=e.language;M[i]||(i=i.split("-")[0],M[i]||(i=u.language)),e.language=i,e.startView=this._resolveViewName(e.startView),e.minViewMode=this._resolveViewName(e.minViewMode),e.maxViewMode=this._resolveViewName(e.maxViewMode),e.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,e.startView)),!0!==e.multidate&&(e.multidate=Number(e.multidate)||!1,!1!==e.multidate&&(e.multidate=Math.max(0,e.multidate))),e.multidateSeparator=String(e.multidateSeparator),e.weekStart%=7,e.weekEnd=(e.weekStart+6)%7;var n=S.parseFormat(e.format);e.startDate!==-1/0&&(e.startDate?e.startDate instanceof Date?e.startDate=this._local_to_utc(this._zero_time(e.startDate)):e.startDate=S.parseDate(e.startDate,n,e.language,e.assumeNearbyYear):e.startDate=-1/0),e.endDate!==1/0&&(e.endDate?e.endDate instanceof Date?e.endDate=this._local_to_utc(this._zero_time(e.endDate)):e.endDate=S.parseDate(e.endDate,n,e.language,e.assumeNearbyYear):e.endDate=1/0),e.daysOfWeekDisabled=this._resolveDaysOfWeek(e.daysOfWeekDisabled||[]),e.daysOfWeekHighlighted=this._resolveDaysOfWeek(e.daysOfWeekHighlighted||[]),e.datesDisabled=e.datesDisabled||[],E.isArray(e.datesDisabled)||(e.datesDisabled=e.datesDisabled.split(",")),e.datesDisabled=E.map(e.datesDisabled,function(t){return S.parseDate(t,n,e.language,e.assumeNearbyYear)});var o=String(e.orientation).toLowerCase().split(/\s+/g),r=e.orientation.toLowerCase();if(o=E.grep(o,function(t){return/^auto|left|right|top|bottom$/.test(t)}),e.orientation={x:"auto",y:"auto"},r&&"auto"!==r)if(1===o.length)switch(o[0]){case"top":case"bottom":e.orientation.y=o[0];break;case"left":case"right":e.orientation.x=o[0]}else r=E.grep(o,function(t){return/^left|right$/.test(t)}),e.orientation.x=r[0]||"auto",r=E.grep(o,function(t){return/^top|bottom$/.test(t)}),e.orientation.y=r[0]||"auto";else;if(e.defaultViewDate instanceof Date||"string"==typeof e.defaultViewDate)e.defaultViewDate=S.parseDate(e.defaultViewDate,n,e.language,e.assumeNearbyYear);else if(e.defaultViewDate){var s=e.defaultViewDate.year||(new Date).getFullYear(),a=e.defaultViewDate.month||0,l=e.defaultViewDate.day||1;e.defaultViewDate=D(s,a,l)}else e.defaultViewDate=b()},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var e,i,n,o=0;o<t.length;o++)e=t[o][0],2===t[o].length?(i=C,n=t[o][1]):3===t[o].length&&(i=t[o][1],n=t[o][2]),e.on(n,i)},_unapplyEvents:function(t){for(var e,i,n,o=0;o<t.length;o++)e=t[o][0],2===t[o].length?(n=C,i=t[o][1]):3===t[o].length&&(n=t[o][1],i=t[o][2]),e.off(i,n)},_buildEvents:function(){var t={keyup:E.proxy(function(t){-1===E.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:E.proxy(this.keydown,this),paste:E.proxy(this.paste,this)};!0===this.o.showOnFocus&&(t.focus=E.proxy(this.show,this)),this.isInput?this._events=[[this.element,t]]:this.component&&this.inputField.length?this._events=[[this.inputField,t],[this.component,{click:E.proxy(this.show,this)}]]:this._events=[[this.element,{click:E.proxy(this.show,this),keydown:E.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:E.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:E.proxy(function(t){this._focused_from=t.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":E.proxy(function(t){this.update(t.date)},this)}]),this._secondaryEvents=[[this.picker,{click:E.proxy(this.click,this)}],[this.picker,".prev, .next",{click:E.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:E.proxy(this.dayCellClick,this)}],[E(window),{resize:E.proxy(this.place,this)}],[E(document),{"mousedown touchstart":E.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,e){var i=e||this.dates.get(-1),n=this._utc_to_local(i);this.element.trigger({type:t,date:n,viewMode:this.viewMode,dates:E.map(this.dates,this._utc_to_local),format:E.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var i=this.dates.get(t);return S.formatDate(i,e,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&E(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")||(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide")),this},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(t){var e;if(t.originalEvent.clipboardData&&t.originalEvent.clipboardData.types&&-1!==E.inArray("text/plain",t.originalEvent.clipboardData.types))e=t.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;e=window.clipboardData.getData("Text")}this.setDate(e),this.update(),t.preventDefault()},_utc_to_local:function(t){if(!t)return t;var e=new Date(t.getTime()+6e4*t.getTimezoneOffset());return e.getTimezoneOffset()!==t.getTimezoneOffset()&&(e=new Date(t.getTime()+6e4*e.getTimezoneOffset())),e},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&D(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())},getDates:function(){return E.map(this.dates,this._utc_to_local)},getUTCDates:function(){return E.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);return t!==C?new Date(t):null},clearDates:function(){this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var t=E.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=E.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,E.map(t,this._utc_to_local)),this},setDate:t("setDates"),setUTCDate:t("setUTCDates"),remove:t("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var t=this.getFormattedDate();return this.inputField.val(t),this},getFormattedDate:function(e){e===C&&(e=this.o.format);var i=this.o.language;return E.map(this.dates,function(t){return S.formatDate(t,e,i)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(t){return this._process_options({startDate:t}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(t){return this._process_options({endDate:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(t){return this._process_options({daysOfWeekDisabled:t}),this.update(),this},setDaysOfWeekHighlighted:function(t){return this._process_options({daysOfWeekHighlighted:t}),this.update(),this},setDatesDisabled:function(t){return this._process_options({datesDisabled:t}),this.update(),this},place:function(){if(this.isInline)return this;var t=this.picker.outerWidth(),e=this.picker.outerHeight(),i=E(this.o.container),n=i.width(),o="body"===this.o.container?E(document).scrollTop():i.scrollTop(),r=i.offset(),s=[0];this.element.parents().each(function(){var t=E(this).css("z-index");"auto"!==t&&0!==Number(t)&&s.push(Number(t))});var a=Math.max.apply(Math,s)+this.o.zIndexOffset,l=this.component?this.component.parent().offset():this.element.offset(),h=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),u=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),c=l.left-r.left,d=l.top-r.top;"body"!==this.o.container&&(d+=o),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(c-=t-u)):l.left<0?(this.picker.addClass("datepicker-orient-left"),c-=l.left-10):n<c+t?(this.picker.addClass("datepicker-orient-right"),c+=u-t):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");var p=this.o.orientation.y;if("auto"===p&&(p=-o+d-e<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+p),"top"===p?d-=e+parseInt(this.picker.css("padding-top")):d+=h,this.o.rtl){var f=n-(c+u);this.picker.css({top:d,right:f,zIndex:a})}else this.picker.css({top:d,left:c,zIndex:a});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var t=this.dates.copy(),i=[],e=!1;return arguments.length?(E.each(arguments,E.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),i.push(e)},this)),e=!0):(i=(i=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=E.map(i,E.proxy(function(t){return S.parseDate(t,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),i=E.grep(i,E.proxy(function(t){return!this.dateWithinRange(t)||!t},this),!0),this.dates.replace(i),this.o.updateViewDate&&(this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate),e?(this.setValue(),this.element.change()):this.dates.length&&String(t)!==String(this.dates)&&e&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&t.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var t=this.o.weekStart,e="<tr>";for(this.o.calendarWeeks&&(e+='<th class="cw">&#160;</th>');t<this.o.weekStart+7;)e+='<th class="dow',-1!==E.inArray(t,this.o.daysOfWeekDisabled)&&(e+=" disabled"),e+='">'+M[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)}},fillMonths:function(){for(var t=this._utc_to_local(this.viewDate),e="",i=0;i<12;i++)e+='<span class="month'+(t&&t.getMonth()===i?" focused":"")+'">'+M[this.o.language].monthsShort[i]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){t&&t.length?this.range=E.map(t,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var e=[],i=this.viewDate.getUTCFullYear(),n=this.viewDate.getUTCMonth(),o=b();return t.getUTCFullYear()<i||t.getUTCFullYear()===i&&t.getUTCMonth()<n?e.push("old"):(t.getUTCFullYear()>i||t.getUTCFullYear()===i&&t.getUTCMonth()>n)&&e.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&e.push("focused"),this.o.todayHighlight&&r(t,o)&&e.push("today"),-1!==this.dates.contains(t)&&e.push("active"),this.dateWithinRange(t)||e.push("disabled"),this.dateIsDisabled(t)&&e.push("disabled","disabled-date"),-1!==E.inArray(t.getUTCDay(),this.o.daysOfWeekHighlighted)&&e.push("highlighted"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&e.push("range"),-1!==E.inArray(t.valueOf(),this.range)&&e.push("selected"),t.valueOf()===this.range[0]&&e.push("range-start"),t.valueOf()===this.range[this.range.length-1]&&e.push("range-end")),e},_fill_yearsView:function(t,e,i,n,o,r,s){for(var a,l,h,u="",c=i/10,d=this.picker.find(t),p=Math.floor(n/i)*i,f=p+9*c,m=Math.floor(this.viewDate.getFullYear()/c)*c,g=E.map(this.dates,function(t){return Math.floor(t.getUTCFullYear()/c)*c}),v=p-c;v<=f+c;v+=c)a=[e],l=null,v===p-c?a.push("old"):v===f+c&&a.push("new"),-1!==E.inArray(v,g)&&a.push("active"),(v<o||r<v)&&a.push("disabled"),v===m&&a.push("focused"),s!==E.noop&&((h=s(new Date(v,0,1)))===C?h={}:"boolean"==typeof h?h={enabled:h}:"string"==typeof h&&(h={classes:h}),!1===h.enabled&&a.push("disabled"),h.classes&&(a=a.concat(h.classes.split(/\s+/))),h.tooltip&&(l=h.tooltip)),u+='<span class="'+a.join(" ")+'"'+(l?' title="'+l+'"':"")+">"+v+"</span>";d.find(".datepicker-switch").text(p+"-"+f),d.find("td").html(u)},fill:function(){var t,e,i=new Date(this.viewDate),o=i.getUTCFullYear(),n=i.getUTCMonth(),r=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,s=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,a=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,h=M[this.o.language].today||M.en.today||"",u=M[this.o.language].clear||M.en.clear||"",c=M[this.o.language].titleFormat||M.en.titleFormat;if(!isNaN(o)&&!isNaN(n)){this.picker.find(".datepicker-days .datepicker-switch").text(S.formatDate(i,c,this.o.language)),this.picker.find("tfoot .today").text(h).css("display",!0===this.o.todayBtn||"linked"===this.o.todayBtn?"table-cell":"none"),this.picker.find("tfoot .clear").text(u).css("display",!0===this.o.clearBtn?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"==typeof this.o.title&&""!==this.o.title?"table-cell":"none"),this.updateNavArrows(),this.fillMonths();var d=D(o,n,0),p=d.getUTCDate();d.setUTCDate(p-(d.getUTCDay()-this.o.weekStart+7)%7);var f=new Date(d);d.getUTCFullYear()<100&&f.setUTCFullYear(d.getUTCFullYear()),f.setUTCDate(f.getUTCDate()+42),f=f.valueOf();for(var m,g,v=[];d.valueOf()<f;){if((m=d.getUTCDay())===this.o.weekStart&&(v.push("<tr>"),this.o.calendarWeeks)){var _=new Date(+d+(this.o.weekStart-m-7)%7*864e5),y=new Date(Number(_)+(11-_.getUTCDay())%7*864e5),w=new Date(Number(w=D(y.getUTCFullYear(),0,1))+(11-w.getUTCDay())%7*864e5),b=(y-w)/864e5/7+1;v.push('<td class="cw">'+b+"</td>")}(g=this.getClassNames(d)).push("day");var x=d.getUTCDate();this.o.beforeShowDay!==E.noop&&((e=this.o.beforeShowDay(this._utc_to_local(d)))===C?e={}:"boolean"==typeof e?e={enabled:e}:"string"==typeof e&&(e={classes:e}),!1===e.enabled&&g.push("disabled"),e.classes&&(g=g.concat(e.classes.split(/\s+/))),e.tooltip&&(t=e.tooltip),e.content&&(x=e.content)),g=E.isFunction(E.uniqueSort)?E.uniqueSort(g):E.unique(g),v.push('<td class="'+g.join(" ")+'"'+(t?' title="'+t+'"':"")+' data-date="'+d.getTime().toString()+'">'+x+"</td>"),t=null,m===this.o.weekEnd&&v.push("</tr>"),d.setUTCDate(d.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(v.join(""));var L=M[this.o.language].monthsTitle||M.en.monthsTitle||"Months",k=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?L:o).end().find("tbody span").removeClass("active");if(E.each(this.dates,function(t,e){e.getUTCFullYear()===o&&k.eq(e.getUTCMonth()).addClass("active")}),(o<r||a<o)&&k.addClass("disabled"),o===r&&k.slice(0,s).addClass("disabled"),o===a&&k.slice(l+1).addClass("disabled"),this.o.beforeShowMonth!==E.noop){var T=this;E.each(k,function(t,e){var i=new Date(o,t,1),n=T.o.beforeShowMonth(i);n===C?n={}:"boolean"==typeof n?n={enabled:n}:"string"==typeof n&&(n={classes:n}),!1!==n.enabled||E(e).hasClass("disabled")||E(e).addClass("disabled"),n.classes&&E(e).addClass(n.classes),n.tooltip&&E(e).prop("title",n.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,o,r,a,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,o,r,a,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,o,r,a,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var t,e,i=new Date(this.viewDate),n=i.getUTCFullYear(),o=i.getUTCMonth(),r=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,s=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,a=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,h=1;switch(this.viewMode){case 4:h*=10;case 3:h*=10;case 2:h*=10;case 1:t=Math.floor(n/h)*h<r,e=Math.floor(n/h)*h+h>a;break;case 0:t=n<=r&&o<s,e=a<=n&&l<o}this.picker.find(".prev").toggleClass("disabled",t),this.picker.find(".next").toggleClass("disabled",e)}},click:function(t){var e,i,n;t.preventDefault(),t.stopPropagation(),(e=E(t.target)).hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1),e.hasClass("today")&&!e.hasClass("day")&&(this.setViewMode(0),this._setDate(b(),"linked"===this.o.todayBtn?null:"view")),e.hasClass("clear")&&this.clearDates(),e.hasClass("disabled")||(e.hasClass("month")||e.hasClass("year")||e.hasClass("decade")||e.hasClass("century"))&&(this.viewDate.setUTCDate(1),1===this.viewMode?(n=e.parent().find("span").index(e),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(n)):(n=0,i=Number(e.text()),this.viewDate.setUTCFullYear(i)),this._trigger(S.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(D(i,n,1)):(this.setViewMode(this.viewMode-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus(),delete this._focused_from},dayCellClick:function(t){var e=E(t.currentTarget).data("date"),i=new Date(e);this.o.updateViewDate&&(i.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),i.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate)),this._setDate(i)},navArrowsClick:function(t){var e=E(t.currentTarget).hasClass("prev")?-1:1;0!==this.viewMode&&(e*=12*S.viewModes[this.viewMode].navStep),this.viewDate=this.moveMonth(this.viewDate,e),this._trigger(S.viewModes[this.viewMode].e,this.viewDate),this.fill()},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t||this.dates.clear(),-1!==e?(!0===this.o.multidate||1<this.o.multidate||this.o.toggleActive)&&this.dates.remove(e):(!1===this.o.multidate&&this.dates.clear(),this.dates.push(t)),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),(!e&&this.o.updateViewDate||"view"===e)&&(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),e&&"view"===e||this._trigger("changeDate"),this.inputField.trigger("change"),!this.o.autoclose||e&&"date"!==e||this.hide()},moveDay:function(t,e){var i=new Date(t);return i.setUTCDate(t.getUTCDate()+e),i},moveWeek:function(t,e){return this.moveDay(t,7*e)},moveMonth:function(t,e){if(!(i=t)||isNaN(i.getTime()))return this.o.defaultViewDate;var i;if(!e)return t;var n,o,r=new Date(t.valueOf()),s=r.getUTCDate(),a=r.getUTCMonth(),l=Math.abs(e);if(e=0<e?1:-1,1===l)o=-1===e?function(){return r.getUTCMonth()===a}:function(){return r.getUTCMonth()!==n},n=a+e,r.setUTCMonth(n),n=(n+12)%12;else{for(var h=0;h<l;h++)r=this.moveMonth(r,e);n=r.getUTCMonth(),r.setUTCDate(s),o=function(){return n!==r.getUTCMonth()}}for(;o();)r.setUTCDate(--s),r.setUTCMonth(n);return r},moveYear:function(t,e){return this.moveMonth(t,12*e)},moveAvailableDate:function(t,e,i){do{if(t=this[i](t,e),!this.dateWithinRange(t))return!1;i="moveDay"}while(this.dateIsDisabled(t));return t},weekOfDateIsDisabled:function(t){return-1!==E.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(e){return this.weekOfDateIsDisabled(e)||0<E.grep(this.o.datesDisabled,function(t){return r(e,t)}).length},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":visible")){var e,i,n=!1,o=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault(),t.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;e=37===t.keyCode||38===t.keyCode?-1:1,0===this.viewMode?t.ctrlKey?(i=this.moveAvailableDate(o,e,"moveYear"))&&this._trigger("changeYear",this.viewDate):t.shiftKey?(i=this.moveAvailableDate(o,e,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===t.keyCode||39===t.keyCode?i=this.moveAvailableDate(o,e,"moveDay"):this.weekOfDateIsDisabled(o)||(i=this.moveAvailableDate(o,e,"moveWeek")):1===this.viewMode?(38!==t.keyCode&&40!==t.keyCode||(e*=4),i=this.moveAvailableDate(o,e,"moveMonth")):2===this.viewMode&&(38!==t.keyCode&&40!==t.keyCode||(e*=4),i=this.moveAvailableDate(o,e,"moveYear")),i&&(this.focusDate=this.viewDate=i,this.setValue(),this.fill(),t.preventDefault());break;case 13:if(!this.o.forceParse)break;o=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(o),n=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),t.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}n&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))}else 40!==t.keyCode&&27!==t.keyCode||(this.show(),t.stopPropagation())},setViewMode:function(t){this.viewMode=t,this.picker.children("div").hide().filter(".datepicker-"+S.viewModes[this.viewMode].clsName).show(),this.updateNavArrows(),this._trigger("changeViewMode",new Date(this.viewDate))}};var h=function(t,e){E.data(t,"datepicker",this),this.element=E(t),this.inputs=E.map(e.inputs,function(t){return t.jquery?t[0]:t}),delete e.inputs,this.keepEmptyValues=e.keepEmptyValues,delete e.keepEmptyValues,o.call(E(this.inputs),e).on("changeDate",E.proxy(this.dateUpdated,this)),this.pickers=E.map(this.inputs,function(t){return E.data(t,"datepicker")}),this.updateDates()};h.prototype={updateDates:function(){this.dates=E.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var i=E.map(this.dates,function(t){return t.valueOf()});E.each(this.pickers,function(t,e){e.setRange(i)})},clearDates:function(){E.each(this.pickers,function(t,e){e.clearDates()})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var i=E.data(t.target,"datepicker");if(i!==C){var n=i.getUTCDate(),o=this.keepEmptyValues,e=E.inArray(t.target,this.inputs),r=e-1,s=e+1,a=this.inputs.length;if(-1!==e){if(E.each(this.pickers,function(t,e){e.getUTCDate()||e!==i&&o||e.setUTCDate(n)}),n<this.dates[r])for(;0<=r&&n<this.dates[r];)this.pickers[r--].setUTCDate(n);else if(n>this.dates[s])for(;s<a&&n>this.dates[s];)this.pickers[s++].setUTCDate(n);this.updateDates(),delete this.updating}}}},destroy:function(){E.map(this.pickers,function(t){t.destroy()}),E(this.inputs).off("changeDate",this.dateUpdated),delete this.element.data().datepicker},remove:t("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var n=E.fn.datepicker,o=function(s){var a,l=Array.apply(null,arguments);if(l.shift(),this.each(function(){var t=E(this),e=t.data("datepicker"),i="object"==typeof s&&s;if(!e){var n=function(t,e){var i=E(t).data(),n={},o=new RegExp("^"+e.toLowerCase()+"([A-Z])");function r(t,e){return e.toLowerCase()}for(var s in e=new RegExp("^"+e.toLowerCase()),i)e.test(s)&&(n[s.replace(o,r)]=i[s]);return n}(this,"date"),o=function(t){var i={};if(M[t]||(t=t.split("-")[0],M[t])){var n=M[t];return E.each(c,function(t,e){e in n&&(i[e]=n[e])}),i}}(E.extend({},u,n,i).language),r=E.extend({},u,o,n,i);t.hasClass("input-daterange")||r.inputs?(E.extend(r,{inputs:r.inputs||t.find("input").toArray()}),e=new h(this,r)):e=new x(this,r),t.data("datepicker",e)}"string"==typeof s&&"function"==typeof e[s]&&(a=e[s].apply(e,l))}),a===C||a instanceof x||a instanceof h)return this;if(1<this.length)throw new Error("Using only allowed for the collection of a single element ("+s+" function)");return a};E.fn.datepicker=o;var u=E.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:E.noop,beforeShowMonth:E.noop,beforeShowYear:E.noop,beforeShowDecade:E.noop,beforeShowCentury:E.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},c=E.fn.datepicker.locale_opts=["format","rtl","weekStart"];E.fn.datepicker.Constructor=x;var M=E.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},S={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(t){if("function"==typeof t.toValue&&"function"==typeof t.toDisplay)return t;var e=t.replace(this.validParts,"\0").split("\0"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(t,e,i,o){if(!t)return C;if(t instanceof Date)return t;if("string"==typeof e&&(e=S.parseFormat(e)),e.toValue)return e.toValue(t,e,i);var n,r,s,a,l,h={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},u={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(t in u&&(t=u[t]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(t)){for(n=t.match(/([\-+]\d+)([dmwy])/gi),t=new Date,a=0;a<n.length;a++)r=n[a].match(/([\-+]\d+)([dmwy])/i),s=Number(r[1]),l=h[r[2].toLowerCase()],t=x.prototype[l](t,s);return x.prototype._zero_utc_time(t)}n=t&&t.match(this.nonpunctuation)||[];var c,d,p={},f=["yyyy","yy","M","MM","m","mm","d","dd"],m={yyyy:function(t,e){return t.setUTCFullYear(o?(!0===(n=o)&&(n=10),(i=e)<100&&(i+=2e3)>(new Date).getFullYear()+n&&(i-=100),i):e);var i,n},m:function(t,e){if(isNaN(t))return t;for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};m.yy=m.yyyy,m.M=m.MM=m.mm=m.m,m.dd=m.d,t=b();var g=e.parts.slice();function v(){var t=this.slice(0,n[a].length),e=n[a].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(n.length!==g.length&&(g=E(g).filter(function(t,e){return-1!==E.inArray(e,f)}).toArray()),n.length===g.length){var _,y,w;for(a=0,_=g.length;a<_;a++){if(c=parseInt(n[a],10),r=g[a],isNaN(c))switch(r){case"MM":d=E(M[i].months).filter(v),c=E.inArray(d[0],M[i].months)+1;break;case"M":d=E(M[i].monthsShort).filter(v),c=E.inArray(d[0],M[i].monthsShort)+1}p[r]=c}for(a=0;a<f.length;a++)(w=f[a])in p&&!isNaN(p[w])&&(y=new Date(t),m[w](y,p[w]),isNaN(y)||(t=y))}return t},formatDate:function(t,e,i){if(!t)return"";if("string"==typeof e&&(e=S.parseFormat(e)),e.toDisplay)return e.toDisplay(t,e,i);var n={d:t.getUTCDate(),D:M[i].daysShort[t.getUTCDay()],DD:M[i].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:M[i].monthsShort[t.getUTCMonth()],MM:M[i].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};n.dd=(n.d<10?"0":"")+n.d,n.mm=(n.m<10?"0":"")+n.m,t=[];for(var o=E.extend([],e.separators),r=0,s=e.parts.length;r<=s;r++)o.length&&t.push(o.shift()),t.push(n[e.parts[r]]);return t.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+u.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+u.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};S.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+S.headTemplate+"<tbody></tbody>"+S.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+S.headTemplate+S.contTemplate+S.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+S.headTemplate+S.contTemplate+S.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+S.headTemplate+S.contTemplate+S.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+S.headTemplate+S.contTemplate+S.footTemplate+"</table></div></div>",E.fn.datepicker.DPGlobal=S,E.fn.datepicker.noConflict=function(){return E.fn.datepicker=n,this},E.fn.datepicker.version="1.8.0",E.fn.datepicker.deprecated=function(t){var e=window.console;e&&e.warn&&e.warn("DEPRECATED: "+t)},E(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var e=E(this);e.data("datepicker")||(t.preventDefault(),o.call(e,"show"))}),E(function(){o.call(E('[data-provide="datepicker-inline"]'))})},"function"==typeof define&&define.amd?define(["jquery"],n):n("object"==typeof i?t("jquery"):jQuery)},{jquery:12}],4:[function(t,e,i){var n;n=function(a,l){var o={formatInvalidInputErrorMsg:function(t){return"Invalid input value '"+t+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},r=function(t,i){var n=this.element=a(t).hide(),e=a(t)[0].style.width,o=!1,r=this.element.next(".widget");switch(!0===r.hasClass("slider")?(o=!0,this.widget=r):this.widget=a('<div class="widget"><div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div></div></div>').insertAfter(this.element),this.picker=this.widget.find(".slider"),this.id=this.element.data("slider-id")||i.id,this.id&&(this.widget[0].id=this.id),("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)&&(this.touchCapable=!0),!0===o&&(this.widget.removeClass("slider-horizontal"),this.widget.removeClass("slider-vertical")),this.orientation=this.element.data("slider-orientation")||i.orientation,this.orientation){case"vertical":this.widget.addClass("slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight";break;default:this.widget.addClass("slider-horizontal").css("width",e),this.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"}var s=this;switch(a.each(["min","max","step","precision","value","reversed","handle"],function(t,e){void 0!==n.data("slider-"+e)?s[e]=n.data("slider-"+e):void 0!==i[e]?s[e]=i[e]:void 0!==n.prop(e)?s[e]=n.prop(e):s[e]=0}),this.value instanceof Array?o&&!this.range?this.value=this.value[0]:this.range=!0:this.range&&(this.value=[this.value,this.max]),this.selection=this.element.data("slider-selection")||i.selection,this.selectionEl=this.picker.find(".slider-selection"),"none"===this.selection&&this.selectionEl.addClass("hide"),this.selectionElStyle=this.selectionEl[0].style,this.handle1=this.picker.find(".slider-handle:first"),this.handle1Stype=this.handle1[0].style,this.handle2=this.picker.find(".slider-handle:last"),this.handle2Stype=this.handle2[0].style,!0===o&&(this.handle1.removeClass("round triangle"),this.handle2.removeClass("round triangle hide")),this.handle){case"round":this.handle1.addClass("round"),this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle"),this.handle2.addClass("triangle")}this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos],this.formater=i.formater,this.setValue(this.value),this.handle1.on({keydown:a.proxy(this.keydown,this,0)}),this.handle2.on({keydown:a.proxy(this.keydown,this,1)}),this.touchCapable&&this.picker.on({touchstart:a.proxy(this.mousedown,this)}),this.picker.on({mousedown:a.proxy(this.mousedown,this)}),this.enabled=i.enabled&&(this.element.data("slider-enabled")===l||!0===this.element.data("slider-enabled")),this.enabled?this.enable():this.disable(),this.natural_arrow_keys=this.element.data("slider-natural_arrow_keys")||i.natural_arrow_keys};r.prototype={constructor:r,over:!1,inDrag:!1,layout:function(){var t;t=this.reversed?[100-this.percentage[0],this.percentage[1]]:[this.percentage[0],this.percentage[1]],this.handle1Stype[this.stylePos]=t[0]+"%",this.handle2Stype[this.stylePos]=t[1]+"%","vertical"===this.orientation?(this.selectionElStyle.top=Math.min(t[0],t[1])+"%",this.selectionElStyle.height=Math.abs(t[0]-t[1])+"%"):(this.selectionElStyle.left=Math.min(t[0],t[1])+"%",this.selectionElStyle.width=Math.abs(t[0]-t[1])+"%")},mousedown:function(t){if(!this.isEnabled())return!1;this.touchCapable&&"touchstart"===t.type&&(t=t.originalEvent),this.triggerFocusOnHandle(),this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos];var e=this.getPercentage(t);if(this.range){var i=Math.abs(this.percentage[0]-e),n=Math.abs(this.percentage[1]-e);this.dragged=i<n?0:1}else this.dragged=0;this.percentage[this.dragged]=this.reversed?100-e:e,this.layout(),this.touchCapable&&a(document).on({touchmove:a.proxy(this.mousemove,this),touchend:a.proxy(this.mouseup,this)}),a(document).on({mousemove:a.proxy(this.mousemove,this),mouseup:a.proxy(this.mouseup,this)}),this.inDrag=!0;var o=this.calculateValue();return this.element.trigger({type:"slideStart",value:o}).data("value",o).prop("value",o),this.setValue(o),!0},triggerFocusOnHandle:function(t){0===t&&this.handle1.focus(),1===t&&this.handle2.focus()},keydown:function(t,e){if(!this.isEnabled())return!1;var i;switch(e.which){case 37:case 40:i=-1;break;case 39:case 38:i=1}if(i){this.natural_arrow_keys&&("vertical"===this.orientation&&!this.reversed||"horizontal"===this.orientation&&this.reversed)&&(i*=-1);var n=i*this.percentage[2],o=this.percentage[t]+n;100<o?o=100:o<0&&(o=0),this.dragged=t,this.adjustPercentageForRangeSliders(o),this.percentage[this.dragged]=o,this.layout();var r=this.calculateValue();return this.element.trigger({type:"slideStart",value:r}).data("value",r).prop("value",r),this.setValue(r,!0),this.element.trigger({type:"slideStop",value:r}).data("value",r).prop("value",r),!1}},mousemove:function(t){if(!this.isEnabled())return!1;this.touchCapable&&"touchmove"===t.type&&(t=t.originalEvent);var e=this.getPercentage(t);this.adjustPercentageForRangeSliders(e),this.percentage[this.dragged]=this.reversed?100-e:e,this.layout();var i=this.calculateValue();return this.setValue(i,!0),!1},adjustPercentageForRangeSliders:function(t){this.range&&(0===this.dragged&&this.percentage[1]<t?(this.percentage[0]=this.percentage[1],this.dragged=1):1===this.dragged&&this.percentage[0]>t&&(this.percentage[1]=this.percentage[0],this.dragged=0))},mouseup:function(){if(!this.isEnabled())return!1;this.touchCapable&&a(document).off({touchmove:this.mousemove,touchend:this.mouseup}),a(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),this.inDrag=!1;var t=this.calculateValue();return this.layout(),this.element.data("value",t).prop("value",t).trigger({type:"slideStop",value:t}),!1},calculateValue:function(){var t;return this.range?(t=[this.min,this.max],0!==this.percentage[0]&&(t[0]=Math.max(this.min,this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step),t[0]=this.applyPrecision(t[0])),100!==this.percentage[1]&&(t[1]=Math.min(this.max,this.min+Math.round(this.diff*this.percentage[1]/100/this.step)*this.step),t[1]=this.applyPrecision(t[1])),this.value=t):((t=this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step)<this.min?t=this.min:t>this.max&&(t=this.max),t=parseFloat(t),t=this.applyPrecision(t),this.value=[t,this.value[1]]),t},applyPrecision:function(t){var e=this.precision||this.getNumDigitsAfterDecimalPlace(this.step);return this.applyToFixedAndParseFloat(t,e)},getNumDigitsAfterDecimalPlace:function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},applyToFixedAndParseFloat:function(t,e){var i=t.toFixed(e);return parseFloat(i)},getPercentage:function(t){!this.touchCapable||"touchstart"!==t.type&&"touchmove"!==t.type||(t=t.touches[0]);var e=100*(t[this.mousePos]-this.offset[this.stylePos])/this.size;return e=Math.round(e/this.percentage[2])*this.percentage[2],Math.max(0,Math.min(100,e))},getValue:function(){return this.range?this.value:this.value[0]},setValue:function(t,e){if(t||(t=0),this.value=this.validateInputValue(t),this.range?(this.value[0]=this.applyPrecision(this.value[0]),this.value[1]=this.applyPrecision(this.value[1]),this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=this.applyPrecision(this.value),this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),"after"===this.selection?this.value[1]=this.max:this.value[1]=this.min),this.diff=this.max-this.min,0<this.diff?this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff]:this.percentage=[0,0,100],this.layout(),!0===e){var i=this.range?this.value:this.value[0];this.element.trigger({type:"slide",value:i}).data("value",i).prop("value",i)}},validateInputValue:function(t){if("number"==typeof t)return t;if(t instanceof Array)return a.each(t,function(t,e){if("number"!=typeof e)throw new Error(o.formatInvalidInputErrorMsg(e))}),t;throw new Error(o.formatInvalidInputErrorMsg(t))},destroy:function(){this.handle1.off(),this.handle2.off(),this.element.off().show(),this.picker.off().remove(),a(this.element).removeData("slider")},disable:function(){this.enabled=!1,this.handle1.removeAttr("tabindex"),this.handle2.removeAttr("tabindex"),this.picker.addClass("slider-disabled"),this.element.trigger("slideDisabled")},enable:function(){this.enabled=!0,this.handle1.attr("tabindex",0),this.handle2.attr("tabindex",0),this.picker.removeClass("slider-disabled"),this.element.trigger("slideEnabled")},toggle:function(){this.enabled?this.disable():this.enable()},isEnabled:function(){return this.enabled},setAttribute:function(t,e){this[t]=e},getAttribute:function(t){return this[t]}};var s={getValue:r.prototype.getValue,setValue:r.prototype.setValue,setAttribute:r.prototype.setAttribute,getAttribute:r.prototype.getAttribute,destroy:r.prototype.destroy,disable:r.prototype.disable,enable:r.prototype.enable,toggle:r.prototype.toggle,isEnabled:r.prototype.isEnabled};a.fn.slider=function(t){if("string"==typeof t&&"refresh"!==t){var e=Array.prototype.slice.call(arguments,1);return function(t,e){{if(s[t]){var i=function(t){var e=a(t).data("slider");{if(e&&e instanceof r)return e;throw new Error(o.callingContextNotSliderInstance)}}(this),n=s[t].apply(i,e);return void 0===n?a(this):n}throw new Error("method '"+t+"()' does not exist for slider.")}}.call(this,t,e)}return function(n){var t=a(this);return t.each(function(){var t=a(this),e=t.data("slider"),i="object"==typeof n&&n;e&&!i&&(i={},a.each(a.fn.slider.defaults,function(t){i[t]=e[t]})),t.data("slider",new r(this,a.extend({},a.fn.slider.defaults,i)))}),t}.call(this,t)},a.fn.slider.defaults={min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",natural_arrow_keys:!1,handle:"round",reversed:!1,enabled:!0,formater:function(t){return t}},a.fn.slider.Constructor=r},"function"==typeof define&&define.amd?define(["jquery"],n):n("object"==typeof i?t("jquery"):jQuery)},{jquery:12}],5:[function(t,e,i){e.exports=function(){"use strict";function Qi(t,e,i,n){this.message=t,this.expected=e,this.found=i,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Qi)}return function(t,e){function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i}(Qi,Error),{SyntaxError:Qi,parse:function(L){var t,e=1<arguments.length?arguments[1]:{},k={},i={XPath:Li},n=Li,o=function(t){return{tree:t,nsPrefixes:Gi}},h="/",u={type:"literal",value:"/",description:'"/"'},c=function(t){return{type:"/",args:[null,t?t[1]:null]}},d="//",p={type:"literal",value:"//",description:'"//"'},l=function(t,e){var i;for(i=0;i<e.length;i++)t=Ki(e[i][1],t,e[i][3]);return t},T=function(t,e,i){return Zi({type:"step",args:[t,e]},t,i,1)},E="::",C={type:"literal",value:"::",description:'"::"'},D=function(t){return t},M=function(t){return t.length?t:"child"},S="ancestor-or-self",P={type:"literal",value:"ancestor-or-self",description:'"ancestor-or-self"'},N="ancestor",I={type:"literal",value:"ancestor",description:'"ancestor"'},A="attribute",O={type:"literal",value:"attribute",description:'"attribute"'},R="child",j={type:"literal",value:"child",description:'"child"'},z="descendant-or-self",$={type:"literal",value:"descendant-or-self",description:'"descendant-or-self"'},F="descendant",B={type:"literal",value:"descendant",description:'"descendant"'},q="following-sibling",U={type:"literal",value:"following-sibling",description:'"following-sibling"'},H="following",V={type:"literal",value:"following",description:'"following"'},W="namespace",Z={type:"literal",value:"namespace",description:'"namespace"'},G="parent",Y={type:"literal",value:"parent",description:'"parent"'},X="preceding-sibling",K={type:"literal",value:"preceding-sibling",description:'"preceding-sibling"'},Q="preceding",J={type:"literal",value:"preceding",description:'"preceding"'},tt="self",et={type:"literal",value:"self",description:'"self"'},it="(",nt={type:"literal",value:"(",description:'"("'},ot=")",rt={type:"literal",value:")",description:'")"'},st=function(t){return{type:"nodeType",args:[t,[]]}},at="processing-instruction",lt={type:"literal",value:"processing-instruction",description:'"processing-instruction"'},ht=function(t,e){return{type:"nodeType",args:[t,[e]]}},ut=function(t){return t},r="[",s={type:"literal",value:"[",description:'"["'},a="]",f={type:"literal",value:"]",description:'"]"'},m=function(t){return t},g=function(t){return Ki("//",null,t)},ct="..",dt={type:"literal",value:"..",description:'".."'},pt=".",ft={type:"literal",value:".",description:'"."'},mt=function(t){var e={type:"step",args:["self",{type:"nodeType",args:["node",[]]}]};return".."==t&&(e.args[0]="parent"),e},gt="@",vt={type:"literal",value:"@",description:'"@"'},_t=function(t){return t?"attribute":""},v=function(t){return t},_=function(t){return t},y=function(t){return t},w=",",b={type:"literal",value:",",description:'","'},x=function(t,e){var i,n=[];if(e)for(n.push(e[1]),i=0;i<e[2].length;i++)n.push(e[2][i][3]);return{type:"function",args:[t,n]}},yt="|",wt={type:"literal",value:"|",description:'"|"'},bt=function(t,e){return Wi(t,e,1,3)},xt=function(t,e){return e?Ki(e[1],t,e[3]):t},Lt=function(t){return t},kt=function(t,e){return Zi(t,"child",e,1)},Tt="or",Et={type:"literal",value:"or",description:'"or"'},Ct="and",Dt={type:"literal",value:"and",description:'"and"'},Mt="=",St={type:"literal",value:"=",description:'"="'},Pt="!=",Nt={type:"literal",value:"!=",description:'"!="'},It="<=",At={type:"literal",value:"<=",description:'"<="'},Ot="<",Rt={type:"literal",value:"<",description:'"<"'},jt=">=",zt={type:"literal",value:">=",description:'">="'},$t=">",Ft={type:"literal",value:">",description:'">"'},Bt="+",qt={type:"literal",value:"+",description:'"+"'},Ut="-",Ht={type:"literal",value:"-",description:'"-"'},Vt="div",Wt={type:"literal",value:"div",description:'"div"'},Zt="mod",Gt={type:"literal",value:"mod",description:'"mod"'},Yt=function(t){return{type:"*",args:[{type:"number",args:[-1]},t]}},Xt='"',Kt={type:"literal",value:'"',description:'"\\""'},Qt=/^[^"]/,Jt={type:"class",value:'[^"]',description:'[^"]'},te=function(t){return{type:"string",args:[t.join("")]}},ee="'",ie={type:"literal",value:"'",description:'"\'"'},ne=/^[^']/,oe={type:"class",value:"[^']",description:"[^']"},re=function(t,e){return{type:"number",args:[e?parseFloat(t+"."+e[1]):parseInt(t)]}},se=function(t){return{type:"number",args:[parseFloat("."+t)]}},ae=/^[0-9]/,le={type:"class",value:"[0-9]",description:"[0-9]"},he=function(t){return t.join("")},ue="*",ce={type:"literal",value:"*",description:'"*"'},de=function(t){var e;if(null===Vi.args[0])for(e=0;e<Xi.length;e++)if(Vi.args[1]==Xi[e])return!1;return!0},pe=function(t){return""===t.args[0]?t={type:t.type,args:[null,t.args[1]]}:Yi(t.args[0]),t},fe="$",me={type:"literal",value:"$",description:'"$"'},ge=function(t){return Yi(t.args[0]),{type:"$",args:[t]}},ve=function(){return{type:"name",args:[null,null]}},_e=":",ye={type:"literal",value:":",description:'":"'},we=function(t){return Yi(t),{type:"name",args:[t,null]}},be=function(t){return Yi(t.args[0]),t},xe="comment",Le={type:"literal",value:"comment",description:'"comment"'},ke="text",Te={type:"literal",value:"text",description:'"text"'},Ee="node",Ce={type:"literal",value:"node",description:'"node"'},De=/^[ \t\r\n]/,Me={type:"class",value:"[\\u0020\\u0009\\u000D\\u000A]",description:"[\\u0020\\u0009\\u000D\\u000A]"},Se=function(t){return Vi=t},Pe=function(t,e){return{type:"name",args:[t,e]}},Ne=function(t){return{type:"name",args:[null,t]}},Ie=/^[A-Z]/,Ae={type:"class",value:"[A-Z]",description:"[A-Z]"},Oe="_",Re={type:"literal",value:"_",description:'"_"'},je=/^[a-z]/,ze={type:"class",value:"[a-z]",description:"[a-z]"},$e=/^[\xC0-\xD6]/,Fe={type:"class",value:"[\\u00C0-\\u00D6]",description:"[\\u00C0-\\u00D6]"},Be=/^[\xD8-\xF6]/,qe={type:"class",value:"[\\u00D8-\\u00F6]",description:"[\\u00D8-\\u00F6]"},Ue=/^[\xF8-\u02FF]/,He={type:"class",value:"[\\u00F8-\\u02FF]",description:"[\\u00F8-\\u02FF]"},Ve=/^[\u0370-\u037D]/,We={type:"class",value:"[\\u0370-\\u037D]",description:"[\\u0370-\\u037D]"},Ze=/^[\u037F-\u1FFF]/,Ge={type:"class",value:"[\\u037F-\\u1FFF]",description:"[\\u037F-\\u1FFF]"},Ye=/^[\u200C-\u200D]/,Xe={type:"class",value:"[\\u200C-\\u200D]",description:"[\\u200C-\\u200D]"},Ke=/^[\u2070-\u218F]/,Qe={type:"class",value:"[\\u2070-\\u218F]",description:"[\\u2070-\\u218F]"},Je=/^[\u2C00-\u2FEF]/,ti={type:"class",value:"[\\u2C00-\\u2FEF]",description:"[\\u2C00-\\u2FEF]"},ei=/^[\u3001-\uD7FF]/,ii={type:"class",value:"[\\u3001-\\uD7FF]",description:"[\\u3001-\\uD7FF]"},ni=/^[\uF900-\uFDCF]/,oi={type:"class",value:"[\\uF900-\\uFDCF]",description:"[\\uF900-\\uFDCF]"},ri=/^[\uFDF0-\uFFFD]/,si={type:"class",value:"[\\uFDF0-\\uFFFD]",description:"[\\uFDF0-\\uFFFD]"},ai=/^[\xB7]/,li={type:"class",value:"[\\u00B7]",description:"[\\u00B7]"},hi=/^[\u0300-\u036F]/,ui={type:"class",value:"[\\u0300-\\u036F]",description:"[\\u0300-\\u036F]"},ci=/^[\u203F-\u2040]/,di={type:"class",value:"[\\u203F-\\u2040]",description:"[\\u203F-\\u2040]"},pi=function(t,e){return t+e.join("")},fi=0,mi=[{line:1,column:1,seenCR:!1}],gi=0,vi=[],_i=0;if("startRule"in e){if(!(e.startRule in i))throw new Error("Can't start parsing from rule \""+e.startRule+'".');n=i[e.startRule]}function yi(t){var e,i,n=mi[t];if(n)return n;for(e=t-1;!mi[e];)e--;for(n={line:(n=mi[e]).line,column:n.column,seenCR:n.seenCR};e<t;)"\n"===(i=L.charAt(e))?(n.seenCR||n.line++,n.column=1,n.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(n.line++,n.column=1,n.seenCR=!0):(n.column++,n.seenCR=!1),e++;return mi[t]=n}function wi(t,e){var i=yi(t),n=yi(e);return{start:{offset:t,line:i.line,column:i.column},end:{offset:e,line:n.line,column:n.column}}}function bi(t){fi<gi||(gi<fi&&(gi=fi,vi=[]),vi.push(t))}function xi(t,e,i,n){return null!==e&&function(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(e),new Qi(null!==t?t:function(t,e){var i,n=new Array(t.length);for(i=0;i<t.length;i++)n[i]=t[i].description;return"Expected "+(1<t.length?n.slice(0,-1).join(", ")+" or "+n[t.length-1]:n[0])+" but "+(e?'"'+function(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+e(t)})}(e)+'"':"end of input")+" found."}(e,i),e,i,n)}function Li(){var t,e;return t=fi,Fi()!==k&&(e=Di())!==k&&Fi()!==k?t=o(e):(fi=t,t=k),t}function ki(){var t,e,i,n,o,r,s,a,l;return(t=Ti())===k&&(s=fi,L.substr(fi,2)===d?(a=d,fi+=2):(a=k,0===_i&&bi(p)),a!==k&&Fi()!==k&&(l=Ti())!==k?(a=g(l),s=a):(fi=s,s=k),(e=s)===k&&(e=fi,47===L.charCodeAt(fi)?(i=h,fi++):(i=k,0===_i&&bi(u)),i!==k?(n=fi,(o=Fi())!==k&&(r=Ti())!==k?n=o=[o,r]:(fi=n,n=k),n===k&&(n=null),n!==k?(i=c(n),e=i):(fi=e,e=k)):(fi=e,e=k)),t=e),t}function Ti(){var t,e,i,n,o,r,s,a;if(t=fi,(e=Ei())!==k){for(i=[],n=fi,(o=Fi())!==k?(L.substr(fi,2)===d?(r=d,fi+=2):(r=k,0===_i&&bi(p)),r===k&&(47===L.charCodeAt(fi)?(r=h,fi++):(r=k,0===_i&&bi(u))),r!==k&&(s=Fi())!==k&&(a=Ei())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);n!==k;)i.push(n),n=fi,(o=Fi())!==k?(L.substr(fi,2)===d?(r=d,fi+=2):(r=k,0===_i&&bi(p)),r===k&&(47===L.charCodeAt(fi)?(r=h,fi++):(r=k,0===_i&&bi(u))),r!==k&&(s=Fi())!==k&&(a=Ei())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);i!==k?t=e=l(e,i):(fi=t,t=k)}else fi=t,t=k;return t}function Ei(){var t,e,i,n,o,r,s,a,l,h,u,c,d,p,f,m,g,v,_,y,w,b,x;if(v=t=fi,L.substr(fi,16)===S?(w=S,fi+=16):(w=k,0===_i&&bi(P)),w===k&&(L.substr(fi,8)===N?(w=N,fi+=8):(w=k,0===_i&&bi(I)),w===k&&(L.substr(fi,9)===A?(w=A,fi+=9):(w=k,0===_i&&bi(O)),w===k&&(L.substr(fi,5)===R?(w=R,fi+=5):(w=k,0===_i&&bi(j)),w===k&&(L.substr(fi,18)===z?(w=z,fi+=18):(w=k,0===_i&&bi($)),w===k&&(L.substr(fi,10)===F?(w=F,fi+=10):(w=k,0===_i&&bi(B)),w===k&&(L.substr(fi,17)===q?(w=q,fi+=17):(w=k,0===_i&&bi(U)),w===k&&(L.substr(fi,9)===H?(w=H,fi+=9):(w=k,0===_i&&bi(V)),w===k&&(L.substr(fi,9)===W?(w=W,fi+=9):(w=k,0===_i&&bi(Z)),w===k&&(L.substr(fi,6)===G?(w=G,fi+=6):(w=k,0===_i&&bi(Y)),w===k&&(L.substr(fi,17)===X?(w=X,fi+=17):(w=k,0===_i&&bi(K)),w===k&&(L.substr(fi,9)===Q?(w=Q,fi+=9):(w=k,0===_i&&bi(J)),w===k&&(L.substr(fi,4)===tt?(w=tt,fi+=4):(w=k,0===_i&&bi(et)))))))))))))),(_=w)!==k&&Fi()!==k?(L.substr(fi,2)===E?(y=E,fi+=2):(y=k,0===_i&&bi(C)),y!==k?(_=D(_),v=_):(fi=v,v=k)):(fi=v,v=k),v===k&&(v=fi,64===L.charCodeAt(fi)?(b=gt,fi++):(b=k,0===_i&&bi(vt)),b===k&&(b=null),b!==k&&(b=_t(b)),(_=b)!==k&&(_=M(_)),v=_),(e=v)!==k)if(Fi()!==k)if(a=fi,L.substr(fi,7)===xe?(d=xe,fi+=7):(d=k,0===_i&&bi(Le)),d===k&&(L.substr(fi,4)===ke?(d=ke,fi+=4):(d=k,0===_i&&bi(Te)),d===k&&(L.substr(fi,22)===at?(d=at,fi+=22):(d=k,0===_i&&bi(lt)),d===k&&(L.substr(fi,4)===Ee?(d=Ee,fi+=4):(d=k,0===_i&&bi(Ce))))),(l=d)!==k&&Fi()!==k?(40===L.charCodeAt(fi)?(h=it,fi++):(h=k,0===_i&&bi(nt)),h!==k&&Fi()!==k?(41===L.charCodeAt(fi)?(u=ot,fi++):(u=k,0===_i&&bi(rt)),u!==k?(l=st(l),a=l):(fi=a,a=k)):(fi=a,a=k)):(fi=a,a=k),a===k&&(a=fi,L.substr(fi,22)===at?(l=at,fi+=22):(l=k,0===_i&&bi(lt)),l!==k&&Fi()!==k?(40===L.charCodeAt(fi)?(h=it,fi++):(h=k,0===_i&&bi(nt)),h!==k&&Fi()!==k&&(u=ji())!==k&&Fi()!==k?(41===L.charCodeAt(fi)?(c=ot,fi++):(c=k,0===_i&&bi(rt)),c!==k?(l=ht(l,u),a=l):(fi=a,a=k)):(fi=a,a=k)):(fi=a,a=k),a===k&&(p=a=fi,42===L.charCodeAt(fi)?(f=ue,fi++):(f=k,0===_i&&bi(ce)),f!==k&&(f=ve()),(p=f)===k&&(p=fi,(f=qi())!==k?(58===L.charCodeAt(fi)?(m=_e,fi++):(m=k,0===_i&&bi(ye)),m!==k?(42===L.charCodeAt(fi)?(g=ue,fi++):(g=k,0===_i&&bi(ce)),g!==k?(f=we(f),p=f):(fi=p,p=k)):(fi=p,p=k)):(fi=p,p=k),p===k&&(p=fi,(f=Bi())!==k&&(f=be(f)),p=f)),(l=p)!==k&&(l=ut(l)),a=l)),(i=a)!==k){for(n=[],o=fi,(r=Fi())!==k&&(s=Ci())!==k?o=r=[r,s]:(fi=o,o=k);o!==k;)n.push(o),o=fi,(r=Fi())!==k&&(s=Ci())!==k?o=r=[r,s]:(fi=o,o=k);n!==k?t=e=T(e,i,n):(fi=t,t=k)}else fi=t,t=k;else fi=t,t=k;else fi=t,t=k;return t===k&&(L.substr(fi,2)===ct?(x=ct,fi+=2):(x=k,0===_i&&bi(dt)),x===k&&(46===L.charCodeAt(fi)?(x=pt,fi++):(x=k,0===_i&&bi(ft))),x!==k&&(x=mt(x)),t=x),t}function Ci(){var t,e,i,n;return t=fi,91===L.charCodeAt(fi)?(e=r,fi++):(e=k,0===_i&&bi(s)),e!==k&&Fi()!==k&&(i=Di())!==k&&Fi()!==k?(93===L.charCodeAt(fi)?(n=a,fi++):(n=k,0===_i&&bi(f)),n!==k?t=e=m(i):(fi=t,t=k)):(fi=t,t=k),t}function Di(){var t;return fi,(t=function(){var t,e,i,n,o,r,s,a;if(t=fi,(e=Pi())!==k){for(i=[],n=fi,(o=Fi())!==k?(L.substr(fi,2)===Tt?(r=Tt,fi+=2):(r=k,0===_i&&bi(Et)),r!==k&&(s=Fi())!==k&&(a=Pi())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);n!==k;)i.push(n),n=fi,(o=Fi())!==k?(L.substr(fi,2)===Tt?(r=Tt,fi+=2):(r=k,0===_i&&bi(Et)),r!==k&&(s=Fi())!==k&&(a=Pi())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);i!==k?(e=bt(e,i),t=e):(fi=t,t=k)}else fi=t,t=k;return t}())!==k&&(t=m(t)),t}function Mi(){var t,e,i,n,o,r,s,a,l,h,u,c;return h=t=fi,36===L.charCodeAt(fi)?(u=fe,fi++):(u=k,0===_i&&bi(me)),u!==k&&(c=Bi())!==k?(u=ge(c),h=u):(fi=h,h=k),(e=h)!==k&&(e=v(e)),(t=e)===k&&(t=fi,40===L.charCodeAt(fi)?(e=it,fi++):(e=k,0===_i&&bi(nt)),e!==k&&Fi()!==k&&(i=Di())!==k&&Fi()!==k?(41===L.charCodeAt(fi)?(n=ot,fi++):(n=k,0===_i&&bi(rt)),n!==k?t=e=m(i):(fi=t,t=k)):(fi=t,t=k),t===k&&(t=fi,(e=ji())!==k&&(e=_(e)),(t=e)===k&&(o=t=fi,(r=zi())!==k?(s=fi,46===L.charCodeAt(fi)?(a=pt,fi++):(a=k,0===_i&&bi(ft)),a!==k?((l=zi())===k&&(l=null),l!==k?s=a=[a,l]:(fi=s,s=k)):(fi=s,s=k),s===k&&(s=null),s!==k?(r=re(r,s),o=r):(fi=o,o=k)):(fi=o,o=k),o===k&&(o=fi,46===L.charCodeAt(fi)?(r=pt,fi++):(r=k,0===_i&&bi(ft)),r!==k&&(s=zi())!==k?(r=se(s),o=r):(fi=o,o=k)),(e=o)!==k&&(e=y(e)),(t=e)===k&&(t=function(){var t,e,i,n,o,r,s,a,l,h,u,c,d,p;if(d=t=fi,(p=Bi())!==k&&(de(p)?void 0:k)!==k?(p=pe(p),d=p):(fi=d,d=k),(e=d)!==k)if(Fi()!==k)if(40===L.charCodeAt(fi)?(i=it,fi++):(i=k,0===_i&&bi(nt)),i!==k){if(n=fi,(o=Fi())!==k)if((r=Di())!==k){for(s=[],a=fi,(l=Fi())!==k?(44===L.charCodeAt(fi)?(h=w,fi++):(h=k,0===_i&&bi(b)),h!==k&&(u=Fi())!==k&&(c=Di())!==k?a=l=[l,h,u,c]:(fi=a,a=k)):(fi=a,a=k);a!==k;)s.push(a),a=fi,(l=Fi())!==k?(44===L.charCodeAt(fi)?(h=w,fi++):(h=k,0===_i&&bi(b)),h!==k&&(u=Fi())!==k&&(c=Di())!==k?a=l=[l,h,u,c]:(fi=a,a=k)):(fi=a,a=k);s!==k?n=o=[o,r,s]:(fi=n,n=k)}else fi=n,n=k;else fi=n,n=k;n===k&&(n=null),n!==k&&(o=Fi())!==k?(41===L.charCodeAt(fi)?(r=ot,fi++):(r=k,0===_i&&bi(rt)),r!==k?(e=x(e,n),t=e):(fi=t,t=k)):(fi=t,t=k)}else fi=t,t=k;else fi=t,t=k;else fi=t,t=k;return t}())))),t}function Si(){var t,e,i,n,o,r,s;return t=fi,(e=function(){var t,e,i,n,o,r;if(t=fi,(e=Mi())!==k){for(i=[],n=fi,(o=Fi())!==k&&(r=Ci())!==k?n=o=[o,r]:(fi=n,n=k);n!==k;)i.push(n),n=fi,(o=Fi())!==k&&(r=Ci())!==k?n=o=[o,r]:(fi=n,n=k);i!==k?(e=kt(e,i),t=e):(fi=t,t=k)}else fi=t,t=k;return t}())!==k?(i=fi,(n=Fi())!==k?(L.substr(fi,2)===d?(o=d,fi+=2):(o=k,0===_i&&bi(p)),o===k&&(47===L.charCodeAt(fi)?(o=h,fi++):(o=k,0===_i&&bi(u))),o!==k&&(r=Fi())!==k&&(s=Ti())!==k?i=n=[n,o,r,s]:(fi=i,i=k)):(fi=i,i=k),i===k&&(i=null),i!==k?t=e=xt(e,i):(fi=t,t=k)):(fi=t,t=k),t===k&&(t=fi,(e=ki())!==k&&(e=Lt(e)),t=e),t}function Pi(){var t,e,i,n,o,r,s,a;if(t=fi,(e=Ni())!==k){for(i=[],n=fi,(o=Fi())!==k?(L.substr(fi,3)===Ct?(r=Ct,fi+=3):(r=k,0===_i&&bi(Dt)),r!==k&&(s=Fi())!==k&&(a=Ni())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);n!==k;)i.push(n),n=fi,(o=Fi())!==k?(L.substr(fi,3)===Ct?(r=Ct,fi+=3):(r=k,0===_i&&bi(Dt)),r!==k&&(s=Fi())!==k&&(a=Ni())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);i!==k?t=e=bt(e,i):(fi=t,t=k)}else fi=t,t=k;return t}function Ni(){var t,e,i,n,o,r,s,a;if(t=fi,(e=Ii())!==k){for(i=[],n=fi,(o=Fi())!==k?(61===L.charCodeAt(fi)?(r=Mt,fi++):(r=k,0===_i&&bi(St)),r===k&&(L.substr(fi,2)===Pt?(r=Pt,fi+=2):(r=k,0===_i&&bi(Nt))),r!==k&&(s=Fi())!==k&&(a=Ii())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);n!==k;)i.push(n),n=fi,(o=Fi())!==k?(61===L.charCodeAt(fi)?(r=Mt,fi++):(r=k,0===_i&&bi(St)),r===k&&(L.substr(fi,2)===Pt?(r=Pt,fi+=2):(r=k,0===_i&&bi(Nt))),r!==k&&(s=Fi())!==k&&(a=Ii())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);i!==k?t=e=bt(e,i):(fi=t,t=k)}else fi=t,t=k;return t}function Ii(){var t,e,i,n,o,r,s,a;if(t=fi,(e=Ai())!==k){for(i=[],n=fi,(o=Fi())!==k?(L.substr(fi,2)===It?(r=It,fi+=2):(r=k,0===_i&&bi(At)),r===k&&(60===L.charCodeAt(fi)?(r=Ot,fi++):(r=k,0===_i&&bi(Rt)),r===k&&(L.substr(fi,2)===jt?(r=jt,fi+=2):(r=k,0===_i&&bi(zt)),r===k&&(62===L.charCodeAt(fi)?(r=$t,fi++):(r=k,0===_i&&bi(Ft))))),r!==k&&(s=Fi())!==k&&(a=Ai())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);n!==k;)i.push(n),n=fi,(o=Fi())!==k?(L.substr(fi,2)===It?(r=It,fi+=2):(r=k,0===_i&&bi(At)),r===k&&(60===L.charCodeAt(fi)?(r=Ot,fi++):(r=k,0===_i&&bi(Rt)),r===k&&(L.substr(fi,2)===jt?(r=jt,fi+=2):(r=k,0===_i&&bi(zt)),r===k&&(62===L.charCodeAt(fi)?(r=$t,fi++):(r=k,0===_i&&bi(Ft))))),r!==k&&(s=Fi())!==k&&(a=Ai())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);i!==k?t=e=bt(e,i):(fi=t,t=k)}else fi=t,t=k;return t}function Ai(){var t,e,i,n,o,r,s,a;if(t=fi,(e=Oi())!==k){for(i=[],n=fi,(o=Fi())!==k?(43===L.charCodeAt(fi)?(r=Bt,fi++):(r=k,0===_i&&bi(qt)),r===k&&(45===L.charCodeAt(fi)?(r=Ut,fi++):(r=k,0===_i&&bi(Ht))),r!==k&&(s=Fi())!==k&&(a=Oi())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);n!==k;)i.push(n),n=fi,(o=Fi())!==k?(43===L.charCodeAt(fi)?(r=Bt,fi++):(r=k,0===_i&&bi(qt)),r===k&&(45===L.charCodeAt(fi)?(r=Ut,fi++):(r=k,0===_i&&bi(Ht))),r!==k&&(s=Fi())!==k&&(a=Oi())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);i!==k?t=e=bt(e,i):(fi=t,t=k)}else fi=t,t=k;return t}function Oi(){var t,e,i,n,o,r,s,a;if(t=fi,(e=Ri())!==k){for(i=[],n=fi,(o=Fi())!==k?((r=$i())===k&&(L.substr(fi,3)===Vt?(r=Vt,fi+=3):(r=k,0===_i&&bi(Wt)),r===k&&(L.substr(fi,3)===Zt?(r=Zt,fi+=3):(r=k,0===_i&&bi(Gt)))),r!==k&&(s=Fi())!==k&&(a=Ri())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);n!==k;)i.push(n),n=fi,(o=Fi())!==k?((r=$i())===k&&(L.substr(fi,3)===Vt?(r=Vt,fi+=3):(r=k,0===_i&&bi(Wt)),r===k&&(L.substr(fi,3)===Zt?(r=Zt,fi+=3):(r=k,0===_i&&bi(Gt)))),r!==k&&(s=Fi())!==k&&(a=Ri())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);i!==k?t=e=bt(e,i):(fi=t,t=k)}else fi=t,t=k;return t}function Ri(){var t,e,i;return t=fi,(e=function(){var t,e,i,n,o,r,s,a;if(t=fi,(e=Si())!==k){for(i=[],n=fi,(o=Fi())!==k?(124===L.charCodeAt(fi)?(r=yt,fi++):(r=k,0===_i&&bi(wt)),r!==k&&(s=Fi())!==k&&(a=Si())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);n!==k;)i.push(n),n=fi,(o=Fi())!==k?(124===L.charCodeAt(fi)?(r=yt,fi++):(r=k,0===_i&&bi(wt)),r!==k&&(s=Fi())!==k&&(a=Si())!==k?n=o=[o,r,s,a]:(fi=n,n=k)):(fi=n,n=k);i!==k?t=e=bt(e,i):(fi=t,t=k)}else fi=t,t=k;return t}())!==k&&(e=m(e)),(t=e)===k&&(t=fi,45===L.charCodeAt(fi)?(e=Ut,fi++):(e=k,0===_i&&bi(Ht)),e!==k&&Fi()!==k&&(i=Ri())!==k?t=e=Yt(i):(fi=t,t=k)),t}function ji(){var t,e,i,n;if(t=fi,34===L.charCodeAt(fi)?(e=Xt,fi++):(e=k,0===_i&&bi(Kt)),e!==k){for(i=[],Qt.test(L.charAt(fi))?(n=L.charAt(fi),fi++):(n=k,0===_i&&bi(Jt));n!==k;)i.push(n),Qt.test(L.charAt(fi))?(n=L.charAt(fi),fi++):(n=k,0===_i&&bi(Jt));i!==k?(34===L.charCodeAt(fi)?(n=Xt,fi++):(n=k,0===_i&&bi(Kt)),n!==k?t=e=te(i):(fi=t,t=k)):(fi=t,t=k)}else fi=t,t=k;if(t===k)if(t=fi,39===L.charCodeAt(fi)?(e=ee,fi++):(e=k,0===_i&&bi(ie)),e!==k){for(i=[],ne.test(L.charAt(fi))?(n=L.charAt(fi),fi++):(n=k,0===_i&&bi(oe));n!==k;)i.push(n),ne.test(L.charAt(fi))?(n=L.charAt(fi),fi++):(n=k,0===_i&&bi(oe));i!==k?(39===L.charCodeAt(fi)?(n=ee,fi++):(n=k,0===_i&&bi(ie)),n!==k?t=e=te(i):(fi=t,t=k)):(fi=t,t=k)}else fi=t,t=k;return t}function zi(){var t,e;if(fi,t=[],ae.test(L.charAt(fi))?(e=L.charAt(fi),fi++):(e=k,0===_i&&bi(le)),e!==k)for(;e!==k;)t.push(e),ae.test(L.charAt(fi))?(e=L.charAt(fi),fi++):(e=k,0===_i&&bi(le));else t=k;return t!==k&&(t=he(t)),t}function $i(){var t;return 42===L.charCodeAt(fi)?(t=ue,fi++):(t=k,0===_i&&bi(ce)),t}function Fi(){var t;return(t=function(){var t,e;if(t=[],De.test(L.charAt(fi))?(e=L.charAt(fi),fi++):(e=k,0===_i&&bi(Me)),e!==k)for(;e!==k;)t.push(e),De.test(L.charAt(fi))?(e=L.charAt(fi),fi++):(e=k,0===_i&&bi(Me));else t=k;return t}())===k&&(t=null),t}function Bi(){var t,e,i,n,o,r;return i=fi,(n=qi())!==k?(58===L.charCodeAt(fi)?(o=_e,fi++):(o=k,0===_i&&bi(ye)),o!==k&&(r=qi())!==k?(n=Pe(n,r),i=n):(fi=i,i=k)):(fi=i,i=k),(t=i)===k&&((e=qi())!==k&&(e=Ne(e)),t=e),t!==k&&(t=Se(t)),t}function qi(){return function(){var t,e,i,n;if(t=fi,(e=Ui())!==k){for(i=[],n=Hi();n!==k;)i.push(n),n=Hi();i!==k?(e=pi(e,i),t=e):(fi=t,t=k)}else fi=t,t=k;return t}()}function Ui(){var t;return Ie.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(Ae)),t===k&&(95===L.charCodeAt(fi)?(t=Oe,fi++):(t=k,0===_i&&bi(Re)),t===k&&(je.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(ze)),t===k&&($e.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(Fe)),t===k&&(Be.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(qe)),t===k&&(Ue.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(He)),t===k&&(Ve.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(We)),t===k&&(Ze.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(Ge)),t===k&&(Ye.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(Xe)),t===k&&(Ke.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(Qe)),t===k&&(Je.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(ti)),t===k&&(ei.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(ii)),t===k&&(ni.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(oi)),t===k&&(ri.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(si))))))))))))))),t}function Hi(){var t;return(t=Ui())===k&&(45===L.charCodeAt(fi)?(t=Ut,fi++):(t=k,0===_i&&bi(Ht)),t===k&&(46===L.charCodeAt(fi)?(t=pt,fi++):(t=k,0===_i&&bi(ft)),t===k&&(ae.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(le)),t===k&&(ai.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(li)),t===k&&(hi.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(ui)),t===k&&(ci.test(L.charAt(fi))?(t=L.charAt(fi),fi++):(t=k,0===_i&&bi(di)))))))),t}var Vi,Wi=function(t,e,i,n){var o,r,s={type:"",args:[]};for(s.args.push(t),o=0;o<e.length;o++){switch(typeof i){case"string":s.type=i;break;case"object":for(s.type=e[o][i[0]],r=1;r<i.length;r++)s.type=s.type[i[r]];break;default:s.type=e[o][i]}s.args.push(void 0===n?e[o]:e[o][n]),s={type:"",args:[s]}}return s.args[0]},Zi=function(t,e,i,n){var o,r=[];if(i.length<1)return t;for(o=0;o<i.length;o++)r.push(i[o][n]);return{type:"predicate",args:[e,t,r]}},Gi=[],Yi=function(t){var e,i=!1;if(null!==t){for(e=0;e<Gi.length;e++)if(Gi[e]===t){i=!0;break}i||Gi.push(t)}},Xi=["comment","text","processing-instruction","node"],Ki=function(t,e,i){return"/"==t?{type:"/",args:[e,i]}:{type:"/",args:[{type:"/",args:[e,{type:"step",args:["descendant-or-self",{type:"nodeType",args:["node",[]]}]}]},i]}};if((t=n())!==k&&fi===L.length)return t;throw t!==k&&fi<L.length&&bi({type:"end",description:"end of input"}),xi(null,vi,gi<L.length?L.charAt(gi):null,gi<L.length?wi(gi,gi+1):wi(gi,gi))}}}()},{}],6:[function(t,e,i){Date.prototype.toISOLocalString=function(){return"Invalid Date"===this.toString()?this.toString():new Date(this.getTime()-60*this.getTimezoneOffset()*1e3).toISOString().replace("Z",this.getTimezoneOffsetAsTime())},Date.prototype.getTimezoneOffsetAsTime=function(){var t,e=function(t){return t<10?"0"+t:t};return"Invalid Date"===this.toString()?this.toString():((t=this.getTimezoneOffset())<0?"+":"-")+e(Math.abs(Math.floor(t/60)))+":"+e(Math.abs(Math.floor(t%60)))}},{}],7:[function(t,e,i){var a,n,l,o,r,s,h,c,u,d,p,f,m,g,_,y,b,x,L,k,T,E,C,D,M,S,P,N,I,A,O,R,j,z,$,F,B,q,U,H,V,W,Z,G,Y=t("../dist/parser"),X=t("./shuffle"),K=t("./geo");t("./date-extensions"),e.exports=(x=[],L="http://www.w3.org/XML/1998/namespace",k=function(t){var e=[],i=function(t,e){var i,n,o=[];for(n=0;n<t.length;n++)i=t.item(n),!1!==q(i.nodeType,e)&&o.push(i);return o};switch(t.nodeType){case 1:e=i(t.childNodes,supportedChildNodeTypes=[1,3,4,7,8]);break;case 9:e=i(t.childNodes,supportedChildNodeTypes=[1,7,8]);break;case 2:case 3:case 4:case 7:case 8:case 13:break;default:throw new Error("Internal Error: nodeChildren - unsupported node type: "+t.nodeType)}return e},T=function(t){var e,i,n=[];for(e=k(t),i=0;i<e.length;i++)n.push(e[i]),n.push.apply(n,T(e[i]));return n},E=function(i){switch(i.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:return i.parentNode;case 2:return i.ownerElement?i.ownerElement:z(i.ownerDocument,!0,function(t,e){if(e===i)return!0});case 13:return i.ownerElement;default:throw new Error("Internal Error: nodeParent - node type not supported: "+i.type)}},C=function(t){for(var e,i=[];e=E(t);)i.push(e),t=e;return i},D=function(t){return S(t,"nextSibling")},M=function(t){return S(t,"previousSibling")},S=function(t,e){for(var i,n=[];i=t[e];){switch(i.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:n.push(i)}t=i}return n},P=function(t){switch(t.nodeType){case 9:return t;default:return t.ownerDocument}},N=function(t){var e,i=[];if(1===t.nodeType)for(e=0;e<t.attributes.length;e++)t.attributes[e].specified&&i.push(t.attributes[e]);return 1<i.length&&i[0].compareDocumentPosition&&i.sort(function(t,e){var i=t.compareDocumentPosition(e);return 2==(2&i)?1:4==(4&i)?-1:0}),i},I=function(t){var e,i=N(t),n=[];for(e=0;e<i.length;e++)!1===R(i[e])&&n.push(i[e]);return n},A=function(t,e){var i,n,o,r,s=e||[];if(1===t.nodeType){if(t.ownerDocument.documentElement===t&&"object"==typeof t.ownerDocument.namespaces)for(n=t.ownerDocument.namespaces.length-1;0<=n;n--)r=t.ownerDocument.namespaces.item(n),O.call(this,s,r.name,r.urn,t);for(n=(i=N(t)).length-1;0<=n;n--)!1!==(o=R(i[n]))&&(1!==o.length?O.call(this,s,o[1],i[n].nodeValue,t):O.call(this,s,"",i[n].nodeValue,t));if(A.call(this,t.parentNode,s),void 0===e&&(O.call(this,s,"xml",L,t),s[0]&&""===s[0].prefix&&""===s[0].namespaceURI&&s.shift()),void 0===e)for(n=0;n<s.length;n++)s[n].ownerElement!==t&&(s[n]=G(s[n].prefix,s[n].nodeValue,t))}return s},O=function(t,e,i,n){var o,r;for(this.opts["case-sensitive"]||(e=e.toLowerCase()),o=0;o<t.length;o++)if(t[o].prefix===e)return!1;return r=G(e,i,n),""===e&&null!==i?t.unshift(r):t.push(r),!0},R=function(t){var e=t.nodeName.split(":");return"xmlns"===e[0]&&e},j=function(t,e){var i,n,o,r,s,a;if(1===t.nodeType)for(o=e?[e]:I(t),r=A.call(this,t),i=0;i<o.length;i++){for(1===(a=o[i].nodeName.split(":")).length&&(a[1]=a[0],a[0]=""),s=null,n=0;n<r.length;n++)if(r[n].prefix===a[0]){s=r[n].namespaceURI;break}if(null===s&&(s=""),this.opts["unique-ids"][s]===a[1])return o[i]}return null},z=function(t,e,i){var n,o,r,s,a=[];for(r=t.getElementsByTagName("*"),n=0;n<r.length;n++)if(1==(s=r.item(n)).nodeType)for(o=0;o<s.attributes.length;o++)if(s.attributes[o].specified&&!0===i(s,s.attributes[o])){if(e)return s;a.push(s);break}return e?null:a},$=function(t){var e,i,n,o;switch(t.nodeType){case 1:for(o=void 0===t.scopeName||document.addEventListener?1==(e=t.nodeName.split(":")).length?{prefix:"",name:e[0]}:{prefix:e[0],name:e[1]}:{prefix:"HTML"==t.scopeName?"":t.scopeName,name:t.nodeName},this.opts["case-sensitive"]||(o.prefix=o.prefix.toLowerCase(),o.name=o.name.toLowerCase()),i=A.call(this,t),n=0;n<i.length;n++)if(i[n].prefix===o.prefix)return o.ns=i[n].namespaceURI,o;if(""===o.prefix)return o.ns=null,o;throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+o.prefix+'" on element: '+t.nodeName);case 2:if(1==(e=t.nodeName.split(":")).length)return{prefix:"",ns:null,name:e[0]};for(o={prefix:e[0],name:e[1]},this.opts["case-sensitive"]||(o.prefix=o.prefix.toLowerCase(),o.name=o.name.toLowerCase()),i=A.call(this,E(t)),n=0;n<i.length;n++)if(i[n].prefix===o.prefix)return o.ns=i[n].namespaceURI,o;throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+o.prefix+'" on attribute: '+t.nodeName);case 13:return{prefix:null,ns:null,name:this.opts["case-sensitive"]?t.prefix.toLowerCase():t.prefix};case 7:return{prefix:null,ns:null,name:this.opts["case-sensitive"]?t.target.toLowerCase():t.target};default:return!1}},F=function(t){var e,i,n="";switch(t.nodeType){case 9:case 1:for((i=c(new p(t,1,1,{},{},{}),{type:"step",args:["descendant",{type:"nodeType",args:["text",[]]}]})).sortDocumentOrder(),e=0;e<i.value.length;e++)n+=i.value[e].data;return n;case 2:return t.nodeValue;case 13:return t.namespaceURI;case 7:case 8:case 3:case 4:return t.data;default:throw new Error("Internal Error: nodeStringValue does not support node type: "+t.nodeType)}},B=function(t,e,i){var n=new Error(i);return n.name=e,n.code=t,n},q=function(t,e){for(var i=e.length;i--;)if(e[i]===t)return i;return!1},U=function(t,e,i,n){var o,r,s,a,l;if(t instanceof y)if(e instanceof y){for(a=e.stringValues(),s=t.stringValues(),o=0;o<s.length;o++)for(r=0;r<a.length;r++)if((l=U(s[o],a[r],i,n)).toBoolean())return l}else if(e instanceof _){for(s=t.stringValues(),o=0;o<s.length;o++)if((l=U(new _(s[o].toNumber()),e,i,n)).toBoolean())return l}else if(e instanceof DateType||e instanceof g&&e.isDateString()){for(e instanceof g&&(e=new DateType(e)),s=t.stringValues(),o=0;o<s.length;o++)if((l=U(new DateType(s[o].toDate()),e,i,n)).toBoolean())return l}else{if(!(e instanceof g))return U(new m(t.toBoolean()),e,i,n);for(s=t.stringValues(),o=0;o<s.length;o++)if((l=U(s[o],e,i,n)).toBoolean())return l}else if(e instanceof y)if(t instanceof _){for(a=e.stringValues(),o=0;o<a.length;o++)if((l=U(t,new _(a[o].toNumber()),i,n)).toBoolean())return l}else if(t instanceof DateType||t instanceof g&&t.isDateString()){for(t instanceof g&&(t=new DateType(t)),a=e.stringValues(),o=0;o<a.length;o++)if((l=U(t,new DateType(a[o].toDate()),i,n)).toBoolean())return l}else{if(!(t instanceof g))return U(t,new m(e.toBoolean()),i,n);for(a=e.stringValues(),o=0;o<a.length;o++)if((l=U(t,a[o],i,n)).toBoolean())return l}else switch(i){case"=":case"!=":return t instanceof m||e instanceof m?new m(n(t.toBoolean(),e.toBoolean())):t instanceof _||e instanceof _?new m(n(t.toNumber(),e.toNumber())):t instanceof DateType||e instanceof DateType||t instanceof g&&t.isDateString()||e instanceof g&&e.isDateString()?new m(n(t.toNumber(),e.toNumber())):new m(n(t.toString(),e.toString()));default:return new m(n(t.toNumber(),e.toNumber()))}return new m(!1)},H=function(t){switch(t.nodeType){case 2:case 3:case 4:case 7:case 8:return E(t);case 1:case 9:return t;case 13:default:throw new Error("Internal Error: getComparableNode - Node type not supported: "+t.nodeType)}},V=function(t,e){var i,n,o;if(13==t.nodeType&&13==e.nodeType&&t.ownerElement==e.ownerElement){if(t===e)return 0;for(n=A.call(b,t.ownerElement),o=0;o<n.length;o++){if(n[o]===t){i=4;break}if(n[o]===e){i=2;break}}}else 13==t.nodeType&&(t=t.ownerElement),13==e.nodeType&&(e=e.ownerElement),i=W(t,e);return i},W=function(t,e){var i,n,o,r,s,a=function(t,e,i,n,o,r,s,a,l){return 0===o||(o&r)===r?a+r:(o&s)===s?l:o};if(t.compareDocumentPosition)return t.compareDocumentPosition(e);if(t===e)return 0;if(i=H(t),n=H(e),9===i.nodeType)if(9===n.nodeType){if(i!==n)return 1;o=0}else{if(i!==n.ownerDocument)return 1;o=20}else if(9===n.nodeType){if(n!==i.ownerDocument)return 1;o=10}else{if(i.ownerDocument!==n.ownerDocument)return 1;if(!i.contains||void 0===i.sourceIndex||!n.contains||void 0===n.sourceIndex)throw new Error('Cannot compare elements. Neither "compareDocumentPosition" nor "contains" available.');o=(i!=n&&i.contains(n)&&16)+(i!=n&&n.contains(i)&&8)+(0<=i.sourceIndex&&0<=n.sourceIndex?(i.sourceIndex<n.sourceIndex&&4)+(i.sourceIndex>n.sourceIndex&&2):1)+0}if(t===i&&e===n)return o;if(t===i)return a(0,0,0,0,o,16,8,4,2);if(e===n)return a(0,0,0,0,o,8,16,2,4);if(16==(16&o))return 4;if(8==(8&o))return 2;if(0===o){for(r=0;r<i.attributes.length;r++)if((s=i.attributes[r]).specified){if(s===e)return 2;if(s===t)return 4}throw new Error("Internal Error: compareDocumentPosition failed to sort attributes.")}return o},Z=function(t){if(!t)throw B(9,"NOT_SUPPORTED_ERR","Context node was not supplied.");if(9!=t.nodeType&&1!=t.nodeType&&2!=t.nodeType&&3!=t.nodeType&&4!=t.nodeType&&8!=t.nodeType&&7!=t.nodeType&&13!=t.nodeType)throw B(9,"NOT_SUPPORTED_ERR","The supplied node type is not supported. (nodeType: "+t.nodeType+")");if(2==t.nodeType&&!t.specified)throw B(9,"NOT_SUPPORTED_ERR","The supplied node is a non-specified attribute node. Only specified attribute nodes are supported.")},G=function(t,e,i){var n,o;for(n=0;n<x.length;n++)if((o=x[n]).prefix===t&&o.nodeValue===e&&o.ownerElement===i)return o;return o=new s(t,e,i),x.push(o),o},(f=function(t,e,i){this.value=t,this.type=e,this.supports=i}).prototype={value:null,type:null,supports:[],toBoolean:function(){throw new Error('Unable to convert "'+this.type+'" to "boolean".')},toString:function(){throw new Error('Unable to convert "'+this.type+'" to "string".')},toNumber:function(){throw new Error('Unable to convert "'+this.type+'" to "number".')},toNodeSet:function(){throw new Error('Unable to convert "'+this.type+'" to "node-set".')},toDate:function(){throw new Error('Unable to convert "'+this.type+'" to "date".')},canConvertTo:function(t){return!1!==q(t,this.supports)}},(m=function(t){f.call(this,t,"boolean",["boolean","string","number","date"])}).prototype=new f,(m.constructor=m).prototype.toBoolean=function(){return this.value},m.prototype.toString=function(){return!0===this.value?"true":"false"},m.prototype.toNumber=function(){return this.value?1:0},m.prototype.toDate=function(){return null},(y=function(t,e){f.call(this,t,"node-set",["boolean","string","number","node-set","date"]),this.docOrder=e||"unsorted"}).prototype=new f,(y.constructor=y).prototype.toBoolean=function(){return 0<this.value.length},y.prototype.toString=function(){return this.value.length<1?"":(this.sortDocumentOrder(),F(this.value[0]))},y.prototype.toNumber=function(){return new g(this.toString()).toNumber()},y.prototype.toNodeSet=function(){return this.value},y.prototype.toDate=function(){return new g(this.toString()).toDate()},y.prototype.sortDocumentOrder=function(){switch(this.docOrder){case"document-order":break;case"reverse-document-order":this.value.reverse();break;default:this.value.sort(function(t,e){var i=V(t,e);if(4==(4&i))return-1;if(2==(2&i))return 1;throw new Error("NodeSetType.sortDocumentOrder - unexpected compare result: "+i)})}this.docOrder="document-order"},y.prototype.sortReverseDocumentOrder=function(){switch(this.docOrder){case"document-order":this.value.reverse();break;case"reverse-document-order":break;default:this.sortDocumentOrder(),this.value.reverse()}this.docOrder="reverse-document-order"},y.prototype.append=function(t){var e,i=0,n=0;if(!t instanceof y)throw new Error("NodeSetType can be passed into NodeSetType.append method");for(this.sortDocumentOrder(),t.sortDocumentOrder();i<this.value.length&&n<t.value.length;)if(0==(e=V(this.value[i],t.value[n])))n++;else if(4==(4&e))i++;else{if(2!=(2&e))throw new Error("Internal Error: NodeSetType.append - unable to sort nodes. (result: "+e+")");this.value.splice(i,0,t.value[n]),i++,n++}for(;n<t.value.length;n++)this.value.push(t.value[n]);this.docOrder="document-order"},y.prototype.stringValues=function(){var t,e,i=[];for(t=0;t<this.value.length;t++)(e=new g(F(this.value[t]))).isDateString()&&(e=new DateType(e.value)),i.push(e);return i},(g=function(t){f.call(this,t,"string",["boolean","string","number","date"])}).prototype=new f,(g.constructor=g).prototype.toBoolean=function(){return 0<this.value.length},g.prototype.toString=function(){return this.value},g.prototype.toNumber=function(){var t;return this.isDateString(this.value)?new DateType(this.value).toNumber():null!==(t=this.value.match(/^[ \t\r\n]*(-?[0-9]+(?:[.][0-9]*)?)[ \t\r\n]*$/))?parseFloat(t[1]):null!==(t=this.value.match(/^[ \t\r\n]*(-?[.][0-9]+)[ \t\r\n]*$/))?parseFloat(t[1]):Number.NaN},g.prototype.toDate=function(){return new DateType(this.value).toDate()},g.prototype.isDateString=function(){return!!isNaN(this.value)&&!isNaN(Date.parse(this.value))&&!!/('|")?[0-9]{4}(-|\/)[0-9]{2}(-|\/)[0-9]{2}('|")?/.test(this.value)},(_=function(t){f.call(this,t,"number",["boolean","string","number","date"])}).prototype=new f,(_.constructor=_).prototype.toBoolean=function(){return 0!==this.value&&!isNaN(this.value)},_.prototype.toString=function(){return this.value.toString()},_.prototype.toNumber=function(){return this.value},_.prototype.toDate=function(){return new Date(864e5*this.value)},DateType=function(t){/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(t)&&(t+="T00:00:00.000"+(new Date).getTimezoneOffsetAsTime()),f.call(this,t,"date",["date","string","number","boolean"])},DateType.prototype=new f,DateType.constructor=DateType,DateType.prototype.toDate=function(){return new Date(this.value)},DateType.prototype.toString=function(){return new Date(this.value).toISOLocalString()},DateType.prototype.toNumber=function(){return new Date(this.value).getTime()/864e5},DateType.prototype.toBoolean=function(){return!isNaN(new Date(this.value).getTime())},(a=function(t,e){var i;switch(this.code=t,this.code){case a.INVALID_EXPRESSION_ERR:this.name="INVALID_EXPRESSION_ERR";break;case a.TYPE_ERR:this.name="TYPE_ERR";break;default:throw(i=new Error("Unsupported XPathException code: "+this.code)).name="XPathExceptionInternalError",i}this.message=e||""}).prototype.toString=function(){return'XPathException: "'+this.message+'", code: "'+this.code+'", name: "'+this.name+'"'},a.INVALID_EXPRESSION_ERR=51,a.TYPE_ERR=52,(n=function(t){var e,i,n;for(e in t){for(i in n=!1,this.opts)if(e===i){this.opts[e]=t[e],n=!0;break}if(!n)throw new Error("Unsupported option: "+e)}this.opts["unique-ids"][L]="id",this.opts["unique-ids"]["http://www.w3.org/1999/xhtml"]="id"}).prototype={opts:{"unique-ids":{},"case-sensitive":!1},createExpression:function(t,e){var i,n,o,r,s={};try{i=Y.parse(t)}catch(t){throw n="The expression is not a legal expression.",t instanceof Y.SyntaxError?n+=" (line: "+t.line+", character: "+t.column+")":n+=" ("+t.message+")",new a(a.INVALID_EXPRESSION_ERR,n)}if(0<i.nsPrefixes.length){if("object"!=typeof e||void 0===e.lookupNamespaceURI)throw new a(a.INVALID_EXPRESSION_ERR,"No namespace resolver provided or lookupNamespaceURI function not supported.");for(o=0;o<i.nsPrefixes.length;o++)if(s[r=i.nsPrefixes[o]]=e.lookupNamespaceURI(r),null===s[r])throw B(14,"NAMESPACE_ERR",'Undefined namespace prefix "'+r+'" in the context of the given resolver.')}return new l(i,s,this.opts)},createNSResolver:function(t){return new o(t)},evaluate:function(t,e,i,n,o){return(t=this.createExpression(t,i)).evaluate(e,n,o)}},(l=function(t,e,i){this.parsedExpression=t,this.namespaceMapping=e,this.opts=i||{}}).prototype={parsedExpression:null,namespaceMapping:null,opts:{},evaluate:function(t,e,i){var n;return b=this,Z(t),n=new p(t,1,1,{},d,this.namespaceMapping,this.opts),r.factory(n,e,c(n,this.parsedExpression.tree))}},(p=function(t,e,i,n,o,r,s){this.node=t,this.pos=e,this.size=i,this.vars=n,this.fns=o,this.nsMap=r,this.opts=s||{}}).prototype={node:null,pos:null,size:null,vars:null,fns:null,nsMap:null,opts:null,clone:function(t,e,i){return new p(t||this.node,void 0!==e?e:this.pos,void 0!==i?i:this.size,this.vars,this.fns,this.nsMap,this.opts)}},(o=function(t){Z(t),this.node=t}).prototype={node:null,lookupNamespaceURI:function(t){var e,i,n,o=this.node;switch(t){case"xml":return L;case"xmlns":return"http://www.w3.org/2000/xmlns/";default:switch(this.node.nodeType){case 9:o=o.documentElement;break;case 1:break;default:o=E(o)}if(null!=o&&1==o.nodeType){if(""==t){if(null!==(i=o.getAttribute("xmlns")))return i}else{if(o.ownerDocument.documentElement===o&&"object"==typeof o.ownerDocument.namespaces)for(e=0;e<o.ownerDocument.namespaces.length;e++)if((i=o.ownerDocument.namespaces.item(e)).name==t)return i.urn;for(e=0;e<o.attributes.length;e++)if(o.attributes[e].specified&&"xmlns:"+t==o.attributes[e].nodeName)return o.attributes[e].nodeValue}if(o.ownerDocument.documentElement!==o&&o.parentNode)return n=this.node,this.node=o.parentNode,i=this.lookupNamespaceURI(t),this.node=n,i}return null}}},(d={"":{last:{fn:function(){return new _(this.size)},ret:"number"},count:{fn:function(t){return new _(t.toNodeSet().length)},args:[{t:"node-set"}],ret:"number"},id:{fn:function(t){var n,e,i,o=this,r=[],s=[],a=function(t){var e,i=t.split(/[\u0020\u0009\u000D\u000A]+/);for(e=i.length-1;0<=e;e--)0==i[e].length&&i.splice(e,1);return i};if(t instanceof y)for(n=0;n<t.value.length;n++)r.push.apply(r,a(F(t.value[n])));else t=t.toString(),r=a(t);for(n=r.length-1;0<=n;n--)for(e=n-1;0<=e;e--)if(r[n]==r[e]&&n!=e){r.splice(n,1);break}for(n=0;n<r.length;n++)(i=P(this.node).getElementById(r[n]))&&j.call(this,i)?s.push(i):z(P(this.node),!0,function(t,e){var i=j.call(o,t,e);if(i&&i.nodeValue==r[n])return s.push(t),!0});return new y(s)},args:[{}],ret:"node-set"},"local-name":{fn:function(t){var e,i="";return 0==arguments.length&&(t=new y([this.node])),0<t.toNodeSet().length&&(t.sortDocumentOrder(),!1!==(e=$.call(this,t.value[0]))&&(i=e.name)),new g(i)},args:[{t:"node-set",r:(u={"/":function(t,e){var i,n,o,r,s;if(null===t)n=new y([P(this.node)],"document-order");else if(!(n=c(this,t))instanceof y)throw new Error("Left side of path separator (/) must be of node-set type. (type: "+n.type+")");if(null===e)r=n;else for(r=new y([],"document-order"),i=0;i<n.value.length;i++){if(s=this.clone(n.value[i]),!(o=c(s,e))instanceof y)throw new Error("Right side of path separator (/) must be of node-set type. (type: "+o.type+")");r.append(o)}return r},step:function(t,e){var i,n,o,r,s,a,l;switch(t){case"child":i=new y(k(this.node),"document-order");break;case"descendant":i=new y(T(this.node),"document-order");break;case"parent":o=E(this.node),i=new y(o?[o]:[],"document-order");break;case"ancestor":i=new y(C(this.node),"reverse-document-order");break;case"following-sibling":i=new y(D(this.node),"document-order");break;case"preceding-sibling":i=new y(M(this.node),"reverse-document-order");break;case"following":i=new y(function(t){var e,i,n,o,r=[];for((e=C(t)).unshift(t),i=0;i<e.length;i++)for(n=D(e[i]),o=0;o<n.length;o++)r.push(n[o]),r.push.apply(r,T(n[o]));return r}(this.node),"document-order");break;case"preceding":i=new y(function(t){var e,i,n,o,r=[];for((e=C(t)).unshift(t),i=0;i<e.length;i++)for(n=M(e[i]),o=0;o<n.length;o++)r.push.apply(r,T(n[o]).reverse()),r.push(n[o]);return r}(this.node),"reverse-document-order");break;case"attribute":i=new y(I(this.node),"document-order");break;case"namespace":i=new y(A.call(this,this.node),"document-order");break;case"self":i=new y([this.node],"document-order");break;case"descendant-or-self":(r=T(this.node)).unshift(this.node),i=new y(r,"document-order");break;case"ancestor-or-self":(r=C(this.node)).unshift(this.node),i=new y(r,"reverse-document-order");break;default:throw new Error("Axis type not supported: "+t)}switch(e.type){case"nodeType":if("node"==e.args[0])break;for(n=i.value.length-1;0<=n;n--)switch(e.args[0]){case"text":3!=i.value[n].nodeType&&4!=i.value[n].nodeType&&i.value.splice(n,1);break;case"comment":8!=i.value[n].nodeType&&i.value.splice(n,1);break;case"processing-instruction":(7!=i.value[n].nodeType||0<e.args[1].length&&c(this,e.args[1][0])!=i.value[n].nodeName)&&i.value.splice(n,1)}break;case"name":switch(s=c(this,e),t){case"attribute":a=2;break;case"namespace":a=13;break;default:a=1}for(n=i.value.length-1;0<=n;n--)i.value[n].nodeType==a?null===s.ns&&null===s.name||(!1!==(l=$.call(this,i.value[n]))&&l.ns===s.ns?null!==s.name&&l.name.toLowerCase()!=s.name.toLowerCase()&&i.value.splice(n,1):i.value.splice(n,1)):i.value.splice(n,1);break;default:throw new Error("NodeTest type not supported in step: "+e.type)}return i},predicate:function(t,e,i){var n,o,r,s,a,l;if(!(n=c(this,e))instanceof y)throw new Error('Expected "node-set", got: '+n.type);switch(t){case"ancestor":case"ancestor-or-self":case"preceding":case"preceding-sibling":n.sortReverseDocumentOrder();break;default:n.sortDocumentOrder()}for(s=0;s<i.length;s++)for(o=0,a=1,l=n.value.length;o<n.value.length;a++){if((r=c(this.clone(n.value[o],a,l),i[s]))instanceof _){if(r.value!=a){n.value.splice(o,1);continue}}else if(!r.toBoolean()){n.value.splice(o,1);continue}o++}return n},function:function(t,e){var i,n,o,r,s=[],a=function(t){return(null!==t.ns?"{"+t.ns+"}":"{}")+t.name},l=function(t){var e,i,n=[];for(e=0;e<t.length;e++)i=void 0===t[e].t?"object":t[e].t,!1!==t[e].r?!0===t[e].rep&&(i+="+"):!0===t[e].rep?i+="*":i+="?",n.push(i);return"("+n.join(", ")+")"},h=0,u=[];if(null===(i=c(this,t)).ns&&(i.ns=""),!this.fns[i.ns]||!this.fns[i.ns][i.name])throw new Error('Function "'+a(i)+'" does not exist.');for((n=this.fns[i.ns][i.name]).args||(n.args=[]),h=o=0;o<n.args.length;h++,o++){if(void 0===e[h]){if(!1!==n.args[o].r)throw new Error('Function "'+a(i)+'" expects '+l(n.args)+".")}else u.push(void 0===n.args[o].t?"object":n.args[o].t);if(!0===n.args[o].rep){for(;h<e.length;h++)u.push(void 0===n.args[o].t?"object":n.args[o].t);break}}if(u.length<e.length)throw new Error('Function "'+a(i)+'" expects '+l(n.args)+".");for(o=0;o<e.length;o++){if(r=c(this,e[o]),"object"!==u[o]&&!r.canConvertTo(u[o]))throw new Error('Function "'+a(i)+'" expects '+l(n.args)+'.Cannot convert "'+r.type+'" to "'+u[o]+'".');s.push(r)}if(result=n.fn.apply(this,s),!result instanceof f)throw new Error('Function "'+a(i)+'" did not return a value that inherits from BaseType.');if("object"!==n.ret&&!result.canConvertTo(n.ret))throw new Error('Function "'+a(i)+'" return "'+result.type+'" type that cannot be converted to "'+n.ret+'".');return result},"|":function(t,e){if(t=c(this,t),e=c(this,e),void 0===t||void 0===e||!t instanceof y||!e instanceof y)throw new Error('Unable to perform union on non-"node-set" types.');return t.append(e),t},or:function(t,e){return c(this,t).toBoolean()?new m(!0):new m(c(this,e).toBoolean())},and:function(t,e){return c(this,t).toBoolean()?new m(c(this,e).toBoolean()):new m(!1)},"=":function(t,e){return U.call(this,c(this,t),c(this,e),"=",function(t,e){return t==e})},"!=":function(t,e){return U.call(this,c(this,t),c(this,e),"!=",function(t,e){return t!=e})},"<=":function(t,e){return U.call(this,c(this,t),c(this,e),"<=",function(t,e){return t<=e})},"<":function(t,e){return U.call(this,c(this,t),c(this,e),"<",function(t,e){return t<e})},">=":function(t,e){return U.call(this,c(this,t),c(this,e),">=",function(t,e){return e<=t})},">":function(t,e){return U.call(this,c(this,t),c(this,e),">",function(t,e){return e<t})},"+":function(t,e){return new _(c(this,t).toNumber()+c(this,e).toNumber())},"-":function(t,e){return new _(c(this,t).toNumber()-c(this,e).toNumber())},div:function(t,e){return new _(c(this,t).toNumber()/c(this,e).toNumber())},mod:function(t,e){return new _(c(this,t).toNumber()%c(this,e).toNumber())},"*":function(t,e){return new _(c(this,t).toNumber()*c(this,e).toNumber())},string:function(t){return new g(t)},number:function(t){return new _(t)},$:function(t){throw new Error("TODO: Not implemented.16")},name:function(t,e){var i=null;if(null!==t&&!(i=this.nsMap[t]))throw new Error('Namespace prefix "'+t+'" is not mapped to a namespace.');return{ns:i,name:e}}},!1)}],ret:"string"},"namespace-uri":{fn:function(t){var e,i="";return 0==arguments.length&&(t=new y([this.node])),0<t.toNodeSet().length&&(t.sortDocumentOrder(),!1!==(e=$.call(this,t.value[0]))&&null!==e.ns&&(i=e.ns)),new g(i)},args:[{t:"node-set",r:!1}],ret:"string"},name:{fn:function(t){var e,i="";return 0==arguments.length&&(t=new y([this.node])),0<t.toNodeSet().length&&(t.sortDocumentOrder(),!1!==(e=$.call(this,t.value[0]))&&(i=e.prefix&&0<e.prefix.length?e.prefix+":"+e.name:e.name)),new g(i)},args:[{t:"node-set",r:!1}],ret:"string"},string:{fn:function(t){return 0==arguments.length&&(t=new y([this.node],"document-order")),new g(t.toString())},args:[{t:"object",r:!1}],ret:"string"},"starts-with":{fn:function(t,e){return new m(t.toString().substr(0,(e=e.toString()).length)==e)},args:[{t:"string"},{t:"string"}],ret:"string"},contains:{fn:function(t,e){return new m(-1!=t.toString().indexOf(e=e.toString()))},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-before":{fn:function(t,e){return e=(t=t.toString()).indexOf(e.toString()),new g(-1==e?"":t.substr(0,e))},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-after":{fn:function(t,e){var i;return t=t.toString(),e=e.toString(),i=t.indexOf(e),new g(-1==i?"":t.substr(i+e.length))},args:[{t:"string"},{t:"string"}],ret:"string"},substring:{fn:function(t,e,i){return t=t.toString(),e=Math.round(e.toNumber())-1,new g(isNaN(e)?"":2==arguments.length?t.substring(e<0?0:e):t.substring(e<0?0:e,e+Math.round(i.toNumber())))},args:[{t:"string"},{t:"number"},{t:"number",r:!1}],ret:"string"},"string-length":{fn:function(t){return t=0==arguments.length?F(this.node):t.toString(),new _(t.length)},args:[{t:"string",r:!1}],ret:"number"},"normalize-space":{fn:function(t){return t=0==arguments.length?F(this.node):t.toString(),new g(t.replace(/^[\u0020\u0009\u000D\u000A]+/,"").replace(/[\u0020\u0009\u000D\u000A]+$/,"").replace(/[\u0020\u0009\u000D\u000A]+/g," "))},args:[{t:"string",r:!1}],ret:"string"},translate:{fn:function(t,e,i){var n,o,r,s="";for(t=t.toString(),e=e.toString(),i=i.toString(),n=0;n<t.length;n++)(-1==(o=e.indexOf(r=t.charAt(n)))||(r=i.charAt(o)))&&(s+=r);return new g(s)},args:[{t:"string"},{t:"string"},{t:"string"}],ret:"string"},boolean:{fn:function(t){return new m(t.toBoolean())},args:[{r:!0}],ret:"boolean"},not:{fn:function(t){return new m(!t.toBoolean())},args:[{t:"boolean"}],ret:"boolean"},true:{fn:function(){return new m(!0)},ret:"boolean"},false:{fn:function(){return new m(!1)},ret:"boolean"},lang:{fn:function(t){for(var e,i,n,o,r,s,a,l=this.node,h=t.toString().toLowerCase().split("-");9!=l.nodeType;l=E(l))for(e=I(l),r=0;r<e.length;r++)if(1===(i=e[r].nodeName.split(":")).length&&(i[1]=i[0],i[0]=""),"lang"==i[1]){if((n=e[r].nodeValue.toLowerCase().split("-")).length<h.length)continue;for(a=!0,s=0;s<h.length;s++)if(h[s]!=n[s]){a=!1;break}if(a)for(o=A.call(this,l),s=0;s<o.length;s++)if(o[s].prefix==i[0]&&o[s].nodeValue==L)return new m(!0)}return new m(!1)},args:[{t:"string"}],ret:"boolean"},number:{fn:function(t){return 0==arguments.length&&(t=new y([this.node],"document-order")),new _(t.toNumber())},args:[{t:"object",r:!1}],ret:"number"},sum:{fn:function(t){var e,i=0;for(t=t.toNodeSet(),e=0;e<t.length;e++)i+=new g(F(t[e])).toNumber();return new _(i)},args:[{t:"node-set"}],ret:"number"},floor:{fn:function(t){return new _(Math.floor(t))},args:[{t:"number"}],ret:"number"},ceiling:{fn:function(t){return new _(Math.ceil(t))},args:[{t:"number"}],ret:"number"},"count-non-empty":{fn:function(t){var e,i=0;for(t=t.toNodeSet(),e=0;e<t.length;e++)0<new g(F(t[e])).toString().length&&i++;return new _(i)},args:[{t:"node-set"}],ret:"number"},position:{fn:function(t){if(t){var e,i,n;if(1===(t=t.toNodeSet()).length){for(n=1,i=(e=t[0]).tagName;e.previousElementSibling&&e.previousElementSibling.tagName===i;)e=e.previousElementSibling,n++;return new _(n)}throw new Error("nodeset provided to position() contained multiple nodes")}return new _(this.pos)},args:[{t:"node-set",r:!1}],ret:"number"},concat:{fn:function(t){var e,i="";for(e=0;e<arguments.length;e++)i+=arguments[e]instanceof y?arguments[e].stringValues().join(""):arguments[e].toString();return new g(i)},args:[{t:"object",r:!1,rep:!0}],ret:"string"},round:{fn:function(t,e){return e=Math.round(e)||0,new _(Math.round(t*Math.pow(10,e))/Math.pow(10,e))},args:[{t:"number"},{t:"number",r:!1}],ret:"number"},selected:{fn:function(t,e){var i;return e=e.toString().trim(),i=t.toString(),new m(-1!=(" "+i+" ").indexOf(" "+e+" "))},args:[{t:"object"},{t:"string"}],ret:"boolean"},"selected-at":{fn:function(t,e){var i,n;return e=Math.round(e.toNumber()),i=t.toString().split(" "),n=0<=e&&e<i.length?i[e]:"",new g(n)},args:[{t:"object"},{t:"number"}],ret:"string"},"count-selected":{fn:function(t){var e=[];return 0<(t=t.toNodeSet()).length?1==(e=F(t[0]).trim().split(" ")).length&&""===e[0]?new _(0):new _(e.length):new _(0)},args:[{t:"node-set"}],ret:"number"},checklist:{fn:function(t,e,i){var n,o,r=0;for(t=t.toNumber(),e=e.toNumber(),n=2;n<arguments.length;n++)if(arguments[n]instanceof y)for(o=0;o<arguments[n].stringValues().length;o++)!0===arguments[n].stringValues()[o].toBoolean()&&r++;else!0===arguments[n].toBoolean()&&r++;return new m((t<0||t<=r)&&(e<0||r<=e))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object",r:!1,rep:!0}],ret:"boolean"},"weighted-checklist":{fn:function(t,e,i,n){var o,r=[],s=[],a=0;for(t=t.toNumber(),e=e.toNumber(),o=2;o<arguments.length;o+=2)v=arguments[o],w=arguments[o+1],v&&w&&(v instanceof y?r=r.concat(v.stringValues()):r.push(v),w instanceof y?s=s.concat(w.stringValues()):s.push(w));for(o=0;o<r.length;o++)!0===r[o].toBoolean()&&(a+=s[o].toNumber());return new m((t<0||t<=a)&&(e<0||a<=e))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object"},{t:"object",r:!1,rep:!0}],ret:"boolean"},"boolean-from-string":{fn:function(t){return new m("true"===t.toString().toLowerCase()||"1"===String(t))},args:[{t:"string"}],ret:"boolean"},if:{fn:function(t,e,i){return t.toBoolean()?e:i},args:[{t:"object"},{t:"object"},{t:"object"}],ret:"object"},date:{fn:function(t){return new DateType(t.toDate())},args:[{t:"object"}],ret:"string"},"date-time":{fn:function(t){return new DateType(t.toDate())},args:[{t:"object"}],ret:"string"},"decimal-date-time":{fn:function(t){var e,i=t.toDate();return e="Invalid Date"!==i.toString()?Math.round(1e3*i.getTime()/864e5)/1e3:Number.NaN,new _(e)},args:[{t:"object"}],ret:"number"},"decimal-time":{fn:function(t){var e,i=t.toString().match(/^(\d\d):(\d\d):(\d\d)(\.\d\d?\d?)?(\+|-)(\d\d):(\d\d)$/);if(new Error("Invalid time format provided."),i&&i[1]<24&&0<=i[1]&&i[2]<60&&0<=i[2]&&i[3]<60&&0<=i[3]&&i[6]<24&&0<=i[6]&&i[7]<60&&0<=i[7]){var n=function(t){return t<10?"0"+t:t},o=new Date,r=new Date(o.getFullYear()+"-"+n(o.getMonth()+1)+"-"+n(o.getDate())+"T"+t);e="Invalid Date"===r.toString()?Number.NaN:Math.round(1e3*(r.getSeconds()/3600+r.getMinutes()/60+r.getHours())/24)/1e3}else e=Number.NaN;return new _(e)},args:[{t:"string"}],ret:"number"},today:{fn:function(){var t=new Date;return new DateType(new Date(t.getFullYear(),t.getMonth(),t.getDate()))},ret:"string"},now:{fn:function(){return new DateType(new Date)},ret:"string"},regex:{fn:function(t,e){var i,n;return i=t.toString(),n=new RegExp(e),new m(n.test(i))},args:[{t:"object"},{t:"string"}],ret:"boolean"},uuid:{fn:function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)});return new g(t)},ret:"string"},int:{fn:function(t){return new _(0<=t.toNumber()?Math.floor(t.toNumber()):-Math.floor(Math.abs(t.toNumber())))},args:[{t:"string"}],ret:"number"},substr:{fn:function(t,e,i){return t=t.toString(),length=t.length,e=Math.round(e.toNumber()),i=i?Math.round(i.toNumber()):length,new g(isNaN(e)?"":t.substring(e<0?length+e:e,i<0?length+i:i))},args:[{t:"string"},{t:"number"},{t:"number",r:!1}],ret:"string"},random:{fn:function(){return new _(Math.random().toFixed(15))},ret:"number"},min:{fn:function(t,e){var i,n,o,r,s;for(i=0;i<arguments.length;i++)if(arguments[i]instanceof y){for(s=arguments[i].toNodeSet(),n=0;n<s.length;n++)(r=new g(F(s[n])))&&(o=void 0!==o?Math.min(o,r.toNumber()):r.toNumber());0===s.length&&(o=NaN)}else(r=new g(arguments[i].toString()))&&(o=void 0!==o?Math.min(o,r.toNumber()):r.toNumber());return new _(o)},args:[{t:"object"},{t:"object",r:!1,rep:!0}],ret:"number"},max:{fn:function(t,e){var i,n,o,r,s;for(i=0;i<arguments.length;i++)if(arguments[i]instanceof y){for(s=arguments[i].toNodeSet(),n=0;n<s.length;n++)(r=new g(F(s[n])))&&(o=void 0!==o?Math.max(o,r.toNumber()):r.toNumber());0===s.length&&(o=NaN)}else(r=new g(arguments[i].toString()))&&(o=void 0!==o?Math.max(o,r.toNumber()):r.toNumber());return new _(o)},args:[{t:"object"},{t:"object",r:!1,rep:!0}],ret:"number"},join:{fn:function(t,e){var i,n=[];for(i=1;i<arguments.length;i++)arguments[i]instanceof y?n=n.concat(arguments[i].stringValues()):n.push(arguments[i].toString());for(value=n[0]||"",i=1;i<n.length;i++)value+=t.toString()+n[i];return new g(value)},args:[{t:"string"},{t:"object",r:!1,rep:!0}],ret:"string"},coalesce:{fn:function(t,e){return 0<t.toString().length?t:e},args:[{t:"object"},{t:"object"}],ret:"string"},"format-date":{fn:function(t,e){var o,i=(t=new DateType(t)).toDate(),n=e.toString(),r=function(t,e){var i=t.toString(),n=e-i.length;for(o=0;o<n;o++)i="0"+i;return i},s=window?window.enketoFormLocale:void 0;if(!t.toBoolean())return new g(i.toString());for(prop in props={Y:i.getFullYear(),y:i.getFullYear().toString().substring(2,4),m:r(i.getMonth()+1,2),n:i.getMonth()+1,b:i.toLocaleDateString(s,{month:"short"}),d:r(i.getDate(),2),e:i.getDate(),H:r(i.getHours(),2),h:i.getHours(),M:r(i.getMinutes(),2),S:r(i.getSeconds(),2),3:r(i.getMilliseconds(),3),a:i.toLocaleDateString(s,{weekday:"short"})},props)n=n.replace("%"+prop,props[prop]);return new g(n)},args:[{t:"date"},{t:"string"}],ret:"string"},pow:{fn:function(t,e){return new _(Math.pow(t,e))},args:[{t:"number"},{t:"number"}],ret:"number"},sin:{fn:function(t){return new _(Math.sin(t))},args:[{t:"number"}],ret:"number"},cos:{fn:function(t){return new _(Math.cos(t))},args:[{t:"number"}],ret:"number"},tan:{fn:function(t){return new _(Math.tan(t))},args:[{t:"number"}],ret:"number"},acos:{fn:function(t){return new _(Math.acos(t))},args:[{t:"number"}],ret:"number"},asin:{fn:function(t){return new _(Math.asin(t))},args:[{t:"number"}],ret:"number"},atan:{fn:function(t){return new _(Math.atan(t))},args:[{t:"number"}],ret:"number"},atan2:{fn:function(t,e){return new _(Math.atan2(t,e))},args:[{t:"number"},{t:"number"}],ret:"number"},log10:{fn:function(t){return void 0!==Math.log10?new _(Math.log10(t)):new _(Math.log(t)/Math.LN10)},args:[{t:"number"}],ret:"number"},log:{fn:function(t){return new _(Math.log(t))},args:[{t:"number"}],ret:"number"},pi:{fn:function(){return new _(Math.PI)},args:[],ret:"number"},exp:{fn:function(t){return new _(Math.exp(t))},args:[{t:"number"}],ret:"number"},exp10:{fn:function(t){return new _(Math.pow(10,t))},args:[{t:"number"}],ret:"number"},sqrt:{fn:function(t){return new _(Math.sqrt(t))},args:[{t:"number"}],ret:"number"},once:{fn:function(t){var e=F(this.node),i=t.toString();return i="NaN"===i?"":i,new g(""!==e?e:i)},args:[{t:"string"}],ret:"string"},area:{fn:function(t){var e=[];return t instanceof y&&1<t.value.length?t.value.forEach(function(t){e.push(F(t))}):t instanceof y?e=F(t.value[0]).split(";"):t instanceof g&&(e=t.value.split(";")),new _(K.area(e))},args:[{t:"string"}],ret:"number"},distance:{fn:function(t){var e=[];return t instanceof y&&1<t.value.length?t.value.forEach(function(t){e.push(F(t))}):t instanceof y?e=F(t.value[0]).split(";"):t instanceof g&&(e=t.value.split(";")),new _(K.distance(e))},args:[{t:"string"}],ret:"number"},"ends-with":{fn:function(t,e){return new m(t.toString().substr(t.toString().length-e.toString().length)===e.toString())},args:[{t:"string"},{t:"string"}],ret:"string"},abs:{fn:function(t){return new _(Math.abs(t))},args:[{t:"number"}],ret:"number"},randomize:{fn:function(t,e){var i=e?e.toNumber():void 0;return new y(X(t.toNodeSet(),i),"document-order")},args:[{t:"node-set"},{t:"number",r:!1}],ret:"node-set"}}})[""]["format-date-time"]=d[""]["format-date"],c=function(t,e){if("function"!=typeof u[e.type])throw new Error("Internal Error: Expression type does not exist: "+e.type);return u[e.type].apply(t,e.args)},(r=function(t,e,i){switch(e){case r.NUMBER_TYPE:this.resultType=r.NUMBER_TYPE,this.numberValue=i.toNumber();break;case r.STRING_TYPE:this.resultType=r.STRING_TYPE,this.stringValue=i.toString();break;case r.BOOLEAN_TYPE:this.resultType=r.BOOLEAN_TYPE,this.booleanValue=i.toBoolean();break;case r.UNORDERED_NODE_ITERATOR_TYPE:case r.ORDERED_NODE_ITERATOR_TYPE:case r.UNORDERED_NODE_SNAPSHOT_TYPE:case r.ORDERED_NODE_SNAPSHOT_TYPE:case r.ANY_UNORDERED_NODE_TYPE:case r.FIRST_ORDERED_NODE_TYPE:if(!i instanceof y)throw new Error('Expected result of type "node-set", got: "'+i.type+'"');switch(this.resultType=e){case r.UNORDERED_NODE_ITERATOR_TYPE:case r.UNORDERED_NODE_SNAPSHOT_TYPE:this._value=i.toNodeSet(),this.snapshotLength=this._value.length;break;case r.ORDERED_NODE_ITERATOR_TYPE:case r.ORDERED_NODE_SNAPSHOT_TYPE:i.sortDocumentOrder(),this._value=i.toNodeSet(),this.snapshotLength=this._value.length;break;case r.ANY_UNORDERED_NODE_TYPE:i=i.toNodeSet(),this.singleNodeValue=i.length?i[0]:null;break;case r.FIRST_ORDERED_NODE_TYPE:i.sortDocumentOrder(),i=i.toNodeSet(),this.singleNodeValue=i.length?i[0]:null;break;default:throw new a(a.TYPE_ERR,"XPath result type not supported. (type: "+e+")")}break;default:throw new a(a.TYPE_ERR,"XPath result type not supported. (type: "+e+")")}}).factory=function(t,e,i){var n;if(e!==r.ANY_TYPE)return new r(t,e,i);if(i instanceof y)n=new r(t,r.UNORDERED_NODE_ITERATOR_TYPE,i);else if(i instanceof _)n=new r(t,r.NUMBER_TYPE,i);else if(i instanceof m)n=new r(t,r.BOOLEAN_TYPE,i);else{if(!(i instanceof g))throw new a(a.TYPE_ERR,"Internal Error: Unsupported value type: "+typeof i);n=new r(t,r.STRING_TYPE,i)}return n},r.prototype={resultType:null,numberValue:null,stringValue:null,booleanValue:null,singleNodeValue:null,invalidIteratorState:null,snapshotLength:null,_iteratorIndex:0,iterateNext:function(){if(this.resultType!=r.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=r.ORDERED_NODE_ITERATOR_TYPE)throw new a(a.TYPE_ERR,"iterateNext() method may only be used with results of type UNORDERED_NODE_ITERATOR_TYPE or ORDERED_NODE_ITERATOR_TYPE");return this._iteratorIndex<this._value.length?this._value[this._iteratorIndex++]:null},snapshotItem:function(t){if(this.resultType!=r.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=r.ORDERED_NODE_SNAPSHOT_TYPE)throw new a(a.TYPE_ERR,"snapshotItem() method may only be used with results of type UNORDERED_NODE_SNAPSHOT_TYPE or ORDERED_NODE_SNAPSHOT_TYPE");return this._value[t]}},r.ANY_TYPE=0,r.NUMBER_TYPE=1,r.STRING_TYPE=2,r.BOOLEAN_TYPE=3,r.UNORDERED_NODE_ITERATOR_TYPE=4,r.ORDERED_NODE_ITERATOR_TYPE=5,r.UNORDERED_NODE_SNAPSHOT_TYPE=6,r.ORDERED_NODE_SNAPSHOT_TYPE=7,r.ANY_UNORDERED_NODE_TYPE=8,r.FIRST_ORDERED_NODE_TYPE=9,(s=function(t,e,i){if(1!=i.nodeType)throw new Error("Internal Error: XPathNamespace owner element must be an Element node.");this.ownerElement=i,this.ownerDocument=i.ownerDocument,this.nodeName="#namespace",this.prefix=t,this.localName=t,this.nodeType=s.XPATH_NAMESPACE_NODE,this.namespaceURI=e,this.nodeValue=e}).XPATH_NAMESPACE_NODE=13,h={XPathException:a,XPathEvaluator:n,XPathNSResolver:o,XPathExpression:l,XPathResult:r,XPathNamespace:s,customXPathFunction:{type:{StringType:g,NumberType:_,NodeSetType:y,BooleanType:m},add:function(t,e){d[""][t]=e},remove:function(t){delete d[""][t]}},getCurrentDomLevel3XPathBindings:function(){return{window:{XPathException:window.XPathException,XPathExpression:window.XPathExpression,XPathNSResolver:window.XPathNSResolver,XPathResult:window.XPathResult,XPathNamespace:window.XPathNamespace},document:{createExpression:document.createExpression,createNSResolver:document.createNSResolver,evaluate:document.evaluate}}},createDomLevel3XPathBindings:function(t){var e=new n(t);return{window:{XPathException:a,XPathExpression:l,XPathNSResolver:o,XPathResult:r,XPathNamespace:s},document:{createExpression:function(){return e.createExpression.apply(e,arguments)},createNSResolver:function(){return e.createNSResolver.apply(e,arguments)},evaluate:function(){return e.evaluate.apply(e,arguments)}}}},bindDomLevel3XPath:function(t,e){var i,n=e||h.createDomLevel3XPathBindings(),o=h.getCurrentDomLevel3XPathBindings();for(i in t=t||document,n.window)window[i]=n.window[i];for(i in n.document)t[i]=n.document[i];return o}})},{"../dist/parser":5,"./date-extensions":6,"./geo":8,"./shuffle":9}],8:[function(t,e,i){var d=6378100;function p(t){return t.map(function(t){return t.trim().split(" ")})}function f(t){return t*Math.PI/180}function m(t){return t.every(function(t){return""!==t[0]&&-90<=t[0]&&t[0]<=90&&""!==t[1]&&-180<=t[1]&&t[1]<=180&&(void 0===t[2]||!isNaN(t[2]))&&(void 0===t[3]||!isNaN(t[3])&&0<=t[3])})}e.exports={area:function(t){var e=p(t);if(!m(e))return Number.NaN;var i=e.length,n=0;if(2<i){for(var o=0;o<i;o++){var r={lat:e[o][0],lng:e[o][1]},s={lat:e[(o+1)%i][0],lng:e[(o+1)%i][1]};n+=f(s.lng-r.lng)*(2+Math.sin(f(r.lat))+Math.sin(f(s.lat)))}n=n*d*d/2}return Math.abs(Math.round(100*n))/100},distance:function(t){var e=p(t);if(!m(e))return Number.NaN;var i,n,o,r,s,a=e.length,l=0;if(1<a)for(var h=1;h<a;h++){var u={lat:e[h-1][0],lng:e[h-1][1]},c={lat:e[h][0],lng:e[h][1]};l+=(o=f((i=u).lng-(n=c).lng),r=f(i.lat),s=f(n.lat),Math.acos(Math.sin(r)*Math.sin(s)+Math.cos(r)*Math.cos(s)*Math.cos(o))*d)}return Math.abs(Math.round(100*l))/100}}},{}],9:[function(t,e,i){var n=2147483647;function a(t){this._seed=t%n,this._seed<=0&&(this._seed+=n-1)}Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},a.prototype.next=function(){return this._seed=16807*this._seed%n},a.prototype.nextFloat=function(){return(this.next()-1)/(n-1)},e.exports=function(t,e){var i,n=[];if(void 0!==e){if(!Number.isInteger(e))throw new Error("Invalid seed argument. Integer required.");var o=new a(e);i=o.nextFloat.bind(o)}else i=Math.random;for(var r=0;r<t.length;++r){var s=Math.floor(i()*(r+1));s!==r&&(n[r]=n[s]),n[s]=t[r]}return n}},{}],10:[function(t,e,i){"use strict";function c(t,e,i){if(void 0===i)return t&&t.h5s&&t.h5s.data&&t.h5s.data[e];t.h5s=t.h5s||{},t.h5s.data=t.h5s.data||{},t.h5s.data[e]=i}function d(t,e){if(!(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof e?Array.from(t):Array.from(t).filter(function(t){return 1===t.nodeType&&t.matches(e)})}var p=new Map,n=function(){function t(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(t.prototype,"config",{get:function(){var i={};return this._config.forEach(function(t,e){i[e]=t}),i},set:function(t){if("object"!=typeof t)throw new Error("You must provide a valid configuration object to the config setter.");var e=Object.assign({},t);this._config=new Map(Object.entries(e))},enumerable:!0,configurable:!0}),t.prototype.setConfig=function(t,e){if(!this._config.has(t))throw new Error("Trying to set invalid configuration item: "+t);this._config.set(t,e)},t.prototype.getConfig=function(t){if(!this._config.has(t))throw new Error("Invalid configuration item requested: "+t);return this._config.get(t)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){if(!(t instanceof HTMLElement)&&null!==t)throw new Error("A placeholder must be an html element or null.");this._placeholder=t},enumerable:!0,configurable:!0}),t.prototype.setData=function(t,e){if("string"!=typeof t)throw new Error("The key must be a string.");this._data.set(t,e)},t.prototype.getData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.get(t)},t.prototype.deleteData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.delete(t)},t}();function f(t){if(!(t instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return p.has(t)||p.set(t,new n),p.get(t)}function m(t,e,i){if(t instanceof Array)for(var n=0;n<t.length;++n)m(t[n],e,i);else t.addEventListener(e,i),f(t).setData("event"+e,i)}function a(t,e){if(t instanceof Array)for(var i=0;i<t.length;++i)a(t[i],e);else t.removeEventListener(e,f(t).getData("event"+e)),f(t).deleteData("event"+e)}function g(t,e,i){if(t instanceof Array)for(var n=0;n<t.length;++n)g(t[n],e,i);else t.setAttribute(e,i)}function l(t,e){if(t instanceof Array)for(var i=0;i<t.length;++i)l(t[i],e);else t.removeAttribute(e)}function v(t){if(!t.parentElement||0===t.getClientRects().length)throw new Error("target element must be part of the dom");var e=t.getClientRects()[0];return{left:e.left+window.scrollX,right:e.right+window.scrollX,top:e.top+window.scrollY,bottom:e.bottom+window.scrollY}}function _(t,e){if(!(t instanceof HTMLElement&&(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(e).indexOf(t)}function y(t){if(!(t instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==t.parentNode}var o=function(t,e,i){if(!(t instanceof HTMLElement&&t.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");t.parentElement.insertBefore(e,"before"===i?t:t.nextElementSibling)},w=function(t,e){return o(t,e,"before")},b=function(t,e){return o(t,e,"after")};function x(t){if(!(t instanceof HTMLElement))throw new Error("You must provide a valid dom element");var i=window.getComputedStyle(t);return["height","padding-top","padding-bottom"].map(function(t){var e=parseInt(i.getPropertyValue(t),10);return isNaN(e)?0:e}).reduce(function(t,e){return t+e})}function h(t,e){if(!(t instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof e?t:t.filter(function(t){return t.querySelector(e)instanceof HTMLElement}).map(function(t){return t.querySelector(e)})}var L=function(t,e,i){return{element:t,posX:i.pageX-e.left,posY:i.pageY-e.top}};function k(t,e){if(!0===t.isSortable){var i=f(t).getConfig("acceptFrom");if(null!==i&&!1!==i&&"string"!=typeof i)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==i)return!1!==i&&0<i.split(",").filter(function(t){return 0<t.length&&e.matches(t)}).length;if(t===e)return!0;if(void 0!==f(t).getConfig("connectWith")&&null!==f(t).getConfig("connectWith"))return f(t).getConfig("connectWith")===f(e).getConfig("connectWith")}return!1}var T,E,C,D,M,S,P,N={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null};function I(t,e){if("string"==typeof f(t).getConfig("hoverClass")){var o=f(t).getConfig("hoverClass").split(" ");!0===e?(m(t,"mousemove",function(n,o){var r=this;if(void 0===o&&(o=250),"function"!=typeof n)throw new Error("You must provide a function as the first argument for throttle.");if("number"!=typeof o)throw new Error("You must provide a number as the second argument for throttle.");var s=null;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var i=Date.now();(null===s||o<=i-s)&&(s=i,n.apply(r,t))}}(function(n){0===n.buttons&&d(t.children,f(t).getConfig("items")).forEach(function(t){var e,i;t!==n.target?(e=t.classList).remove.apply(e,o):(i=t.classList).add.apply(i,o)})},f(t).getConfig("throttleTime"))),m(t,"mouseleave",function(){d(t.children,f(t).getConfig("items")).forEach(function(t){var e;(e=t.classList).remove.apply(e,o)})})):(a(t,"mousemove"),a(t,"mouseleave"))}}var u=function(t){a(t,"dragstart"),a(t,"dragend"),a(t,"dragover"),a(t,"dragenter"),a(t,"drop"),a(t,"mouseenter"),a(t,"mouseleave")},A=function(t,e){var i=t;return!0===f(e).getConfig("copy")&&(g(i=t.cloneNode(!0),"aria-copied","true"),t.parentElement.appendChild(i),i.style.display="none",i.oldDisplay=t.style.display),i};function O(t){for(;!0!==t.isSortable;)t=t.parentElement;return t}function R(t,e){var i=c(t,"opts"),n=d(t.children,i.items).filter(function(t){return t.contains(e)});return 0<n.length?n[0]:e}var r=function(t){var e,i,n,o=c(t,"opts")||{},r=d(t.children,o.items),s=h(r,o.handle);a(t,"dragover"),a(t,"dragenter"),a(t,"drop"),(i=e=t).h5s&&delete i.h5s.data,l(e,"aria-dropeffect"),a(s,"mousedown"),u(r),l(n=r,"aria-grabbed"),l(n,"aria-copied"),l(n,"draggable"),l(n,"role")},j=function(t){var e=c(t,"opts"),i=d(t.children,e.items),n=h(i,e.handle);(g(t,"aria-dropeffect","move"),c(t,"_disabled","false"),g(n,"draggable","true"),!1===e.disableIEFix)&&("function"==typeof(document||window.document).createElement("span").dragDrop&&m(n,"mousedown",function(){if(-1!==i.indexOf(this))this.dragDrop();else{for(var t=this.parentElement;-1===i.indexOf(t);)t=t.parentElement;t.dragDrop()}}))},z=function(t){var e=c(t,"opts"),i=d(t.children,e.items),n=h(i,e.handle);c(t,"_disabled","false"),u(i),a(n,"mousedown"),a(t,"dragover"),a(t,"dragenter"),a(t,"drop")};function $(t,u){var h=String(u);return u=Object.assign({connectWith:null,acceptFrom:null,copy:!1,placeholder:null,disableIEFix:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,items:null},"object"==typeof u?u:{}),"string"==typeof t&&(t=document.querySelectorAll(t)),t instanceof HTMLElement&&(t=[t]),t=Array.prototype.slice.call(t),/serialize/.test(h)?t.map(function(t){var e=c(t,"opts");return function(e,i,t){if(void 0===i&&(i=function(t,e){return t}),void 0===t&&(t=function(t){return t}),!(e instanceof HTMLElement)||1==!e.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof i||"function"!=typeof t)throw new Error("You need to provide a valid serializer for items and the container.");var n=c(e,"opts").items,o=d(e.children,n),r=o.map(function(t){return{parent:e,node:t,html:t.outerHTML,index:_(t,o)}});return{container:t({node:e,itemCount:r.length}),items:r.map(function(t){return i(t,e)})}}(t,e.itemSerializer,e.containerSerializer)}):(t.forEach(function(l){if(/enable|disable|destroy/.test(h))return $[h](l);["connectWith","disableIEFix"].forEach(function(t){u.hasOwnProperty(t)&&null!==u[t]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+t+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')}),u=Object.assign({},N,u),f(l).config=u,u=c(l,"opts")||u,c(l,"opts",u),l.isSortable=!0,z(l);var t,e=d(l.children,u.items);if(null!==u.placeholder&&void 0!==u.placeholder){var i=document.createElement(l.tagName);i.innerHTML=u.placeholder,t=i.children[0]}f(l).placeholder=function(t,e,i){if(void 0===i&&(i="sortable-placeholder"),!(t instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(e instanceof HTMLElement)&&void 0!==e)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===e&&(["UL","OL"].includes(t.tagName)?e=document.createElement("li"):["TABLE","TBODY"].includes(t.tagName)?(e=document.createElement("tr")).innerHTML='<td colspan="100"></td>':e=document.createElement("div")),"string"==typeof i&&(n=e.classList).add.apply(n,i.split(" ")),e;var n}(l,t,u.placeholderClass),c(l,"items",u.items),u.acceptFrom?c(l,"acceptFrom",u.acceptFrom):u.connectWith&&c(l,"connectWith",u.connectWith),j(l),g(e,"role","option"),g(e,"aria-grabbed","false"),I(l,!0),m(l,"dragstart",function(t){if(!0!==t.target.isSortable&&(t.stopImmediatePropagation(),(!u.handle||t.target.matches(u.handle))&&"false"!==t.target.getAttribute("draggable"))){var e=O(t.target),i=R(e,t.target);S=d(e.children,u.items),D=S.indexOf(i),M=_(i,e.children),C=e,function(t,e,i){if(!(t instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(e instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(i||(i=L),t.dataTransfer&&t.dataTransfer.setDragImage){var n=i(e,v(e),t);if(!(n.element instanceof HTMLElement)||"number"!=typeof n.posX||"number"!=typeof n.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setData("text/plain","arbitrary"),t.dataTransfer.setDragImage(n.element,n.posX,n.posY)}}(t,i,u.customDragImage),E=x(i),i.classList.add(u.draggingClass),g(T=A(i,e),"aria-grabbed","true"),e.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:M,index:D,container:C},item:T}}))}}),m(l,"dragenter",function(t){if(!0!==t.target.isSortable){var e=O(t.target);P=d(e.children,c(e,"items")).filter(function(t){return t!==f(l).placeholder})}}),m(l,"dragend",function(t){if(T){T.classList.remove(u.draggingClass),g(T,"aria-grabbed","false"),"true"===T.getAttribute("aria-copied")&&"true"!==c(T,"dropped")&&T.remove(),T.style.display=T.oldDisplay,delete T.oldDisplay;var e=Array.from(p.values()).map(function(t){return t.placeholder}).filter(function(t){return t instanceof HTMLElement}).filter(y)[0];e&&e.remove(),l.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:M,index:D,container:C},item:T}})),E=T=null}}),m(l,"drop",function(t){if(k(l,T.parentElement)){t.preventDefault(),t.stopPropagation(),c(T,"dropped","true");var e=Array.from(p.values()).map(function(t){return t.placeholder}).filter(function(t){return t instanceof HTMLElement}).filter(y)[0];b(e,T),e.remove(),l.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:M,index:D,container:C},item:T}}));var i=f(l).placeholder,n=d(C.children,u.items).filter(function(t){return t!==i}),o=!0===this.isSortable?this:this.parentElement,r=d(o.children,c(o,"items")).filter(function(t){return t!==i}),s=_(T,Array.from(T.parentElement.children).filter(function(t){return t!==i})),a=_(T,r);M===s&&C===o||l.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:M,index:D,container:C,itemsBeforeUpdate:S,items:n},destination:{index:a,elementIndex:s,container:o,itemsBeforeUpdate:P,items:r},item:T}}))}});var n,o,r,s=(n=function(e,t,i){if(T)if(u.forcePlaceholderSize&&(f(e).placeholder.style.height=E+"px"),-1<Array.from(e.children).indexOf(t)){var n=x(t),o=_(f(e).placeholder,t.parentElement.children),r=_(t,t.parentElement.children);if(E<n){var s=n-E,a=v(t).top;if(o<r&&i<a)return;if(r<o&&a+n-s<i)return}void 0===T.oldDisplay&&(T.oldDisplay=T.style.display),"none"!==T.style.display&&(T.style.display="none");var l=!1;try{l=v(t).top+t.offsetHeight/2<=i}catch(t){l=o<r}l?b(t,f(e).placeholder):w(t,f(e).placeholder),Array.from(p.values()).filter(function(t){return void 0!==t.placeholder}).forEach(function(t){t.placeholder!==f(e).placeholder&&t.placeholder.remove()})}else{var h=Array.from(p.values()).filter(function(t){return void 0!==t.placeholder}).map(function(t){return t.placeholder});-1!==h.indexOf(t)||e!==t||d(t.children,u.items).length||(h.forEach(function(t){return t.remove()}),t.appendChild(f(e).placeholder))}},void 0===(o=u.debounce)&&(o=0),function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];clearTimeout(r),r=setTimeout(function(){n.apply(void 0,t)},o)}),a=function(t){var e=t.target,i=!0===e.isSortable?e:O(e);if(e=R(i,e),T&&k(i,T.parentElement)&&"true"!==c(i,"_disabled")){var n=c(i,"opts");parseInt(n.maxItems)&&d(i.children,c(i,"items")).length>=parseInt(n.maxItems)&&T.parentElement!==i||(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect=!0===f(i).getConfig("copy")?"copy":"move",s(i,e,t.pageY))}};m(e.concat(l),"dragover",a),m(e.concat(l),"dragenter",a)}),t)}$.destroy=function(t){r(t)},$.enable=function(t){j(t)},$.disable=function(t){var e,i,n;i=c(e=t,"opts"),n=h(d(e.children,i.items),i.handle),g(e,"aria-dropeffect","none"),c(e,"_disabled","true"),g(n,"draggable","false"),a(n,"mousedown")},e.exports=$},{}],11:[function(t,e,i){var n;n=function(at){"use strict";function n(t,m){function e(t){if(!(!0===X.data(Nt+"_intouch")||0<at(t.target).closest(m.excludedElements,X).length)){var e=t.originalEvent?t.originalEvent:t;if(!e.pointerType||"mouse"!=e.pointerType||0!=m.fallbackToMouseEvents){var i,n=e.touches,o=n?n[0]:e;return K=Tt,n?Q=n.length:!1!==m.preventDefaultEvents&&t.preventDefault(),G=q=B=null,W=1,Z=V=H=U=F=0,(r={})[lt]=M(lt),r[ht]=M(ht),r[ut]=M(ut),r[ct]=M(ct),Y=r,L(),E(0,o),!n||Q===m.fingers||m.fingers===Lt||_()?(tt=I(),2==Q&&(E(1,n[1]),H=V=P(J[0].start,J[1].start)),(m.swipeStatus||m.pinchStatus)&&(i=v(e,K))):i=!1,!1===i?(v(e,K=Dt),i):(m.hold&&(st=setTimeout(at.proxy(function(){X.trigger("hold",[e.target]),m.hold&&(i=m.hold.call(X,e,e.target))},this),m.longTapThreshold)),T(!0),null)}}var r}function i(t){var e,i,n,o,r,s,a,l,h=t.originalEvent?t.originalEvent:t;if(K!==Ct&&K!==Dt&&!k()){var u,c=h.touches,d=C(c?c[0]:h);if(et=I(),c&&(Q=c.length),m.hold&&clearTimeout(st),K=Et,2==Q&&(0==H?(E(1,c[1]),H=V=P(J[0].start,J[1].start)):(C(c[1]),V=P(J[0].end,J[1].end),J[0].end,J[1].end,G=W<1?pt:dt),W=(V/H*1).toFixed(2),Z=Math.abs(H-V)),Q===m.fingers||m.fingers===Lt||!c||_()){if(B=N(d.start,d.end),function(t,e){if(!1!==m.preventDefaultEvents)if(m.allowPageScroll===ft)t.preventDefault();else{var i=m.allowPageScroll===mt;switch(e){case lt:(m.swipeLeft&&i||!i&&m.allowPageScroll!=bt)&&t.preventDefault();break;case ht:(m.swipeRight&&i||!i&&m.allowPageScroll!=bt)&&t.preventDefault();break;case ut:(m.swipeUp&&i||!i&&m.allowPageScroll!=xt)&&t.preventDefault();break;case ct:(m.swipeDown&&i||!i&&m.allowPageScroll!=xt)&&t.preventDefault()}}}(t,q=N(d.last,d.end)),a=d.start,l=d.end,F=Math.round(Math.sqrt(Math.pow(l.x-a.x,2)+Math.pow(l.y-a.y,2))),U=S(),s=F,(r=B)!=ft&&(s=Math.max(s,D(r)),Y[r].distance=s),u=v(h,K),!m.triggerOnTouchEnd||m.triggerOnTouchLeave){var p=!0;if(m.triggerOnTouchLeave){var f={left:(o=(n=at(n=this)).offset()).left,right:o.left+n.outerWidth(),top:o.top,bottom:o.top+n.outerHeight()};e=d.end,i=f,p=e.x>i.left&&e.x<i.right&&e.y>i.top&&e.y<i.bottom}!m.triggerOnTouchEnd&&p?K=g(Et):m.triggerOnTouchLeave&&!p&&(K=g(Ct)),K!=Dt&&K!=Ct||v(h,K)}}else v(h,K=Dt);!1===u&&v(h,K=Dt)}}function n(t){var e,i=t.originalEvent?t.originalEvent:t,n=i.touches;if(n){if(n.length&&!k())return e=i,it=I(),nt=e.touches.length+1,!0;if(n.length&&k())return!0}return k()&&(Q=nt),et=I(),U=S(),h()||!l()?v(i,K=Dt):m.triggerOnTouchEnd||!1===m.triggerOnTouchEnd&&K===Et?(!1!==m.preventDefaultEvents&&!1!==t.cancelable&&t.preventDefault(),v(i,K=Ct)):!m.triggerOnTouchEnd&&w()?a(i,K=Ct,_t):K===Et&&v(i,K=Dt),T(!1),null}function o(){V=H=tt=et=Q=0,W=1,L(),T(!1)}function r(t){var e=t.originalEvent?t.originalEvent:t;m.triggerOnTouchLeave&&v(e,K=g(Ct))}function s(){X.unbind(O,e),X.unbind($,o),X.unbind(R,i),X.unbind(j,n),z&&X.unbind(z,r),T(!1)}function g(t){var e=t,i=u(),n=l(),o=h();return!i||o?e=Dt:!n||t!=Et||m.triggerOnTouchEnd&&!m.triggerOnTouchLeave?!n&&t==Ct&&m.triggerOnTouchLeave&&(e=Dt):e=Ct,e}function v(t,e){var i,n=t.touches;return(!(!d()||!p())||p())&&(i=a(t,e,gt)),(!(!c()||!_())||_())&&!1!==i&&(i=a(t,e,vt)),x()&&b()&&!1!==i?i=a(t,e,yt):U>m.longTapThreshold&&F<kt&&m.longTap&&!1!==i?i=a(t,e,wt):!(1!==Q&&Mt||!(isNaN(F)||F<m.threshold)||!w())&&!1!==i&&(i=a(t,e,_t)),e===Dt&&o(),e===Ct&&(n&&n.length||o()),i}function a(t,e,i){var n;if(i==gt){if(X.trigger("swipeStatus",[e,B||null,F||0,U||0,Q,J,q]),m.swipeStatus&&!1===(n=m.swipeStatus.call(X,t,e,B||null,F||0,U||0,Q,J,q)))return!1;if(e==Ct&&d()){if(clearTimeout(rt),clearTimeout(st),X.trigger("swipe",[B,F,U,Q,J,q]),m.swipe&&!1===(n=m.swipe.call(X,t,B,F,U,Q,J,q)))return!1;switch(B){case lt:X.trigger("swipeLeft",[B,F,U,Q,J,q]),m.swipeLeft&&(n=m.swipeLeft.call(X,t,B,F,U,Q,J,q));break;case ht:X.trigger("swipeRight",[B,F,U,Q,J,q]),m.swipeRight&&(n=m.swipeRight.call(X,t,B,F,U,Q,J,q));break;case ut:X.trigger("swipeUp",[B,F,U,Q,J,q]),m.swipeUp&&(n=m.swipeUp.call(X,t,B,F,U,Q,J,q));break;case ct:X.trigger("swipeDown",[B,F,U,Q,J,q]),m.swipeDown&&(n=m.swipeDown.call(X,t,B,F,U,Q,J,q))}}}if(i==vt){if(X.trigger("pinchStatus",[e,G||null,Z||0,U||0,Q,W,J]),m.pinchStatus&&!1===(n=m.pinchStatus.call(X,t,e,G||null,Z||0,U||0,Q,W,J)))return!1;if(e==Ct&&c())switch(G){case dt:X.trigger("pinchIn",[G||null,Z||0,U||0,Q,W,J]),m.pinchIn&&(n=m.pinchIn.call(X,t,G||null,Z||0,U||0,Q,W,J));break;case pt:X.trigger("pinchOut",[G||null,Z||0,U||0,Q,W,J]),m.pinchOut&&(n=m.pinchOut.call(X,t,G||null,Z||0,U||0,Q,W,J))}}return i==_t?e!==Dt&&e!==Ct||(clearTimeout(rt),clearTimeout(st),b()&&!x()?(ot=I(),rt=setTimeout(at.proxy(function(){ot=null,X.trigger("tap",[t.target]),m.tap&&(n=m.tap.call(X,t,t.target))},this),m.doubleTapThreshold)):(ot=null,X.trigger("tap",[t.target]),m.tap&&(n=m.tap.call(X,t,t.target)))):i==yt?e!==Dt&&e!==Ct||(clearTimeout(rt),clearTimeout(st),ot=null,X.trigger("doubletap",[t.target]),m.doubleTap&&(n=m.doubleTap.call(X,t,t.target))):i==wt&&(e!==Dt&&e!==Ct||(clearTimeout(rt),ot=null,X.trigger("longtap",[t.target]),m.longTap&&(n=m.longTap.call(X,t,t.target)))),n}function l(){var t=!0;return null!==m.threshold&&(t=F>=m.threshold),t}function h(){var t=!1;return null!==m.cancelThreshold&&null!==B&&(t=D(B)-F>=m.cancelThreshold),t}function u(){return!(m.maxTimeThreshold&&U>=m.maxTimeThreshold)}function c(){var t=f(),e=y(),i=null===m.pinchThreshold||Z>=m.pinchThreshold;return t&&e&&i}function _(){return!!(m.pinchStatus||m.pinchIn||m.pinchOut)}function d(){var t=u(),e=l(),i=f(),n=y();return!h()&&n&&i&&e&&t}function p(){return!!(m.swipe||m.swipeStatus||m.swipeLeft||m.swipeRight||m.swipeUp||m.swipeDown)}function f(){return Q===m.fingers||m.fingers===Lt||!Mt}function y(){return 0!==J[0].end.x}function w(){return!!m.tap}function b(){return!!m.doubleTap}function x(){if(null==ot)return!1;var t=I();return b()&&t-ot<=m.doubleTapThreshold}function L(){nt=it=0}function k(){var t=!1;it&&(I()-it<=m.fingerReleaseThreshold&&(t=!0));return t}function T(t){X&&(!0===t?(X.bind(R,i),X.bind(j,n),z&&X.bind(z,r)):(X.unbind(R,i,!1),X.unbind(j,n,!1),z&&X.unbind(z,r,!1)),X.data(Nt+"_intouch",!0===t))}function E(t,e){var i={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return i.start.x=i.last.x=i.end.x=e.pageX||e.clientX,i.start.y=i.last.y=i.end.y=e.pageY||e.clientY,J[t]=i}function C(t){var e=void 0!==t.identifier?t.identifier:0,i=J[e]||null;return null===i&&(i=E(e,t)),i.last.x=i.end.x,i.last.y=i.end.y,i.end.x=t.pageX||t.clientX,i.end.y=t.pageY||t.clientY,i}function D(t){if(Y[t])return Y[t].distance}function M(t){return{direction:t,distance:0}}function S(){return et-tt}function P(t,e){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return Math.round(Math.sqrt(i*i+n*n))}function N(t,e){if(n=e,(i=t).x==n.x&&i.y==n.y)return ft;var i,n,o,r,s,a,l,h,u=(r=e,s=(o=t).x-r.x,a=r.y-o.y,l=Math.atan2(a,s),(h=Math.round(180*l/Math.PI))<0&&(h=360-Math.abs(h)),h);return u<=45&&0<=u?lt:u<=360&&315<=u?lt:135<=u&&u<=225?ht:45<u&&u<135?ct:ut}function I(){return(new Date).getTime()}m=at.extend({},m);var A=Mt||Pt||!m.fallbackToMouseEvents,O=A?Pt?St?"MSPointerDown":"pointerdown":"touchstart":"mousedown",R=A?Pt?St?"MSPointerMove":"pointermove":"touchmove":"mousemove",j=A?Pt?St?"MSPointerUp":"pointerup":"touchend":"mouseup",z=A?Pt?"mouseleave":null:"mouseleave",$=Pt?St?"MSPointerCancel":"pointercancel":"touchcancel",F=0,B=null,q=null,U=0,H=0,V=0,W=1,Z=0,G=0,Y=null,X=at(t),K="start",Q=0,J={},tt=0,et=0,it=0,nt=0,ot=0,rt=null,st=null;try{X.bind(O,e),X.bind($,o)}catch(t){at.error("events not supported "+O+","+$+" on jQuery.swipe")}this.enable=function(){return this.disable(),X.bind(O,e),X.bind($,o),X},this.disable=function(){return s(),X},this.destroy=function(){s(),X.data(Nt,null),X=null},this.option=function(t,e){if("object"==typeof t)m=at.extend(m,t);else if(void 0!==m[t]){if(void 0===e)return m[t];m[t]=e}else{if(!t)return m;at.error("Option "+t+" does not exist on jQuery.swipe.options")}return null}}var lt="left",ht="right",ut="up",ct="down",dt="in",pt="out",ft="none",mt="auto",gt="swipe",vt="pinch",_t="tap",yt="doubletap",wt="longtap",bt="horizontal",xt="vertical",Lt="all",kt=10,Tt="start",Et="move",Ct="end",Dt="cancel",Mt="ontouchstart"in window,St=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!Mt,Pt=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!Mt,Nt="TouchSwipe";at.fn.swipe=function(t){var e=at(this),i=e.data(Nt);if(i&&"string"==typeof t){if(i[t])return i[t].apply(i,Array.prototype.slice.call(arguments,1));at.error("Method "+t+" does not exist on jQuery.swipe")}else if(i&&"object"==typeof t)i.option.apply(i,arguments);else if(!(i||"object"!=typeof t&&t))return function(i){return!i||void 0!==i.allowPageScroll||void 0===i.swipe&&void 0===i.swipeStatus||(i.allowPageScroll=ft),void 0!==i.click&&void 0===i.tap&&(i.tap=i.click),i||(i={}),i=at.extend({},at.fn.swipe.defaults,i),this.each(function(){var t=at(this),e=t.data(Nt);e||(e=new n(this,i),t.data(Nt,e))})}.apply(this,arguments);return e},at.fn.swipe.version="1.6.18",at.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0},at.fn.swipe.phases={PHASE_START:Tt,PHASE_MOVE:Et,PHASE_END:Ct,PHASE_CANCEL:Dt},at.fn.swipe.directions={LEFT:lt,RIGHT:ht,UP:ut,DOWN:ct,IN:dt,OUT:pt},at.fn.swipe.pageScroll={NONE:ft,HORIZONTAL:bt,VERTICAL:xt,AUTO:mt},at.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:Lt}},"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],n):n(void 0!==e&&e.exports?t("jquery"):jQuery)},{jquery:12}],12:[function(t,i,e){!function(t,e){"use strict";"object"==typeof i&&"object"==typeof i.exports?i.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(L,t){"use strict";var e=[],k=L.document,n=Object.getPrototypeOf,a=e.slice,m=e.concat,l=e.push,o=e.indexOf,i={},r=i.toString,g=i.hasOwnProperty,s=g.toString,h=s.call(Object),v={},_=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},y=function(t){return null!=t&&t===t.window},u={type:!0,src:!0,noModule:!0};function w(t,e,i){var n,o=(e=e||k).createElement("script");if(o.text=t,i)for(n in u)i[n]&&(o[n]=i[n]);e.head.appendChild(o).parentNode.removeChild(o)}function b(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?i[r.call(t)]||"object":typeof t}var T=function(t,e){return new T.fn.init(t,e)},c=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function d(t){var e=!!t&&"length"in t&&t.length,i=b(t);return!_(t)&&!y(t)&&("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t)}T.fn=T.prototype={jquery:"3.3.1",constructor:T,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=T.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return T.each(this,t)},map:function(i){return this.pushStack(T.map(this,function(t,e){return i.call(t,e,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(0<=i&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:e.sort,splice:e.splice},T.extend=T.fn.extend=function(){var t,e,i,n,o,r,s=arguments[0]||{},a=1,l=arguments.length,h=!1;for("boolean"==typeof s&&(h=s,s=arguments[a]||{},a++),"object"==typeof s||_(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=s[e],s!==(n=t[e])&&(h&&n&&(T.isPlainObject(n)||(o=Array.isArray(n)))?(o?(o=!1,r=i&&Array.isArray(i)?i:[]):r=i&&T.isPlainObject(i)?i:{},s[e]=T.extend(h,r,n)):void 0!==n&&(s[e]=n));return s},T.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==r.call(t))&&(!(e=n(t))||"function"==typeof(i=g.call(e,"constructor")&&e.constructor)&&s.call(i)===h)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){w(t)},each:function(t,e){var i,n=0;if(d(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(c,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(d(Object(t))?T.merge(i,"string"==typeof t?[t]:t):l.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:o.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;n<i;n++)t[o++]=e[n];return t.length=o,t},grep:function(t,e,i){for(var n=[],o=0,r=t.length,s=!i;o<r;o++)!e(t[o],o)!==s&&n.push(t[o]);return n},map:function(t,e,i){var n,o,r=0,s=[];if(d(t))for(n=t.length;r<n;r++)null!=(o=e(t[r],r,i))&&s.push(o);else for(r in t)null!=(o=e(t[r],r,i))&&s.push(o);return m.apply([],s)},guid:1,support:v}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=e[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){i["[object "+e+"]"]=e.toLowerCase()});var p=function(i){var t,p,w,r,o,f,c,m,b,l,h,x,L,s,k,g,a,u,v,T="sizzle"+1*new Date,_=i.document,E=0,n=0,d=st(),y=st(),C=st(),D=function(t,e){return t===e&&(h=!0),0},M={}.hasOwnProperty,e=[],S=e.pop,P=e.push,N=e.push,I=e.slice,A=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",z="\\["+R+"*("+j+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+R+"*\\]",$=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",F=new RegExp(R+"+","g"),B=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),q=new RegExp("^"+R+"*,"+R+"*"),U=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),H=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),V=new RegExp($),W=new RegExp("^"+j+"$"),Z={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),tt=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},nt=function(){x()},ot=_t(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{N.apply(e=I.call(_.childNodes),_.childNodes),e[_.childNodes.length].nodeType}catch(t){N={apply:e.length?function(t,e){P.apply(t,I.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function rt(t,e,i,n){var o,r,s,a,l,h,u,c=e&&e.ownerDocument,d=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return i;if(!n&&((e?e.ownerDocument||e:_)!==L&&x(e),e=e||L,k)){if(11!==d&&(l=K.exec(t)))if(o=l[1]){if(9===d){if(!(s=e.getElementById(o)))return i;if(s.id===o)return i.push(s),i}else if(c&&(s=c.getElementById(o))&&v(e,s)&&s.id===o)return i.push(s),i}else{if(l[2])return N.apply(i,e.getElementsByTagName(t)),i;if((o=l[3])&&p.getElementsByClassName&&e.getElementsByClassName)return N.apply(i,e.getElementsByClassName(o)),i}if(p.qsa&&!C[t+" "]&&(!g||!g.test(t))){if(1!==d)c=e,u=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(et,it):e.setAttribute("id",a=T),r=(h=f(t)).length;r--;)h[r]="#"+a+" "+vt(h[r]);u=h.join(","),c=Q.test(t)&&mt(e.parentNode)||e}if(u)try{return N.apply(i,c.querySelectorAll(u)),i}catch(t){}finally{a===T&&e.removeAttribute("id")}}}return m(t.replace(B,"$1"),e,i,n)}function st(){var n=[];return function t(e,i){return n.push(e+" ")>w.cacheLength&&delete t[n.shift()],t[e+" "]=i}}function at(t){return t[T]=!0,t}function lt(t){var e=L.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var i=t.split("|"),n=i.length;n--;)w.attrHandle[i[n]]=e}function ut(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function ct(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function dt(i){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===i}}function pt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ot(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ft(s){return at(function(r){return r=+r,at(function(t,e){for(var i,n=s([],t.length,r),o=n.length;o--;)t[i=n[o]]&&(t[i]=!(e[i]=t[i]))})})}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in p=rt.support={},o=rt.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},x=rt.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:_;return n!==L&&9===n.nodeType&&n.documentElement&&(s=(L=n).documentElement,k=!o(L),_!==L&&(i=L.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",nt,!1):i.attachEvent&&i.attachEvent("onunload",nt)),p.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),p.getElementsByTagName=lt(function(t){return t.appendChild(L.createComment("")),!t.getElementsByTagName("*").length}),p.getElementsByClassName=X.test(L.getElementsByClassName),p.getById=lt(function(t){return s.appendChild(t).id=T,!L.getElementsByName||!L.getElementsByName(T).length}),p.getById?(w.filter.ID=function(t){var e=t.replace(J,tt);return function(t){return t.getAttribute("id")===e}},w.find.ID=function(t,e){if(void 0!==e.getElementById&&k){var i=e.getElementById(t);return i?[i]:[]}}):(w.filter.ID=function(t){var i=t.replace(J,tt);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===i}},w.find.ID=function(t,e){if(void 0!==e.getElementById&&k){var i,n,o,r=e.getElementById(t);if(r){if((i=r.getAttributeNode("id"))&&i.value===t)return[r];for(o=e.getElementsByName(t),n=0;r=o[n++];)if((i=r.getAttributeNode("id"))&&i.value===t)return[r]}return[]}}),w.find.TAG=p.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):p.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},w.find.CLASS=p.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&k)return e.getElementsByClassName(t)},a=[],g=[],(p.qsa=X.test(L.querySelectorAll))&&(lt(function(t){s.appendChild(t).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+R+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+R+"*(?:value|"+O+")"),t.querySelectorAll("[id~="+T+"-]").length||g.push("~="),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+T+"+*").length||g.push(".#.+[+~]")}),lt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=L.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+R+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),s.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")})),(p.matchesSelector=X.test(u=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&lt(function(t){p.disconnectedMatch=u.call(t,"*"),u.call(t,"[s!='']:x"),a.push("!=",$)}),g=g.length&&new RegExp(g.join("|")),a=a.length&&new RegExp(a.join("|")),e=X.test(s.compareDocumentPosition),v=e||X.test(s.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},D=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!p.sortDetached&&e.compareDocumentPosition(t)===i?t===L||t.ownerDocument===_&&v(_,t)?-1:e===L||e.ownerDocument===_&&v(_,e)?1:l?A(l,t)-A(l,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var i,n=0,o=t.parentNode,r=e.parentNode,s=[t],a=[e];if(!o||!r)return t===L?-1:e===L?1:o?-1:r?1:l?A(l,t)-A(l,e):0;if(o===r)return ut(t,e);for(i=t;i=i.parentNode;)s.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;s[n]===a[n];)n++;return n?ut(s[n],a[n]):s[n]===_?-1:a[n]===_?1:0}),L},rt.matches=function(t,e){return rt(t,null,null,e)},rt.matchesSelector=function(t,e){if((t.ownerDocument||t)!==L&&x(t),e=e.replace(H,"='$1']"),p.matchesSelector&&k&&!C[e+" "]&&(!a||!a.test(e))&&(!g||!g.test(e)))try{var i=u.call(t,e);if(i||p.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return 0<rt(e,L,null,[t]).length},rt.contains=function(t,e){return(t.ownerDocument||t)!==L&&x(t),v(t,e)},rt.attr=function(t,e){(t.ownerDocument||t)!==L&&x(t);var i=w.attrHandle[e.toLowerCase()],n=i&&M.call(w.attrHandle,e.toLowerCase())?i(t,e,!k):void 0;return void 0!==n?n:p.attributes||!k?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},rt.escape=function(t){return(t+"").replace(et,it)},rt.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},rt.uniqueSort=function(t){var e,i=[],n=0,o=0;if(h=!p.detectDuplicates,l=!p.sortStable&&t.slice(0),t.sort(D),h){for(;e=t[o++];)e===t[o]&&(n=i.push(o));for(;n--;)t.splice(i[n],1)}return l=null,t},r=rt.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)i+=r(e);return i},(w=rt.selectors={cacheLength:50,createPseudo:at,match:Z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(J,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(J,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||rt.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&rt.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return Z.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&V.test(i)&&(e=f(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(J,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=d[t+" "];return e||(e=new RegExp("(^|"+R+")"+t+"("+R+"|$)"))&&d(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(i,n,o){return function(t){var e=rt.attr(t,i);return null==e?"!="===n:!n||(e+="","="===n?e===o:"!="===n?e!==o:"^="===n?o&&0===e.indexOf(o):"*="===n?o&&-1<e.indexOf(o):"$="===n?o&&e.slice(-o.length)===o:"~="===n?-1<(" "+e.replace(F," ")+" ").indexOf(o):"|="===n&&(e===o||e.slice(0,o.length+1)===o+"-"))}},CHILD:function(f,t,e,m,g){var v="nth"!==f.slice(0,3),_="last"!==f.slice(-4),y="of-type"===t;return 1===m&&0===g?function(t){return!!t.parentNode}:function(t,e,i){var n,o,r,s,a,l,h=v!==_?"nextSibling":"previousSibling",u=t.parentNode,c=y&&t.nodeName.toLowerCase(),d=!i&&!y,p=!1;if(u){if(v){for(;h;){for(s=t;s=s[h];)if(y?s.nodeName.toLowerCase()===c:1===s.nodeType)return!1;l=h="only"===f&&!l&&"nextSibling"}return!0}if(l=[_?u.firstChild:u.lastChild],_&&d){for(p=(a=(n=(o=(r=(s=u)[T]||(s[T]={}))[s.uniqueID]||(r[s.uniqueID]={}))[f]||[])[0]===E&&n[1])&&n[2],s=a&&u.childNodes[a];s=++a&&s&&s[h]||(p=a=0)||l.pop();)if(1===s.nodeType&&++p&&s===t){o[f]=[E,a,p];break}}else if(d&&(p=a=(n=(o=(r=(s=t)[T]||(s[T]={}))[s.uniqueID]||(r[s.uniqueID]={}))[f]||[])[0]===E&&n[1]),!1===p)for(;(s=++a&&s&&s[h]||(p=a=0)||l.pop())&&((y?s.nodeName.toLowerCase()!==c:1!==s.nodeType)||!++p||(d&&((o=(r=s[T]||(s[T]={}))[s.uniqueID]||(r[s.uniqueID]={}))[f]=[E,p]),s!==t)););return(p-=g)===m||p%m==0&&0<=p/m}}},PSEUDO:function(t,r){var e,s=w.pseudos[t]||w.setFilters[t.toLowerCase()]||rt.error("unsupported pseudo: "+t);return s[T]?s(r):1<s.length?(e=[t,t,"",r],w.setFilters.hasOwnProperty(t.toLowerCase())?at(function(t,e){for(var i,n=s(t,r),o=n.length;o--;)t[i=A(t,n[o])]=!(e[i]=n[o])}):function(t){return s(t,0,e)}):s}},pseudos:{not:at(function(t){var n=[],o=[],a=c(t.replace(B,"$1"));return a[T]?at(function(t,e,i,n){for(var o,r=a(t,null,n,[]),s=t.length;s--;)(o=r[s])&&(t[s]=!(e[s]=o))}):function(t,e,i){return n[0]=t,a(n,null,i,o),n[0]=null,!o.pop()}}),has:at(function(e){return function(t){return 0<rt(e,t).length}}),contains:at(function(e){return e=e.replace(J,tt),function(t){return-1<(t.textContent||t.innerText||r(t)).indexOf(e)}}),lang:at(function(i){return W.test(i||"")||rt.error("unsupported lang: "+i),i=i.replace(J,tt).toLowerCase(),function(t){var e;do{if(e=k?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===i||0===e.indexOf(i+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=i.location&&i.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===s},focus:function(t){return t===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:pt(!1),disabled:pt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return Y.test(t.nodeName)},input:function(t){return G.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ft(function(){return[0]}),last:ft(function(t,e){return[e-1]}),eq:ft(function(t,e,i){return[i<0?i+e:i]}),even:ft(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:ft(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:ft(function(t,e,i){for(var n=i<0?i+e:i;0<=--n;)t.push(n);return t}),gt:ft(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[t]=ct(t);for(t in{submit:!0,reset:!0})w.pseudos[t]=dt(t);function gt(){}function vt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function _t(a,t,e){var l=t.dir,h=t.next,u=h||l,c=e&&"parentNode"===u,d=n++;return t.first?function(t,e,i){for(;t=t[l];)if(1===t.nodeType||c)return a(t,e,i);return!1}:function(t,e,i){var n,o,r,s=[E,d];if(i){for(;t=t[l];)if((1===t.nodeType||c)&&a(t,e,i))return!0}else for(;t=t[l];)if(1===t.nodeType||c)if(o=(r=t[T]||(t[T]={}))[t.uniqueID]||(r[t.uniqueID]={}),h&&h===t.nodeName.toLowerCase())t=t[l]||t;else{if((n=o[u])&&n[0]===E&&n[1]===d)return s[2]=n[2];if((o[u]=s)[2]=a(t,e,i))return!0}return!1}}function yt(o){return 1<o.length?function(t,e,i){for(var n=o.length;n--;)if(!o[n](t,e,i))return!1;return!0}:o[0]}function wt(t,e,i,n,o){for(var r,s=[],a=0,l=t.length,h=null!=e;a<l;a++)(r=t[a])&&(i&&!i(r,n,o)||(s.push(r),h&&e.push(a)));return s}function bt(p,f,m,g,v,t){return g&&!g[T]&&(g=bt(g)),v&&!v[T]&&(v=bt(v,t)),at(function(t,e,i,n){var o,r,s,a=[],l=[],h=e.length,u=t||function(t,e,i){for(var n=0,o=e.length;n<o;n++)rt(t,e[n],i);return i}(f||"*",i.nodeType?[i]:i,[]),c=!p||!t&&f?u:wt(u,a,p,i,n),d=m?v||(t?p:h||g)?[]:e:c;if(m&&m(c,d,i,n),g)for(o=wt(d,l),g(o,[],i,n),r=o.length;r--;)(s=o[r])&&(d[l[r]]=!(c[l[r]]=s));if(t){if(v||p){if(v){for(o=[],r=d.length;r--;)(s=d[r])&&o.push(c[r]=s);v(null,d=[],o,n)}for(r=d.length;r--;)(s=d[r])&&-1<(o=v?A(t,s):a[r])&&(t[o]=!(e[o]=s))}}else d=wt(d===e?d.splice(h,d.length):d),v?v(null,e,d,n):N.apply(e,d)})}function xt(t){for(var o,e,i,n=t.length,r=w.relative[t[0].type],s=r||w.relative[" "],a=r?1:0,l=_t(function(t){return t===o},s,!0),h=_t(function(t){return-1<A(o,t)},s,!0),u=[function(t,e,i){var n=!r&&(i||e!==b)||((o=e).nodeType?l(t,e,i):h(t,e,i));return o=null,n}];a<n;a++)if(e=w.relative[t[a].type])u=[_t(yt(u),e)];else{if((e=w.filter[t[a].type].apply(null,t[a].matches))[T]){for(i=++a;i<n&&!w.relative[t[i].type];i++);return bt(1<a&&yt(u),1<a&&vt(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(B,"$1"),e,a<i&&xt(t.slice(a,i)),i<n&&xt(t=t.slice(i)),i<n&&vt(t))}u.push(e)}return yt(u)}return gt.prototype=w.filters=w.pseudos,w.setFilters=new gt,f=rt.tokenize=function(t,e){var i,n,o,r,s,a,l,h=y[t+" "];if(h)return e?0:h.slice(0);for(s=t,a=[],l=w.preFilter;s;){for(r in i&&!(n=q.exec(s))||(n&&(s=s.slice(n[0].length)||s),a.push(o=[])),i=!1,(n=U.exec(s))&&(i=n.shift(),o.push({value:i,type:n[0].replace(B," ")}),s=s.slice(i.length)),w.filter)!(n=Z[r].exec(s))||l[r]&&!(n=l[r](n))||(i=n.shift(),o.push({value:i,type:r,matches:n}),s=s.slice(i.length));if(!i)break}return e?s.length:s?rt.error(t):y(t,a).slice(0)},c=rt.compile=function(t,e){var i,g,v,_,y,n,o=[],r=[],s=C[t+" "];if(!s){for(e||(e=f(t)),i=e.length;i--;)(s=xt(e[i]))[T]?o.push(s):r.push(s);(s=C(t,(g=r,_=0<(v=o).length,y=0<g.length,n=function(t,e,i,n,o){var r,s,a,l=0,h="0",u=t&&[],c=[],d=b,p=t||y&&w.find.TAG("*",o),f=E+=null==d?1:Math.random()||.1,m=p.length;for(o&&(b=e===L||e||o);h!==m&&null!=(r=p[h]);h++){if(y&&r){for(s=0,e||r.ownerDocument===L||(x(r),i=!k);a=g[s++];)if(a(r,e||L,i)){n.push(r);break}o&&(E=f)}_&&((r=!a&&r)&&l--,t&&u.push(r))}if(l+=h,_&&h!==l){for(s=0;a=v[s++];)a(u,c,e,i);if(t){if(0<l)for(;h--;)u[h]||c[h]||(c[h]=S.call(n));c=wt(c)}N.apply(n,c),o&&!t&&0<c.length&&1<l+v.length&&rt.uniqueSort(n)}return o&&(E=f,b=d),u},_?at(n):n))).selector=t}return s},m=rt.select=function(t,e,i,n){var o,r,s,a,l,h="function"==typeof t&&t,u=!n&&f(t=h.selector||t);if(i=i||[],1===u.length){if(2<(r=u[0]=u[0].slice(0)).length&&"ID"===(s=r[0]).type&&9===e.nodeType&&k&&w.relative[r[1].type]){if(!(e=(w.find.ID(s.matches[0].replace(J,tt),e)||[])[0]))return i;h&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=Z.needsContext.test(t)?0:r.length;o--&&(s=r[o],!w.relative[a=s.type]);)if((l=w.find[a])&&(n=l(s.matches[0].replace(J,tt),Q.test(r[0].type)&&mt(e.parentNode)||e))){if(r.splice(o,1),!(t=n.length&&vt(r)))return N.apply(i,n),i;break}}return(h||c(t,u))(n,e,!k,i,!e||Q.test(t)&&mt(e.parentNode)||e),i},p.sortStable=T.split("").sort(D).join("")===T,p.detectDuplicates=!!h,x(),p.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(L.createElement("fieldset"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ht("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),p.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ht("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||ht(O,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),rt}(L);T.find=p,T.expr=p.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=p.uniqueSort,T.text=p.getText,T.isXMLDoc=p.isXML,T.contains=p.contains,T.escapeSelector=p.escape;var f=function(t,e,i){for(var n=[],o=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&T(t).is(i))break;n.push(t)}return n},x=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},E=T.expr.match.needsContext;function C(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(t,i,n){return _(i)?T.grep(t,function(t,e){return!!i.call(t,e,t)!==n}):i.nodeType?T.grep(t,function(t){return t===i!==n}):"string"!=typeof i?T.grep(t,function(t){return-1<o.call(i,t)!==n}):T.filter(i,t,n)}T.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?T.find.matchesSelector(n,t)?[n]:[]:T.find.matches(t,T.grep(e,function(t){return 1===t.nodeType}))},T.fn.extend({find:function(t){var e,i,n=this.length,o=this;if("string"!=typeof t)return this.pushStack(T(t).filter(function(){for(e=0;e<n;e++)if(T.contains(o[e],this))return!0}));for(i=this.pushStack([]),e=0;e<n;e++)T.find(t,o[e],i);return 1<n?T.uniqueSort(i):i},filter:function(t){return this.pushStack(M(this,t||[],!1))},not:function(t){return this.pushStack(M(this,t||[],!0))},is:function(t){return!!M(this,"string"==typeof t&&E.test(t)?T(t):t||[],!1).length}});var S,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(t,e,i){var n,o;if(!t)return this;if(i=i||S,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:P.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof T?e[0]:e,T.merge(this,T.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:k,!0)),D.test(n[1])&&T.isPlainObject(e))for(n in e)_(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(o=k.getElementById(n[2]))&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):_(t)?void 0!==i.ready?i.ready(t):t(T):T.makeArray(t,this)}).prototype=T.fn,S=T(k);var N=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function A(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}T.fn.extend({has:function(t){var e=T(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(T.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,o=this.length,r=[],s="string"!=typeof t&&T(t);if(!E.test(t))for(;n<o;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?-1<s.index(i):1===i.nodeType&&T.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(1<r.length?T.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?o.call(T(t),this[0]):o.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),T.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return f(t,"parentNode")},parentsUntil:function(t,e,i){return f(t,"parentNode",i)},next:function(t){return A(t,"nextSibling")},prev:function(t){return A(t,"previousSibling")},nextAll:function(t){return f(t,"nextSibling")},prevAll:function(t){return f(t,"previousSibling")},nextUntil:function(t,e,i){return f(t,"nextSibling",i)},prevUntil:function(t,e,i){return f(t,"previousSibling",i)},siblings:function(t){return x((t.parentNode||{}).firstChild,t)},children:function(t){return x(t.firstChild)},contents:function(t){return C(t,"iframe")?t.contentDocument:(C(t,"template")&&(t=t.content||t),T.merge([],t.childNodes))}},function(n,o){T.fn[n]=function(t,e){var i=T.map(this,o,t);return"Until"!==n.slice(-5)&&(e=t),e&&"string"==typeof e&&(i=T.filter(e,i)),1<this.length&&(I[n]||T.uniqueSort(i),N.test(n)&&i.reverse()),this.pushStack(i)}});var O=/[^\x20\t\r\n\f]+/g;function R(t){return t}function j(t){throw t}function z(t,e,i,n){var o;try{t&&_(o=t.promise)?o.call(t).done(e).fail(i):t&&_(o=t.then)?o.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}T.Callbacks=function(n){var t,i;n="string"==typeof n?(t=n,i={},T.each(t.match(O)||[],function(t,e){i[e]=!0}),i):T.extend({},n);var o,e,r,s,a=[],l=[],h=-1,u=function(){for(s=s||n.once,r=o=!0;l.length;h=-1)for(e=l.shift();++h<a.length;)!1===a[h].apply(e[0],e[1])&&n.stopOnFalse&&(h=a.length,e=!1);n.memory||(e=!1),o=!1,s&&(a=e?[]:"")},c={add:function(){return a&&(e&&!o&&(h=a.length-1,l.push(e)),function i(t){T.each(t,function(t,e){_(e)?n.unique&&c.has(e)||a.push(e):e&&e.length&&"string"!==b(e)&&i(e)})}(arguments),e&&!o&&u()),this},remove:function(){return T.each(arguments,function(t,e){for(var i;-1<(i=T.inArray(e,a,i));)a.splice(i,1),i<=h&&h--}),this},has:function(t){return t?-1<T.inArray(t,a):0<a.length},empty:function(){return a&&(a=[]),this},disable:function(){return s=l=[],a=e="",this},disabled:function(){return!a},lock:function(){return s=l=[],e||o||(a=e=""),this},locked:function(){return!!s},fireWith:function(t,e){return s||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),o||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},T.extend({Deferred:function(t){var r=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],o="pending",s={state:function(){return o},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var o=arguments;return T.Deferred(function(n){T.each(r,function(t,e){var i=_(o[e[4]])&&o[e[4]];a[e[1]](function(){var t=i&&i.apply(this,arguments);t&&_(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[e[0]+"With"](this,i?[t]:arguments)})}),o=null}).promise()},then:function(e,i,n){var l=0;function h(o,r,s,a){return function(){var i=this,n=arguments,t=function(){var t,e;if(!(o<l)){if((t=s.apply(i,n))===r.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,_(e)?a?e.call(t,h(l,r,R,a),h(l,r,j,a)):(l++,e.call(t,h(l,r,R,a),h(l,r,j,a),h(l,r,R,r.notifyWith))):(s!==R&&(i=void 0,n=[t]),(a||r.resolveWith)(i,n))}},e=a?t:function(){try{t()}catch(t){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(t,e.stackTrace),l<=o+1&&(s!==j&&(i=void 0,n=[t]),r.rejectWith(i,n))}};o?e():(T.Deferred.getStackHook&&(e.stackTrace=T.Deferred.getStackHook()),L.setTimeout(e))}}return T.Deferred(function(t){r[0][3].add(h(0,t,_(n)?n:R,t.notifyWith)),r[1][3].add(h(0,t,_(e)?e:R)),r[2][3].add(h(0,t,_(i)?i:j))}).promise()},promise:function(t){return null!=t?T.extend(t,s):s}},a={};return T.each(r,function(t,e){var i=e[2],n=e[5];s[e[1]]=i.add,n&&i.add(function(){o=n},r[3-t][2].disable,r[3-t][3].disable,r[0][2].lock,r[0][3].lock),i.add(e[3].fire),a[e[0]]=function(){return a[e[0]+"With"](this===a?void 0:this,arguments),this},a[e[0]+"With"]=i.fireWith}),s.promise(a),t&&t.call(a,a),a},when:function(t){var i=arguments.length,e=i,n=Array(e),o=a.call(arguments),r=T.Deferred(),s=function(e){return function(t){n[e]=this,o[e]=1<arguments.length?a.call(arguments):t,--i||r.resolveWith(n,o)}};if(i<=1&&(z(t,r.done(s(e)).resolve,r.reject,!i),"pending"===r.state()||_(o[e]&&o[e].then)))return r.then();for(;e--;)z(o[e],s(e),r.reject);return r.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,e){L.console&&L.console.warn&&t&&$.test(t.name)&&L.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},T.readyException=function(t){L.setTimeout(function(){throw t})};var F=T.Deferred();function B(){k.removeEventListener("DOMContentLoaded",B),L.removeEventListener("load",B),T.ready()}T.fn.ready=function(t){return F.then(t).catch(function(t){T.readyException(t)}),this},T.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--T.readyWait:T.isReady)||(T.isReady=!0)!==t&&0<--T.readyWait||F.resolveWith(k,[T])}}),T.ready.then=F.then,"complete"===k.readyState||"loading"!==k.readyState&&!k.documentElement.doScroll?L.setTimeout(T.ready):(k.addEventListener("DOMContentLoaded",B),L.addEventListener("load",B));var q=function(t,e,i,n,o,r,s){var a=0,l=t.length,h=null==i;if("object"===b(i))for(a in o=!0,i)q(t,e,a,i[a],!0,r,s);else if(void 0!==n&&(o=!0,_(n)||(s=!0),h&&(s?(e.call(t,n),e=null):(h=e,e=function(t,e,i){return h.call(T(t),i)})),e))for(;a<l;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return o?t:h?e.call(t):l?e(t[0],i):r},U=/^-ms-/,H=/-([a-z])/g;function V(t,e){return e.toUpperCase()}function W(t){return t.replace(U,"ms-").replace(H,V)}var Z=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function G(){this.expando=T.expando+G.uid++}G.uid=1,G.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Z(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,o=this.cache(t);if("string"==typeof e)o[W(e)]=i;else for(n in e)o[W(n)]=e[n];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][W(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(W):(e=W(e))in n?[e]:e.match(O)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||T.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var Y=new G,X=new G,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function J(t,e,i){var n,o;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(Q,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===(o=i)||"false"!==o&&("null"===o?null:o===+o+""?+o:K.test(o)?JSON.parse(o):o)}catch(t){}X.set(t,e,i)}else i=void 0;return i}T.extend({hasData:function(t){return X.hasData(t)||Y.hasData(t)},data:function(t,e,i){return X.access(t,e,i)},removeData:function(t,e){X.remove(t,e)},_data:function(t,e,i){return Y.access(t,e,i)},_removeData:function(t,e){Y.remove(t,e)}}),T.fn.extend({data:function(i,t){var e,n,o,r=this[0],s=r&&r.attributes;if(void 0===i){if(this.length&&(o=X.get(r),1===r.nodeType&&!Y.get(r,"hasDataAttrs"))){for(e=s.length;e--;)s[e]&&0===(n=s[e].name).indexOf("data-")&&(n=W(n.slice(5)),J(r,n,o[n]));Y.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof i?this.each(function(){X.set(this,i)}):q(this,function(t){var e;if(r&&void 0===t)return void 0!==(e=X.get(r,i))?e:void 0!==(e=J(r,i))?e:void 0;this.each(function(){X.set(this,i,t)})},null,t,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){X.remove(this,t)})}}),T.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=Y.get(t,e),i&&(!n||Array.isArray(i)?n=Y.access(t,e,T.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=T.queue(t,e),n=i.length,o=i.shift(),r=T._queueHooks(t,e);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete r.stop,o.call(t,function(){T.dequeue(t,e)},r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Y.get(t,i)||Y.access(t,i,{empty:T.Callbacks("once memory").add(function(){Y.remove(t,[e+"queue",i])})})}}),T.fn.extend({queue:function(e,i){var t=2;return"string"!=typeof e&&(i=e,e="fx",t--),arguments.length<t?T.queue(this[0],e):void 0===i?this:this.each(function(){var t=T.queue(this,e,i);T._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&T.dequeue(this,e)})},dequeue:function(t){return this.each(function(){T.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,o=T.Deferred(),r=this,s=this.length,a=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(i=Y.get(r[s],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),it=["Top","Right","Bottom","Left"],nt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&T.contains(t.ownerDocument,t)&&"none"===T.css(t,"display")},ot=function(t,e,i,n){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];for(r in o=i.apply(t,n||[]),e)t.style[r]=s[r];return o};function rt(t,e,i,n){var o,r,s=20,a=n?function(){return n.cur()}:function(){return T.css(t,e,"")},l=a(),h=i&&i[3]||(T.cssNumber[e]?"":"px"),u=(T.cssNumber[e]||"px"!==h&&+l)&&et.exec(T.css(t,e));if(u&&u[3]!==h){for(l/=2,h=h||u[3],u=+l||1;s--;)T.style(t,e,u+h),(1-r)*(1-(r=a()/l||.5))<=0&&(s=0),u/=r;u*=2,T.style(t,e,u+h),i=i||[]}return i&&(u=+u||+l||0,o=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=h,n.start=u,n.end=o)),o}var st={};function at(t,e){for(var i,n,o,r,s,a,l,h=[],u=0,c=t.length;u<c;u++)(n=t[u]).style&&(i=n.style.display,e?("none"===i&&(h[u]=Y.get(n,"display")||null,h[u]||(n.style.display="")),""===n.style.display&&nt(n)&&(h[u]=(l=s=r=void 0,s=(o=n).ownerDocument,a=o.nodeName,(l=st[a])||(r=s.body.appendChild(s.createElement(a)),l=T.css(r,"display"),r.parentNode.removeChild(r),"none"===l&&(l="block"),st[a]=l)))):"none"!==i&&(h[u]="none",Y.set(n,"display",i)));for(u=0;u<c;u++)null!=h[u]&&(t[u].style.display=h[u]);return t}T.fn.extend({show:function(){return at(this,!0)},hide:function(){return at(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){nt(this)?T(this).show():T(this).hide()})}});var lt=/^(?:checkbox|radio)$/i,ht=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ut=/^$|^module$|\/(?:java|ecma)script/i,ct={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function dt(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&C(t,e)?T.merge([t],i):i}function pt(t,e){for(var i=0,n=t.length;i<n;i++)Y.set(t[i],"globalEval",!e||Y.get(e[i],"globalEval"))}ct.optgroup=ct.option,ct.tbody=ct.tfoot=ct.colgroup=ct.caption=ct.thead,ct.th=ct.td;var ft,mt,gt=/<|&#?\w+;/;function vt(t,e,i,n,o){for(var r,s,a,l,h,u,c=e.createDocumentFragment(),d=[],p=0,f=t.length;p<f;p++)if((r=t[p])||0===r)if("object"===b(r))T.merge(d,r.nodeType?[r]:r);else if(gt.test(r)){for(s=s||c.appendChild(e.createElement("div")),a=(ht.exec(r)||["",""])[1].toLowerCase(),l=ct[a]||ct._default,s.innerHTML=l[1]+T.htmlPrefilter(r)+l[2],u=l[0];u--;)s=s.lastChild;T.merge(d,s.childNodes),(s=c.firstChild).textContent=""}else d.push(e.createTextNode(r));for(c.textContent="",p=0;r=d[p++];)if(n&&-1<T.inArray(r,n))o&&o.push(r);else if(h=T.contains(r.ownerDocument,r),s=dt(c.appendChild(r),"script"),h&&pt(s),i)for(u=0;r=s[u++];)ut.test(r.type||"")&&i.push(r);return c}ft=k.createDocumentFragment().appendChild(k.createElement("div")),(mt=k.createElement("input")).setAttribute("type","radio"),mt.setAttribute("checked","checked"),mt.setAttribute("name","t"),ft.appendChild(mt),v.checkClone=ft.cloneNode(!0).cloneNode(!0).lastChild.checked,ft.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!ft.cloneNode(!0).lastChild.defaultValue;var _t=k.documentElement,yt=/^key/,wt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,bt=/^([^.]*)(?:\.(.+)|)/;function xt(){return!0}function Lt(){return!1}function kt(){try{return k.activeElement}catch(t){}}function Tt(t,e,i,n,o,r){var s,a;if("object"==typeof e){for(a in"string"!=typeof i&&(n=n||i,i=void 0),e)Tt(t,a,i,n,e[a],r);return t}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=Lt;else if(!o)return t;return 1===r&&(s=o,(o=function(t){return T().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=T.guid++)),t.each(function(){T.event.add(this,e,o,n,i)})}T.event={global:{},add:function(e,t,i,n,o){var r,s,a,l,h,u,c,d,p,f,m,g=Y.get(e);if(g)for(i.handler&&(i=(r=i).handler,o=r.selector),o&&T.find.matchesSelector(_t,o),i.guid||(i.guid=T.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(t){return void 0!==T&&T.event.triggered!==t.type?T.event.dispatch.apply(e,arguments):void 0}),h=(t=(t||"").match(O)||[""]).length;h--;)p=m=(a=bt.exec(t[h])||[])[1],f=(a[2]||"").split(".").sort(),p&&(c=T.event.special[p]||{},p=(o?c.delegateType:c.bindType)||p,c=T.event.special[p]||{},u=T.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&T.expr.match.needsContext.test(o),namespace:f.join(".")},r),(d=l[p])||((d=l[p]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,n,f,s)||e.addEventListener&&e.addEventListener(p,s)),c.add&&(c.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),o?d.splice(d.delegateCount++,0,u):d.push(u),T.event.global[p]=!0)},remove:function(t,e,i,n,o){var r,s,a,l,h,u,c,d,p,f,m,g=Y.hasData(t)&&Y.get(t);if(g&&(l=g.events)){for(h=(e=(e||"").match(O)||[""]).length;h--;)if(p=m=(a=bt.exec(e[h])||[])[1],f=(a[2]||"").split(".").sort(),p){for(c=T.event.special[p]||{},d=l[p=(n?c.delegateType:c.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)u=d[r],!o&&m!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(d.splice(r,1),u.selector&&d.delegateCount--,c.remove&&c.remove.call(t,u));s&&!d.length&&(c.teardown&&!1!==c.teardown.call(t,f,g.handle)||T.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)T.event.remove(t,p+e[h],i,n,!0);T.isEmptyObject(l)&&Y.remove(t,"handle events")}},dispatch:function(t){var e,i,n,o,r,s,a=T.event.fix(t),l=new Array(arguments.length),h=(Y.get(this,"events")||{})[a.type]||[],u=T.event.special[a.type]||{};for(l[0]=a,e=1;e<arguments.length;e++)l[e]=arguments[e];if(a.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,a)){for(s=T.event.handlers.call(this,a,h),e=0;(o=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=o.elem,i=0;(r=o.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(r.namespace)||(a.handleObj=r,a.data=r.data,void 0!==(n=((T.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l))&&!1===(a.result=n)&&(a.preventDefault(),a.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,a),a.result}},handlers:function(t,e){var i,n,o,r,s,a=[],l=e.delegateCount,h=t.target;if(l&&h.nodeType&&!("click"===t.type&&1<=t.button))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(r=[],s={},i=0;i<l;i++)void 0===s[o=(n=e[i]).selector+" "]&&(s[o]=n.needsContext?-1<T(o,this).index(h):T.find(o,this,null,[h]).length),s[o]&&r.push(n);r.length&&a.push({elem:h,handlers:r})}return h=this,l<e.length&&a.push({elem:h,handlers:e.slice(l)}),a},addProp:function(e,t){Object.defineProperty(T.Event.prototype,e,{enumerable:!0,configurable:!0,get:_(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==kt()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===kt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&C(this,"input"))return this.click(),!1},_default:function(t){return C(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},T.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},T.Event=function(t,e){if(!(this instanceof T.Event))return new T.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?xt:Lt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&T.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Lt,isPropagationStopped:Lt,isImmediatePropagationStopped:Lt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=xt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=xt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=xt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&yt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&wt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},T.event.addProp),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){T.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,i=t.relatedTarget,n=t.handleObj;return i&&(i===this||T.contains(this,i))||(t.type=n.origType,e=n.handler.apply(this,arguments),t.type=o),e}}}),T.fn.extend({on:function(t,e,i,n){return Tt(this,t,e,i,n)},one:function(t,e,i,n){return Tt(this,t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,T(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=Lt),this.each(function(){T.event.remove(this,t,i,e)})}});var Et=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ct=/<script|<style|<link/i,Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,Mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function St(t,e){return C(t,"table")&&C(11!==e.nodeType?e:e.firstChild,"tr")&&T(t).children("tbody")[0]||t}function Pt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Nt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function It(t,e){var i,n,o,r,s,a,l,h;if(1===e.nodeType){if(Y.hasData(t)&&(r=Y.access(t),s=Y.set(e,r),h=r.events))for(o in delete s.handle,s.events={},h)for(i=0,n=h[o].length;i<n;i++)T.event.add(e,o,h[o][i]);X.hasData(t)&&(a=X.access(t),l=T.extend({},a),X.set(e,l))}}function At(i,n,o,r){n=m.apply([],n);var t,e,s,a,l,h,u=0,c=i.length,d=c-1,p=n[0],f=_(p);if(f||1<c&&"string"==typeof p&&!v.checkClone&&Dt.test(p))return i.each(function(t){var e=i.eq(t);f&&(n[0]=p.call(this,t,e.html())),At(e,n,o,r)});if(c&&(e=(t=vt(n,i[0].ownerDocument,!1,i,r)).firstChild,1===t.childNodes.length&&(t=e),e||r)){for(a=(s=T.map(dt(t,"script"),Pt)).length;u<c;u++)l=t,u!==d&&(l=T.clone(l,!0,!0),a&&T.merge(s,dt(l,"script"))),o.call(i[u],l,u);if(a)for(h=s[s.length-1].ownerDocument,T.map(s,Nt),u=0;u<a;u++)l=s[u],ut.test(l.type||"")&&!Y.access(l,"globalEval")&&T.contains(h,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?T._evalUrl&&T._evalUrl(l.src):w(l.textContent.replace(Mt,""),h,l))}return i}function Ot(t,e,i){for(var n,o=e?T.filter(e,t):t,r=0;null!=(n=o[r]);r++)i||1!==n.nodeType||T.cleanData(dt(n)),n.parentNode&&(i&&T.contains(n.ownerDocument,n)&&pt(dt(n,"script")),n.parentNode.removeChild(n));return t}T.extend({htmlPrefilter:function(t){return t.replace(Et,"<$1></$2>")},clone:function(t,e,i){var n,o,r,s,a,l,h,u=t.cloneNode(!0),c=T.contains(t.ownerDocument,t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||T.isXMLDoc(t)))for(s=dt(u),n=0,o=(r=dt(t)).length;n<o;n++)a=r[n],l=s[n],void 0,"input"===(h=l.nodeName.toLowerCase())&&lt.test(a.type)?l.checked=a.checked:"input"!==h&&"textarea"!==h||(l.defaultValue=a.defaultValue);if(e)if(i)for(r=r||dt(t),s=s||dt(u),n=0,o=r.length;n<o;n++)It(r[n],s[n]);else It(t,u);return 0<(s=dt(u,"script")).length&&pt(s,!c&&dt(t,"script")),u},cleanData:function(t){for(var e,i,n,o=T.event.special,r=0;void 0!==(i=t[r]);r++)if(Z(i)){if(e=i[Y.expando]){if(e.events)for(n in e.events)o[n]?T.event.remove(i,n):T.removeEvent(i,n,e.handle);i[Y.expando]=void 0}i[X.expando]&&(i[X.expando]=void 0)}}}),T.fn.extend({detach:function(t){return Ot(this,t,!0)},remove:function(t){return Ot(this,t)},text:function(t){return q(this,function(t){return void 0===t?T.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return At(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||St(this,t).appendChild(t)})},prepend:function(){return At(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=St(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return At(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return At(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(T.cleanData(dt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return T.clone(this,t,e)})},html:function(t){return q(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ct.test(t)&&!ct[(ht.exec(t)||["",""])[1].toLowerCase()]){t=T.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(T.cleanData(dt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var i=[];return At(this,arguments,function(t){var e=this.parentNode;T.inArray(this,i)<0&&(T.cleanData(dt(this)),e&&e.replaceChild(t,this))},i)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,s){T.fn[t]=function(t){for(var e,i=[],n=T(t),o=n.length-1,r=0;r<=o;r++)e=r===o?this:this.clone(!0),T(n[r])[s](e),l.apply(i,e.get());return this.pushStack(i)}});var Rt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),jt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=L),e.getComputedStyle(t)},zt=new RegExp(it.join("|"),"i");function $t(t,e,i){var n,o,r,s,a=t.style;return(i=i||jt(t))&&(""!==(s=i.getPropertyValue(e)||i[e])||T.contains(t.ownerDocument,t)||(s=T.style(t,e)),!v.pixelBoxStyles()&&Rt.test(s)&&zt.test(e)&&(n=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function Ft(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){a.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",_t.appendChild(a).appendChild(l);var t=L.getComputedStyle(l);i="1%"!==t.top,s=12===e(t.marginLeft),l.style.right="60%",r=36===e(t.right),n=36===e(t.width),l.style.position="absolute",o=36===l.offsetWidth||"absolute",_t.removeChild(a),l=null}}function e(t){return Math.round(parseFloat(t))}var i,n,o,r,s,a=k.createElement("div"),l=k.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===l.style.backgroundClip,T.extend(v,{boxSizingReliable:function(){return t(),n},pixelBoxStyles:function(){return t(),r},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),s},scrollboxSize:function(){return t(),o}}))}();var Bt=/^(none|table(?!-c[ea]).+)/,qt=/^--/,Ut={position:"absolute",visibility:"hidden",display:"block"},Ht={letterSpacing:"0",fontWeight:"400"},Vt=["Webkit","Moz","ms"],Wt=k.createElement("div").style;function Zt(t){var e=T.cssProps[t];return e||(e=T.cssProps[t]=function(t){if(t in Wt)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=Vt.length;i--;)if((t=Vt[i]+e)in Wt)return t}(t)||t),e}function Gt(t,e,i){var n=et.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function Yt(t,e,i,n,o,r){var s="width"===e?1:0,a=0,l=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(l+=T.css(t,i+it[s],!0,o)),n?("content"===i&&(l-=T.css(t,"padding"+it[s],!0,o)),"margin"!==i&&(l-=T.css(t,"border"+it[s]+"Width",!0,o))):(l+=T.css(t,"padding"+it[s],!0,o),"padding"!==i?l+=T.css(t,"border"+it[s]+"Width",!0,o):a+=T.css(t,"border"+it[s]+"Width",!0,o));return!n&&0<=r&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-a-.5))),l}function Xt(t,e,i){var n=jt(t),o=$t(t,e,n),r="border-box"===T.css(t,"boxSizing",!1,n),s=r;if(Rt.test(o)){if(!i)return o;o="auto"}return s=s&&(v.boxSizingReliable()||o===t.style[e]),("auto"===o||!parseFloat(o)&&"inline"===T.css(t,"display",!1,n))&&(o=t["offset"+e[0].toUpperCase()+e.slice(1)],s=!0),(o=parseFloat(o)||0)+Yt(t,e,i||(r?"border":"content"),s,n,o)+"px"}function Kt(t,e,i,n,o){return new Kt.prototype.init(t,e,i,n,o)}T.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=$t(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=W(e),l=qt.test(e),h=t.style;if(l||(e=Zt(a)),s=T.cssHooks[e]||T.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(o=s.get(t,!1,n))?o:h[e];"string"===(r=typeof i)&&(o=et.exec(i))&&o[1]&&(i=rt(t,e,o),r="number"),null!=i&&i==i&&("number"===r&&(i+=o&&o[3]||(T.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,n))||(l?h.setProperty(e,i):h[e]=i))}},css:function(t,e,i,n){var o,r,s,a=W(e);return qt.test(e)||(e=Zt(a)),(s=T.cssHooks[e]||T.cssHooks[a])&&"get"in s&&(o=s.get(t,!0,i)),void 0===o&&(o=$t(t,e,n)),"normal"===o&&e in Ht&&(o=Ht[e]),""===i||i?(r=parseFloat(o),!0===i||isFinite(r)?r||0:o):o}}),T.each(["height","width"],function(t,a){T.cssHooks[a]={get:function(t,e,i){if(e)return!Bt.test(T.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Xt(t,a,i):ot(t,Ut,function(){return Xt(t,a,i)})},set:function(t,e,i){var n,o=jt(t),r="border-box"===T.css(t,"boxSizing",!1,o),s=i&&Yt(t,a,i,r,o);return r&&v.scrollboxSize()===o.position&&(s-=Math.ceil(t["offset"+a[0].toUpperCase()+a.slice(1)]-parseFloat(o[a])-Yt(t,a,"border",!1,o)-.5)),s&&(n=et.exec(e))&&"px"!==(n[3]||"px")&&(t.style[a]=e,e=T.css(t,a)),Gt(0,e,s)}}}),T.cssHooks.marginLeft=Ft(v.reliableMarginLeft,function(t,e){if(e)return(parseFloat($t(t,"marginLeft"))||t.getBoundingClientRect().left-ot(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(o,r){T.cssHooks[o+r]={expand:function(t){for(var e=0,i={},n="string"==typeof t?t.split(" "):[t];e<4;e++)i[o+it[e]+r]=n[e]||n[e-2]||n[0];return i}},"margin"!==o&&(T.cssHooks[o+r].set=Gt)}),T.fn.extend({css:function(t,e){return q(this,function(t,e,i){var n,o,r={},s=0;if(Array.isArray(e)){for(n=jt(t),o=e.length;s<o;s++)r[e[s]]=T.css(t,e[s],!1,n);return r}return void 0!==i?T.style(t,e,i):T.css(t,e)},t,e,1<arguments.length)}}),((T.Tween=Kt).prototype={constructor:Kt,init:function(t,e,i,n,o,r){this.elem=t,this.prop=i,this.easing=o||T.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(T.cssNumber[i]?"":"px")},cur:function(){var t=Kt.propHooks[this.prop];return t&&t.get?t.get(this):Kt.propHooks._default.get(this)},run:function(t){var e,i=Kt.propHooks[this.prop];return this.options.duration?this.pos=e=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Kt.propHooks._default.set(this),this}}).init.prototype=Kt.prototype,(Kt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=T.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){T.fx.step[t.prop]?T.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[T.cssProps[t.prop]]&&!T.cssHooks[t.prop]?t.elem[t.prop]=t.now:T.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=Kt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},T.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},T.fx=Kt.prototype.init,T.fx.step={};var Qt,Jt,te,ee,ie=/^(?:toggle|show|hide)$/,ne=/queueHooks$/;function oe(){Jt&&(!1===k.hidden&&L.requestAnimationFrame?L.requestAnimationFrame(oe):L.setTimeout(oe,T.fx.interval),T.fx.tick())}function re(){return L.setTimeout(function(){Qt=void 0}),Qt=Date.now()}function se(t,e){var i,n=0,o={height:t};for(e=e?1:0;n<4;n+=2-e)o["margin"+(i=it[n])]=o["padding"+i]=t;return e&&(o.opacity=o.width=t),o}function ae(t,e,i){for(var n,o=(le.tweeners[e]||[]).concat(le.tweeners["*"]),r=0,s=o.length;r<s;r++)if(n=o[r].call(i,e,t))return n}function le(r,t,e){var i,s,n=0,o=le.prefilters.length,a=T.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=Qt||re(),e=Math.max(0,h.startTime+h.duration-t),i=1-(e/h.duration||0),n=0,o=h.tweens.length;n<o;n++)h.tweens[n].run(i);return a.notifyWith(r,[h,i,e]),i<1&&o?e:(o||a.notifyWith(r,[h,1,0]),a.resolveWith(r,[h]),!1)},h=a.promise({elem:r,props:T.extend({},t),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},e),originalProperties:t,originalOptions:e,startTime:Qt||re(),duration:e.duration,tweens:[],createTween:function(t,e){var i=T.Tween(r,h.opts,t,e,h.opts.specialEasing[t]||h.opts.easing);return h.tweens.push(i),i},stop:function(t){var e=0,i=t?h.tweens.length:0;if(s)return this;for(s=!0;e<i;e++)h.tweens[e].run(1);return t?(a.notifyWith(r,[h,1,0]),a.resolveWith(r,[h,t])):a.rejectWith(r,[h,t]),this}}),u=h.props;for(!function(t,e){var i,n,o,r,s;for(i in t)if(o=e[n=W(i)],r=t[i],Array.isArray(r)&&(o=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),(s=T.cssHooks[n])&&"expand"in s)for(i in r=s.expand(r),delete t[n],r)i in t||(t[i]=r[i],e[i]=o);else e[n]=o}(u,h.opts.specialEasing);n<o;n++)if(i=le.prefilters[n].call(h,r,u,h.opts))return _(i.stop)&&(T._queueHooks(h.elem,h.opts.queue).stop=i.stop.bind(i)),i;return T.map(u,ae,h),_(h.opts.start)&&h.opts.start.call(r,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),T.fx.timer(T.extend(l,{elem:r,anim:h,queue:h.opts.queue})),h}T.Animation=T.extend(le,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return rt(i.elem,t,et.exec(e),i),i}]},tweener:function(t,e){_(t)?(e=t,t=["*"]):t=t.match(O);for(var i,n=0,o=t.length;n<o;n++)i=t[n],le.tweeners[i]=le.tweeners[i]||[],le.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,o,r,s,a,l,h,u,c="width"in e||"height"in e,d=this,p={},f=t.style,m=t.nodeType&&nt(t),g=Y.get(t,"fxshow");for(n in i.queue||(null==(s=T._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,T.queue(t,"fx").length||s.empty.fire()})})),e)if(o=e[n],ie.test(o)){if(delete e[n],r=r||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||void 0===g[n])continue;m=!0}p[n]=g&&g[n]||T.style(t,n)}if((l=!T.isEmptyObject(e))||!T.isEmptyObject(p))for(n in c&&1===t.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(h=g&&g.display)&&(h=Y.get(t,"display")),"none"===(u=T.css(t,"display"))&&(h?u=h:(at([t],!0),h=t.style.display||h,u=T.css(t,"display"),at([t]))),("inline"===u||"inline-block"===u&&null!=h)&&"none"===T.css(t,"float")&&(l||(d.done(function(){f.display=h}),null==h&&(u=f.display,h="none"===u?"":u)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]})),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=Y.access(t,"fxshow",{display:h}),r&&(g.hidden=!m),m&&at([t],!0),d.done(function(){for(n in m||at([t]),Y.remove(t,"fxshow"),p)T.style(t,n,p[n])})),l=ae(m?g[n]:0,n,d),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?le.prefilters.unshift(t):le.prefilters.push(t)}}),T.speed=function(t,e,i){var n=t&&"object"==typeof t?T.extend({},t):{complete:i||!i&&e||_(t)&&t,duration:t,easing:i&&e||e&&!_(e)&&e};return T.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in T.fx.speeds?n.duration=T.fx.speeds[n.duration]:n.duration=T.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){_(n.old)&&n.old.call(this),n.queue&&T.dequeue(this,n.queue)},n},T.fn.extend({fadeTo:function(t,e,i,n){return this.filter(nt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(e,t,i,n){var o=T.isEmptyObject(e),r=T.speed(t,i,n),s=function(){var t=le(this,T.extend({},e),r);(o||Y.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(o,t,r){var s=function(t){var e=t.stop;delete t.stop,e(r)};return"string"!=typeof o&&(r=t,t=o,o=void 0),t&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){var t=!0,e=null!=o&&o+"queueHooks",i=T.timers,n=Y.get(this);if(e)n[e]&&n[e].stop&&s(n[e]);else for(e in n)n[e]&&n[e].stop&&ne.test(e)&&s(n[e]);for(e=i.length;e--;)i[e].elem!==this||null!=o&&i[e].queue!==o||(i[e].anim.stop(r),t=!1,i.splice(e,1));!t&&r||T.dequeue(this,o)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var t,e=Y.get(this),i=e[s+"queue"],n=e[s+"queueHooks"],o=T.timers,r=i?i.length:0;for(e.finish=!0,T.queue(this,s,[]),n&&n.stop&&n.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===s&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<r;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete e.finish})}}),T.each(["toggle","show","hide"],function(t,n){var o=T.fn[n];T.fn[n]=function(t,e,i){return null==t||"boolean"==typeof t?o.apply(this,arguments):this.animate(se(n,!0),t,e,i)}}),T.each({slideDown:se("show"),slideUp:se("hide"),slideToggle:se("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){T.fn[t]=function(t,e,i){return this.animate(n,t,e,i)}}),T.timers=[],T.fx.tick=function(){var t,e=0,i=T.timers;for(Qt=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||T.fx.stop(),Qt=void 0},T.fx.timer=function(t){T.timers.push(t),T.fx.start()},T.fx.interval=13,T.fx.start=function(){Jt||(Jt=!0,oe())},T.fx.stop=function(){Jt=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(n,t){return n=T.fx&&T.fx.speeds[n]||n,t=t||"fx",this.queue(t,function(t,e){var i=L.setTimeout(t,n);e.stop=function(){L.clearTimeout(i)}})},te=k.createElement("input"),ee=k.createElement("select").appendChild(k.createElement("option")),te.type="checkbox",v.checkOn=""!==te.value,v.optSelected=ee.selected,(te=k.createElement("input")).value="t",te.type="radio",v.radioValue="t"===te.value;var he,ue=T.expr.attrHandle;T.fn.extend({attr:function(t,e){return q(this,T.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){T.removeAttr(this,t)})}}),T.extend({attr:function(t,e,i){var n,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?T.prop(t,e,i):(1===r&&T.isXMLDoc(t)||(o=T.attrHooks[e.toLowerCase()]||(T.expr.match.bool.test(e)?he:void 0)),void 0!==i?null===i?void T.removeAttr(t,e):o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:(t.setAttribute(e,i+""),i):o&&"get"in o&&null!==(n=o.get(t,e))?n:null==(n=T.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&C(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,o=e&&e.match(O);if(o&&1===t.nodeType)for(;i=o[n++];)t.removeAttribute(i)}}),he={set:function(t,e,i){return!1===e?T.removeAttr(t,i):t.setAttribute(i,i),i}},T.each(T.expr.match.bool.source.match(/\w+/g),function(t,e){var s=ue[e]||T.find.attr;ue[e]=function(t,e,i){var n,o,r=e.toLowerCase();return i||(o=ue[r],ue[r]=n,n=null!=s(t,e,i)?r:null,ue[r]=o),n}});var ce=/^(?:input|select|textarea|button)$/i,de=/^(?:a|area)$/i;function pe(t){return(t.match(O)||[]).join(" ")}function fe(t){return t.getAttribute&&t.getAttribute("class")||""}function me(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(O)||[]}T.fn.extend({prop:function(t,e){return q(this,T.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[T.propFix[t]||t]})}}),T.extend({prop:function(t,e,i){var n,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&T.isXMLDoc(t)||(e=T.propFix[e]||e,o=T.propHooks[e]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=T.find.attr(t,"tabindex");return e?parseInt(e,10):ce.test(t.nodeName)||de.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(T.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this}),T.fn.extend({addClass:function(e){var t,i,n,o,r,s,a,l=0;if(_(e))return this.each(function(t){T(this).addClass(e.call(this,t,fe(this)))});if((t=me(e)).length)for(;i=this[l++];)if(o=fe(i),n=1===i.nodeType&&" "+pe(o)+" "){for(s=0;r=t[s++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o!==(a=pe(n))&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,o,r,s,a,l=0;if(_(e))return this.each(function(t){T(this).removeClass(e.call(this,t,fe(this)))});if(!arguments.length)return this.attr("class","");if((t=me(e)).length)for(;i=this[l++];)if(o=fe(i),n=1===i.nodeType&&" "+pe(o)+" "){for(s=0;r=t[s++];)for(;-1<n.indexOf(" "+r+" ");)n=n.replace(" "+r+" "," ");o!==(a=pe(n))&&i.setAttribute("class",a)}return this},toggleClass:function(o,e){var r=typeof o,s="string"===r||Array.isArray(o);return"boolean"==typeof e&&s?e?this.addClass(o):this.removeClass(o):_(o)?this.each(function(t){T(this).toggleClass(o.call(this,t,fe(this),e),e)}):this.each(function(){var t,e,i,n;if(s)for(e=0,i=T(this),n=me(o);t=n[e++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==o&&"boolean"!==r||((t=fe(this))&&Y.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===o?"":Y.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&-1<(" "+pe(fe(i))+" ").indexOf(e))return!0;return!1}});var ge=/\r/g;T.fn.extend({val:function(i){var n,t,o,e=this[0];return arguments.length?(o=_(i),this.each(function(t){var e;1===this.nodeType&&(null==(e=o?i.call(this,t,T(this).val()):i)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=T.map(e,function(t){return null==t?"":t+""})),(n=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value")||(this.value=e))})):e?(n=T.valHooks[e.type]||T.valHooks[e.nodeName.toLowerCase()])&&"get"in n&&void 0!==(t=n.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(ge,""):null==t?"":t:void 0}}),T.extend({valHooks:{option:{get:function(t){var e=T.find.attr(t,"value");return null!=e?e:pe(T.text(t))}},select:{get:function(t){var e,i,n,o=t.options,r=t.selectedIndex,s="select-one"===t.type,a=s?null:[],l=s?r+1:o.length;for(n=r<0?l:s?r:0;n<l;n++)if(((i=o[n]).selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!C(i.parentNode,"optgroup"))){if(e=T(i).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var i,n,o=t.options,r=T.makeArray(e),s=o.length;s--;)((n=o[s]).selected=-1<T.inArray(T.valHooks.option.get(n),r))&&(i=!0);return i||(t.selectedIndex=-1),r}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<T.inArray(T(t).val(),e)}},v.checkOn||(T.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),v.focusin="onfocusin"in L;var ve=/^(?:focusinfocus|focusoutblur)$/,_e=function(t){t.stopPropagation()};T.extend(T.event,{trigger:function(t,e,i,n){var o,r,s,a,l,h,u,c,d=[i||k],p=g.call(t,"type")?t.type:t,f=g.call(t,"namespace")?t.namespace.split("."):[];if(r=c=s=i=i||k,3!==i.nodeType&&8!==i.nodeType&&!ve.test(p+T.event.triggered)&&(-1<p.indexOf(".")&&(p=(f=p.split(".")).shift(),f.sort()),l=p.indexOf(":")<0&&"on"+p,(t=t[T.expando]?t:new T.Event(p,"object"==typeof t&&t)).isTrigger=n?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:T.makeArray(e,[t]),u=T.event.special[p]||{},n||!u.trigger||!1!==u.trigger.apply(i,e))){if(!n&&!u.noBubble&&!y(i)){for(a=u.delegateType||p,ve.test(a+p)||(r=r.parentNode);r;r=r.parentNode)d.push(r),s=r;s===(i.ownerDocument||k)&&d.push(s.defaultView||s.parentWindow||L)}for(o=0;(r=d[o++])&&!t.isPropagationStopped();)c=r,t.type=1<o?a:u.bindType||p,(h=(Y.get(r,"events")||{})[t.type]&&Y.get(r,"handle"))&&h.apply(r,e),(h=l&&r[l])&&h.apply&&Z(r)&&(t.result=h.apply(r,e),!1===t.result&&t.preventDefault());return t.type=p,n||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(d.pop(),e)||!Z(i)||l&&_(i[p])&&!y(i)&&((s=i[l])&&(i[l]=null),T.event.triggered=p,t.isPropagationStopped()&&c.addEventListener(p,_e),i[p](),t.isPropagationStopped()&&c.removeEventListener(p,_e),T.event.triggered=void 0,s&&(i[l]=s)),t.result}},simulate:function(t,e,i){var n=T.extend(new T.Event,i,{type:t,isSimulated:!0});T.event.trigger(n,null,e)}}),T.fn.extend({trigger:function(t,e){return this.each(function(){T.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return T.event.trigger(t,e,i,!0)}}),v.focusin||T.each({focus:"focusin",blur:"focusout"},function(i,n){var o=function(t){T.event.simulate(n,t.target,T.event.fix(t))};T.event.special[n]={setup:function(){var t=this.ownerDocument||this,e=Y.access(t,n);e||t.addEventListener(i,o,!0),Y.access(t,n,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=Y.access(t,n)-1;e?Y.access(t,n,e):(t.removeEventListener(i,o,!0),Y.remove(t,n))}}});var ye=L.location,we=Date.now(),be=/\?/;T.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new L.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||T.error("Invalid XML: "+t),e};var xe=/\[\]$/,Le=/\r?\n/g,ke=/^(?:submit|button|image|reset|file)$/i,Te=/^(?:input|select|textarea|keygen)/i;function Ee(i,t,n,o){var e;if(Array.isArray(t))T.each(t,function(t,e){n||xe.test(i)?o(i,e):Ee(i+"["+("object"==typeof e&&null!=e?t:"")+"]",e,n,o)});else if(n||"object"!==b(t))o(i,t);else for(e in t)Ee(i+"["+e+"]",t[e],n,o)}T.param=function(t,e){var i,n=[],o=function(t,e){var i=_(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(t)||t.jquery&&!T.isPlainObject(t))T.each(t,function(){o(this.name,this.value)});else for(i in t)Ee(i,t[i],e,o);return n.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=T.prop(this,"elements");return t?T.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!T(this).is(":disabled")&&Te.test(this.nodeName)&&!ke.test(t)&&(this.checked||!lt.test(t))}).map(function(t,e){var i=T(this).val();return null==i?null:Array.isArray(i)?T.map(i,function(t){return{name:e.name,value:t.replace(Le,"\r\n")}}):{name:e.name,value:i.replace(Le,"\r\n")}}).get()}});var Ce=/%20/g,De=/#.*$/,Me=/([?&])_=[^&]*/,Se=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pe=/^(?:GET|HEAD)$/,Ne=/^\/\//,Ie={},Ae={},Oe="*/".concat("*"),Re=k.createElement("a");function je(r){return function(t,e){"string"!=typeof t&&(e=t,t="*");var i,n=0,o=t.toLowerCase().match(O)||[];if(_(e))for(;i=o[n++];)"+"===i[0]?(i=i.slice(1)||"*",(r[i]=r[i]||[]).unshift(e)):(r[i]=r[i]||[]).push(e)}}function ze(e,o,r,s){var a={},l=e===Ae;function h(t){var n;return a[t]=!0,T.each(e[t]||[],function(t,e){var i=e(o,r,s);return"string"!=typeof i||l||a[i]?l?!(n=i):void 0:(o.dataTypes.unshift(i),h(i),!1)}),n}return h(o.dataTypes[0])||!a["*"]&&h("*")}function $e(t,e){var i,n,o=T.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&T.extend(!0,t,n),t}Re.href=ye.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ye.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ye.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Oe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?$e($e(t,T.ajaxSettings),e):$e(T.ajaxSettings,t)},ajaxPrefilter:je(Ie),ajaxTransport:je(Ae),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var u,c,d,i,p,n,f,m,o,r,g=T.ajaxSetup({},e),v=g.context||g,_=g.context&&(v.nodeType||v.jquery)?T(v):T.event,y=T.Deferred(),w=T.Callbacks("once memory"),b=g.statusCode||{},s={},a={},l="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(f){if(!i)for(i={};e=Se.exec(d);)i[e[1].toLowerCase()]=e[2];e=i[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return f?d:null},setRequestHeader:function(t,e){return null==f&&(t=a[t.toLowerCase()]=a[t.toLowerCase()]||t,s[t]=e),this},overrideMimeType:function(t){return null==f&&(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(f)x.always(t[x.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||l;return u&&u.abort(e),h(0,e),this}};if(y.promise(x),g.url=((t||g.url||ye.href)+"").replace(Ne,ye.protocol+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(O)||[""],null==g.crossDomain){n=k.createElement("a");try{n.href=g.url,n.href=n.href,g.crossDomain=Re.protocol+"//"+Re.host!=n.protocol+"//"+n.host}catch(t){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=T.param(g.data,g.traditional)),ze(Ie,g,e,x),f)return x;for(o in(m=T.event&&g.global)&&0==T.active++&&T.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Pe.test(g.type),c=g.url.replace(De,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(Ce,"+")):(r=g.url.slice(c.length),g.data&&(g.processData||"string"==typeof g.data)&&(c+=(be.test(c)?"&":"?")+g.data,delete g.data),!1===g.cache&&(c=c.replace(Me,"$1"),r=(be.test(c)?"&":"?")+"_="+we+++r),g.url=c+r),g.ifModified&&(T.lastModified[c]&&x.setRequestHeader("If-Modified-Since",T.lastModified[c]),T.etag[c]&&x.setRequestHeader("If-None-Match",T.etag[c])),(g.data&&g.hasContent&&!1!==g.contentType||e.contentType)&&x.setRequestHeader("Content-Type",g.contentType),x.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Oe+"; q=0.01":""):g.accepts["*"]),g.headers)x.setRequestHeader(o,g.headers[o]);if(g.beforeSend&&(!1===g.beforeSend.call(v,x,g)||f))return x.abort();if(l="abort",w.add(g.complete),x.done(g.success),x.fail(g.error),u=ze(Ae,g,e,x)){if(x.readyState=1,m&&_.trigger("ajaxSend",[x,g]),f)return x;g.async&&0<g.timeout&&(p=L.setTimeout(function(){x.abort("timeout")},g.timeout));try{f=!1,u.send(s,h)}catch(t){if(f)throw t;h(-1,t)}}else h(-1,"No Transport");function h(t,e,i,n){var o,r,s,a,l,h=e;f||(f=!0,p&&L.clearTimeout(p),u=void 0,d=n||"",x.readyState=0<t?4:0,o=200<=t&&t<300||304===t,i&&(a=function(t,e,i){for(var n,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(o in a)if(a[o]&&a[o].test(n)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==l[0]&&l.unshift(r),i[r]}(g,x,i)),a=function(t,e,i,n){var o,r,s,a,l,h={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)h[s.toLowerCase()]=t.converters[s];for(r=u.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=h[l+" "+r]||h["* "+r]))for(o in h)if((a=o.split(" "))[1]===r&&(s=h[l+" "+a[0]]||h["* "+a[0]])){!0===s?s=h[o]:!0!==h[o]&&(r=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(g,a,x,o),o?(g.ifModified&&((l=x.getResponseHeader("Last-Modified"))&&(T.lastModified[c]=l),(l=x.getResponseHeader("etag"))&&(T.etag[c]=l)),204===t||"HEAD"===g.type?h="nocontent":304===t?h="notmodified":(h=a.state,r=a.data,o=!(s=a.error))):(s=h,!t&&h||(h="error",t<0&&(t=0))),x.status=t,x.statusText=(e||h)+"",o?y.resolveWith(v,[r,h,x]):y.rejectWith(v,[x,h,s]),x.statusCode(b),b=void 0,m&&_.trigger(o?"ajaxSuccess":"ajaxError",[x,g,o?r:s]),w.fireWith(v,[x,h]),m&&(_.trigger("ajaxComplete",[x,g]),--T.active||T.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,i){return T.get(t,e,i,"json")},getScript:function(t,e){return T.get(t,void 0,e,"script")}}),T.each(["get","post"],function(t,o){T[o]=function(t,e,i,n){return _(e)&&(n=n||i,i=e,e=void 0),T.ajax(T.extend({url:t,type:o,dataType:n,data:e,success:i},T.isPlainObject(t)&&t))}}),T._evalUrl=function(t){return T.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},T.fn.extend({wrapAll:function(t){var e;return this[0]&&(_(t)&&(t=t.call(this[0])),e=T(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(i){return _(i)?this.each(function(t){T(this).wrapInner(i.call(this,t))}):this.each(function(){var t=T(this),e=t.contents();e.length?e.wrapAll(i):t.append(i)})},wrap:function(e){var i=_(e);return this.each(function(t){T(this).wrapAll(i?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(t){return!T.expr.pseudos.visible(t)},T.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new L.XMLHttpRequest}catch(t){}};var Fe={0:200,1223:204},Be=T.ajaxSettings.xhr();v.cors=!!Be&&"withCredentials"in Be,v.ajax=Be=!!Be,T.ajaxTransport(function(o){var r,s;if(v.cors||Be&&!o.crossDomain)return{send:function(t,e){var i,n=o.xhr();if(n.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(i in o.xhrFields)n[i]=o.xhrFields[i];for(i in o.mimeType&&n.overrideMimeType&&n.overrideMimeType(o.mimeType),o.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)n.setRequestHeader(i,t[i]);r=function(t){return function(){r&&(r=s=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null,"abort"===t?n.abort():"error"===t?"number"!=typeof n.status?e(0,"error"):e(n.status,n.statusText):e(Fe[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=r(),s=n.onerror=n.ontimeout=r("error"),void 0!==n.onabort?n.onabort=s:n.onreadystatechange=function(){4===n.readyState&&L.setTimeout(function(){r&&s()})},r=r("abort");try{n.send(o.hasContent&&o.data||null)}catch(t){if(r)throw t}},abort:function(){r&&r()}}}),T.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return T.globalEval(t),t}}}),T.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),T.ajaxTransport("script",function(i){var n,o;if(i.crossDomain)return{send:function(t,e){n=T("<script>").prop({charset:i.scriptCharset,src:i.url}).on("load error",o=function(t){n.remove(),o=null,t&&e("error"===t.type?404:200,t.type)}),k.head.appendChild(n[0])},abort:function(){o&&o()}}});var qe,Ue=[],He=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ue.pop()||T.expando+"_"+we++;return this[t]=!0,t}}),T.ajaxPrefilter("json jsonp",function(t,e,i){var n,o,r,s=!1!==t.jsonp&&(He.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&He.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=_(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(He,"$1"+n):!1!==t.jsonp&&(t.url+=(be.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return r||T.error(n+" was not called"),r[0]},t.dataTypes[0]="json",o=L[n],L[n]=function(){r=arguments},i.always(function(){void 0===o?T(L).removeProp(n):L[n]=o,t[n]&&(t.jsonpCallback=e.jsonpCallback,Ue.push(n)),r&&_(o)&&o(r[0]),r=o=void 0}),"script"}),v.createHTMLDocument=((qe=k.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qe.childNodes.length),T.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(v.createHTMLDocument?((n=(e=k.implementation.createHTMLDocument("")).createElement("base")).href=k.location.href,e.head.appendChild(n)):e=k),r=!i&&[],(o=D.exec(t))?[e.createElement(o[1])]:(o=vt([t],e,r),r&&r.length&&T(r).remove(),T.merge([],o.childNodes)));var n,o,r},T.fn.load=function(t,e,i){var n,o,r,s=this,a=t.indexOf(" ");return-1<a&&(n=pe(t.slice(a)),t=t.slice(0,a)),_(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),0<s.length&&T.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){r=arguments,s.html(n?T("<div>").append(T.parseHTML(t)).find(n):t)}).always(i&&function(t,e){s.each(function(){i.apply(this,r||[t.responseText,e,t])})}),this},T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){T.fn[e]=function(t){return this.on(e,t)}}),T.expr.pseudos.animated=function(e){return T.grep(T.timers,function(t){return e===t.elem}).length},T.offset={setOffset:function(t,e,i){var n,o,r,s,a,l,h=T.css(t,"position"),u=T(t),c={};"static"===h&&(t.style.position="relative"),a=u.offset(),r=T.css(t,"top"),l=T.css(t,"left"),("absolute"===h||"fixed"===h)&&-1<(r+l).indexOf("auto")?(s=(n=u.position()).top,o=n.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),_(e)&&(e=e.call(t,i,T.extend({},a))),null!=e.top&&(c.top=e.top-a.top+s),null!=e.left&&(c.left=e.left-a.left+o),"using"in e?e.using.call(t,c):u.css(c)}},T.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){T.offset.setOffset(this,e,t)});var t,i,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],o={top:0,left:0};if("fixed"===T.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===T.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((o=T(t).offset()).top+=T.css(t,"borderTopWidth",!0),o.left+=T.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-T.css(n,"marginTop",!0),left:e.left-o.left-T.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===T.css(t,"position");)t=t.offsetParent;return t||_t})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,o){var r="pageYOffset"===o;T.fn[e]=function(t){return q(this,function(t,e,i){var n;if(y(t)?n=t:9===t.nodeType&&(n=t.defaultView),void 0===i)return n?n[o]:t[e];n?n.scrollTo(r?n.pageXOffset:i,r?i:n.pageYOffset):t[e]=i},e,t,arguments.length)}}),T.each(["top","left"],function(t,i){T.cssHooks[i]=Ft(v.pixelPosition,function(t,e){if(e)return e=$t(t,i),Rt.test(e)?T(t).position()[i]+"px":e})}),T.each({Height:"height",Width:"width"},function(s,a){T.each({padding:"inner"+s,content:a,"":"outer"+s},function(n,r){T.fn[r]=function(t,e){var i=arguments.length&&(n||"boolean"!=typeof t),o=n||(!0===t||!0===e?"margin":"border");return q(this,function(t,e,i){var n;return y(t)?0===r.indexOf("outer")?t["inner"+s]:t.document.documentElement["client"+s]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+s],n["scroll"+s],t.body["offset"+s],n["offset"+s],n["client"+s])):void 0===i?T.css(t,e,o):T.style(t,e,i,o)},a,i?t:void 0,i)}})}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,i){T.fn[i]=function(t,e){return 0<arguments.length?this.on(i,null,t,e):this.trigger(i)}}),T.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),T.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),T.proxy=function(t,e){var i,n,o;if("string"==typeof e&&(i=t[e],e=t,t=i),_(t))return n=a.call(arguments,2),(o=function(){return t.apply(e||this,n.concat(a.call(arguments)))}).guid=t.guid=t.guid||T.guid++,o},T.holdReady=function(t){t?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=C,T.isFunction=_,T.isWindow=y,T.camelCase=W,T.type=b,T.now=Date.now,T.isNumeric=function(t){var e=T.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return T});var Ve=L.jQuery,We=L.$;return T.noConflict=function(t){return L.$===T&&(L.$=We),t&&L.jQuery===T&&(L.jQuery=Ve),T},t||(L.jQuery=L.$=T),T})},{}],13:[function(t,e,i){var r,n,s;r=window,n=document,L.drawVersion="1.0.2",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e);var i=L.version.split(".");1===parseInt(i[0],10)&&2<=parseInt(i[1],10)?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire(L.Draw.Event.CREATED,{layer:t,layerType:this.type})},_cancelDrawing:function(t){27===t.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(t,e){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,i=e.getLatLngs(),n=i.splice(-1,1)[0];this._poly.setLatLngs(i),this._markerGroup.removeLayer(t),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(n,!1)}},addVertex:function(t){2<=this._markers.length&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(t,!0))},completeShape:function(){this._markers.length<=1||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var t=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),e=this._poly.newLatLngIntersects(t[t.length-1]);!this.options.allowIntersection&&e||!this._shapeIsValid()?this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent),i=this._map.layerPointToLatLng(e);this._currentLatLng=i,this._updateTooltip(i),this._updateGuide(e),this._mouseMarker.setLatLng(i),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(t),this._clickHandled=!0,this._disableNewMarkers();var e=t.originalEvent,i=e.clientX,n=e.clientY;this._startPoint.call(this,i,n)}},_startPoint:function(t,e){this._mouseDownOrigin=L.point(t,e)},_onMouseUp:function(t){var e=t.originalEvent,i=e.clientX,n=e.clientY;this._endPoint.call(this,i,n,t),this._clickHandled=null},_endPoint:function(t,e,i){if(this._mouseDownOrigin){var n=L.point(t,e).distanceTo(this._mouseDownOrigin),o=this._calculateFinishDistance(i.latlng);1<this.options.maxPoints&&this.options.maxPoints==this._markers.length+1?(this.addVertex(i.latlng),this._finishShape()):o<10&&L.Browser.touch?this._finishShape():Math.abs(n)<9*(r.devicePixelRatio||1)&&this.addVertex(i.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(t){var e,i,n=t.originalEvent;!n.touches||!n.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(e=n.touches[0].clientX,i=n.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,e,i),this._endPoint.call(this,e,i,t),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(t){var e;if(0<this._markers.length){var i;if(this.type===L.Draw.Polyline.TYPE)i=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;i=this._markers[0]}var n=this._map.latLngToContainerPoint(i.getLatLng()),o=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),r=this._map.latLngToContainerPoint(o.getLatLng());e=n.distanceTo(r)}else e=1/0;return e},_updateFinishHandler:function(){var t=this._markers.length;1<t&&this._markers[t-1].on("click",this._finishShape,this),2<t&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers?this._markers.length:0;0<e&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var i,n,o,r=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),s=this.options.guidelineDistance,a=this.options.maxGuideLineLength,l=a<r?r-a:s;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));l<r;l+=this.options.guidelineDistance)i=l/r,n={x:Math.floor(t.x*(1-i)+i*e.x),y:Math.floor(t.y*(1-i)+i*e.y)},(o=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer)).style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(o,n)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,i=this._guidesContainer.childNodes.length;e<i;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,i=this.options.showLength;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=i?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var i,n,o=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(i=o-(e?2:1),n=L.GeometryUtil.isVersion07x()?t.distanceTo(this._markers[i].getLatLng())*(this.options.factor||1):this._map.distance(t,this._markers[i].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=n*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,i=this._markers[this._markers.length-1].getLatLng();return t=L.GeometryUtil.isVersion07x()?i&&e&&e.distanceTo?this._measurementRunningTotal+e.distanceTo(i)*(this.options.factor||1):this._measurementRunningTotal||0:i&&e?this._measurementRunningTotal+this._map.distance(e,i)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(t,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){1<this._markers.length&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),2<t&&(this._markers[t-1].on("dblclick",this._finishShape,this),3<t&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:(t=this._markers.length<3?L.drawLocal.draw.handlers.polygon.tooltip.cont:L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area,e="";return t||this.options.showLength?(this.options.showLength&&(e=L.Draw.Polyline.prototype._getMeasurementString.call(this)),t&&(e+="<br>"+L.GeometryUtil.readableArea(t,this.options.metric,this.options.precision)),e):null},_shapeIsValid:function(){return 3<=this._markers.length},_vertexChanged:function(t,e){var i;!this.options.allowIntersection&&this.options.showArea&&(i=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(i)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,e)},_cleanUpShape:function(){var t=this._markers.length;0<t&&(this._markers[0].off("click",this._finishShape,this),2<t&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),n.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(n,"mouseup",this._onMouseUp,this),L.DomEvent.off(n,"touchend",this._onMouseUp,this),n.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(n,"mouseup",this._onMouseUp,this).on(n,"touchend",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,showArea:!0,clickable:!0},metric:!0},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(t){this._shape||this._isCurrentlyTwoClickDrawing?this._isCurrentlyTwoClickDrawing&&!function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}(t.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this):this._isCurrentlyTwoClickDrawing=!0},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_getTooltipText:function(){var t,e,i,n=L.Draw.SimpleShape.prototype._getTooltipText.call(this),o=this._shape,r=this.options.showArea;return o&&(t=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),e=L.GeometryUtil.geodesicArea(t),i=r?L.GeometryUtil.readableArea(e,this.options.metric):""),{text:n.text,subtext:i}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=this._createMarker(e),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(t){return new L.Marker(t,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(t){this._onMouseMove(t),this._onClick()},_fireCreatedEvent:function(){var t=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},_fireCreatedEvent:function(){var t=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)},_createMarker:function(t){return new L.CircleMarker(t,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){if(L.GeometryUtil.isVersion07x())var e=this._startLatLng.distanceTo(t);else e=this._map.distance(this._startLatLng,t);this._shape?this._shape.setRadius(e):(this._shape=new L.Circle(this._startLatLng,e,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,i=t.latlng,n=this.options.showRadius,o=this.options.metric;if(this._tooltip.updatePosition(i),this._isDrawing){this._drawShape(i),e=this._shape.getRadius().toFixed(1);var r="";n&&(r=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(e,o,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:r})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(t,e){this._marker=t,L.setOptions(this,e)},addHooks:function(){var t=this._marker;t.dragging.enable(),t.on("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},removeHooks:function(){var t=this._marker;t.dragging.disable(),t.off("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},_onDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_toggleMarkerHighlight:function(){var t=this._marker._icon;t&&(t.style.display="none",L.DomUtil.hasClass(t,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,-4)):(L.DomUtil.addClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,4)),t.style.display="")},_offsetMarker:function(t,e){var i=parseInt(t.style.marginTop,10)-e,n=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=i+"px",t.style.marginLeft=n+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(t){this.latlngs=[t._latlngs],t._holes&&(this.latlngs=this.latlngs.concat(t._holes)),this._poly=t,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(t){for(var e=0;e<this._verticesHandlers.length;e++)t(this._verticesHandlers[e])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(t){t.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(t){t.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(t){t.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var t=0;t<this.latlngs.length;t++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[t],this._poly.options.poly))},_updateLatLngs:function(t){this.latlngs=[t.layer._latlngs],t.layer._holes&&(this.latlngs=this.latlngs.concat(t.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(t,e,i){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=t,i&&i.drawError&&(i.drawError=L.Util.extend({},this.options.drawError,i.drawError)),this._latlngs=e,L.setOptions(this,i)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var t=this._poly,e=t._path;t instanceof L.Polygon||(t.options.fill=!1,t.options.editing&&(t.options.editing.fill=!1)),e&&t.options.editing.className&&(t.options.original.className&&t.options.original.className.split(" ").forEach(function(t){L.DomUtil.removeClass(e,t)}),t.options.editing.className.split(" ").forEach(function(t){L.DomUtil.addClass(e,t)})),t.setStyle(t.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._poly,e=t._path;e&&t.options.editing.className&&(t.options.editing.className.split(" ").forEach(function(t){L.DomUtil.removeClass(e,t)}),t.options.original.className&&t.options.original.className.split(" ").forEach(function(t){L.DomUtil.addClass(e,t)})),t.setStyle(t.options.original),t._map&&(t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,i,n,o,r,s=this._defaultShape();for(t=0,i=s.length;t<i;t++)(n=this._createMarker(s[t],t)).on("click",this._onMarkerClick,this),n.on("contextmenu",this._onContextMenu,this),this._markers.push(n);for(t=0,e=i-1;t<i;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(o=this._markers[e],r=this._markers[t],this._createMiddleMarker(o,r),this._updatePrevNext(o,r))},_createMarker:function(t,e){var i=new L.Marker.Touch(t,{draggable:!0,icon:this.options.icon});return i._origLatLng=t,i._index=e,i.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(i),i},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var t=this._defaultShape(),e=[].splice.apply(t,arguments);return this._poly._convertLatLngs(t,!0),this._poly.redraw(),e},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(t){var e=t.target,i=this._poly;if(L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),i.options.poly){var n=i._map._editTooltip;if(!i.options.poly.allowIntersection&&i.intersects()){var o=i.options.color;i.setStyle({color:this.options.drawError.color}),0!==L.version.indexOf("0.7")&&e.dragging._draggable._onUp(t),this._onMarkerClick(t),n&&n.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){i.setStyle({color:o}),n&&n.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var r=this._poly.getLatLngs();this._poly._convertLatLngs(r,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,i=t.target;this._defaultShape().length<e||(this._removeMarker(i),this._updatePrevNext(i._prev,i._next),i._middleLeft&&this._markerGroup.removeLayer(i._middleLeft),i._middleRight&&this._markerGroup.removeLayer(i._middleRight),i._prev&&i._next?this._createMiddleMarker(i._prev,i._next):i._prev?i._next||(i._prev._middleRight=null):i._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(t){var e=t.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:e,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),i=this._map.layerPointToLatLng(e),n=t.target;L.extend(n._origLatLng,i),n._middleLeft&&n._middleLeft.setLatLng(this._getMiddleLatLng(n._prev,n)),n._middleRight&&n._middleRight.setLatLng(this._getMiddleLatLng(n,n._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(e,i){this._markerGroup.eachLayer(function(t){t._index>e&&(t._index+=i)})},_createMiddleMarker:function(e,i){var n,o,t,r=this._getMiddleLatLng(e,i),s=this._createMarker(r);s.setOpacity(.6),e._middleRight=i._middleLeft=s,o=function(){s.off("touchmove",o,this);var t=i._index;s._index=t,s.off("click",n,this).on("click",this._onMarkerClick,this),r.lat=s.getLatLng().lat,r.lng=s.getLatLng().lng,this._spliceLatLngs(t,0,r),this._markers.splice(t,0,s),s.setOpacity(1),this._updateIndexes(t,1),i._index++,this._updatePrevNext(e,s),this._updatePrevNext(s,i),this._poly.fire("editstart")},t=function(){s.off("dragstart",o,this),s.off("dragend",t,this),s.off("touchmove",o,this),this._createMiddleMarker(e,s),this._createMiddleMarker(s,i)},n=function(){o.call(this),t.call(this),this._fireEdit()},s.on("click",n,this).on("dragstart",o,this).on("dragend",t,this).on("touchmove",o,this),this._markerGroup.addLayer(s)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var i=this._poly._map,n=i.project(t.getLatLng()),o=i.project(e.getLatLng());return i.unproject(n._add(o)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(t,e){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){var t=this._shape;this._shape._map&&(this._map=this._shape._map,t.setStyle(t.options.editing),t._map&&(this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var t=this._shape;if(t.setStyle(t.options.original),t._map){this._unbindMarker(this._moveMarker);for(var e=0,i=this._resizeMarkers.length;e<i;e++)this._unbindMarker(this._resizeMarkers[e]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var i=new L.Marker.Touch(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(i),this._markerGroup.addLayer(i),i},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(t){t.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,i=e.getLatLng();e===this._moveMarker?this._move(i):this._resize(i),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(t){t.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(t){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t),"function"==typeof this._getCorners){var e=this._getCorners(),i=t.target,n=i._cornerIndex;i.setOpacity(0),this._oppositeCorner=e[(n+2)%4],this._toggleCornerMarkers(0,n)}this._shape.fire("editstart")},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),i=this._map.layerPointToLatLng(e);return t.target===this._moveMarker?this._move(i):this._resize(i),this._shape.redraw(),!1},_onTouchEnd:function(t){t.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,i=t.length;e<i;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),i=t.target._cornerIndex;this._oppositeCorner=e[(i+2)%4],this._toggleCornerMarkers(0,i)},_onMarkerDragEnd:function(t){var e,i=t.target;i===this._moveMarker&&(e=this._shape.getBounds().getCenter(),i.setLatLng(e)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,i=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),n=this._shape.getBounds().getCenter(),o=[],r=0,s=i.length;r<s;r++)e=[i[r].lat-n.lat,i[r].lng-n.lng],o.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(o),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var t=this._shape.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_toggleCornerMarkers:function(t){for(var e=0,i=this._resizeMarkers.length;e<i;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,i=this._resizeMarkers.length;e<i;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(t){if(this._resizeMarkers.length){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e)}this._shape.setLatLng(t),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),i=this._map.project(t);return this._map.unproject([i.x+e,i.y-e])},_resize:function(t){var e=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=e.distanceTo(t):radius=this._map.distance(e,t),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart),L.DomEvent.off(this._container,"touchend",this._onTouchEnd),L.DomEvent.off(this._container,"touchmove",this._onTouchMove),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDowm",this._onTouchStart),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave))},_touchEvent:function(t,e){var i={};if(void 0!==t.touches){if(!t.touches.length)return;i=t.touches[0]}else{if("touch"!==t.pointerType)return;if(i=t,!this._filterClick(t))return}var n=this._map.mouseEventToContainerPoint(i),o=this._map.mouseEventToLayerPoint(i),r=this._map.layerPointToLatLng(o);this._map.fire(e,{latlng:r,layerPoint:o,containerPoint:n,pageX:i.pageX,pageY:i.pageY,originalEvent:t})},_filterClick:function(t){var e=t.timeStamp||t.originalEvent.timeStamp,i=L.DomEvent._lastClick&&e-L.DomEvent._lastClick;return i&&100<i&&i<500||t.target._simulatedClick&&!t._simulated?(L.DomEvent.stop(t),!1):(L.DomEvent._lastClick=e,!0)},_onTouchStart:function(t){this._map._loaded&&this._touchEvent(t,"touchstart")},_onTouchEnd:function(t){this._map._loaded&&this._touchEvent(t,"touchend")},_onTouchCancel:function(t){if(this._map._loaded){var e="touchcancel";this._detectIE()&&(e="pointercancel"),this._touchEvent(t,e)}},_onTouchLeave:function(t){this._map._loaded&&this._touchEvent(t,"touchleave")},_onTouchMove:function(t){this._map._loaded&&this._touchEvent(t,"touchmove")},_detectIE:function(){var t=r.navigator.userAgent,e=t.indexOf("MSIE ");if(0<e)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<t.indexOf("Trident/")){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var n=t.indexOf("Edge/");return 0<n&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?e.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):e.concat(["touchcancel"]),L.DomUtil.addClass(t,"leaflet-clickable"),L.DomEvent.on(t,"click",this._onMouseClick,this),L.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var i=0;i<e.length;i++)L.DomEvent.on(t,e[i],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var t=r.navigator.userAgent,e=t.indexOf("MSIE ");if(0<e)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<t.indexOf("Trident/")){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var n=t.indexOf("Edge/");return 0<n&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)}}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],i=0,n=t.length;i<n;i++)Array.isArray(t[i])?e.push(L.LatLngUtil.cloneLatLngs(t[i])):e.push(this.cloneLatLng(t[i]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},s={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,i,n=t.length,o=0,r=Math.PI/180;if(2<n){for(var s=0;s<n;s++)e=t[s],o+=((i=t[(s+1)%n]).lng-e.lng)*r*(2+Math.sin(e.lat*r)+Math.sin(i.lat*r));o=6378137*o*6378137/2}return Math.abs(o)},formattedNumber:function(t,e){var i=parseFloat(t).toFixed(e),n=L.drawLocal.format&&L.drawLocal.format.numeric,o=n&&n.delimiters,r=o&&o.thousands,s=o&&o.decimal;if(r||s){var a=i.split(".");i=r?a[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+r):a[0],s=s||".",1<a.length&&(i=i+s+a[1])}return i},readableArea:function(t,e,i){var n,o;return i=L.Util.extend({},s,i),e?(o=["ha","m"],type=typeof e,"string"===type?o=[e]:"boolean"!==type&&(o=e),n=1e6<=t&&-1!==o.indexOf("km")?L.GeometryUtil.formattedNumber(1e-6*t,i.km)+" kmÂ²":1e4<=t&&-1!==o.indexOf("ha")?L.GeometryUtil.formattedNumber(1e-4*t,i.ha)+" ha":L.GeometryUtil.formattedNumber(t,i.m)+" mÂ²"):n=3097600<=(t/=.836127)?L.GeometryUtil.formattedNumber(t/3097600,i.mi)+" miÂ²":4840<=t?L.GeometryUtil.formattedNumber(t/4840,i.ac)+" acres":L.GeometryUtil.formattedNumber(t,i.yd)+" ydÂ²",n},readableDistance:function(t,e,i,n,o){var r;switch(o=L.Util.extend({},s,o),e?"string"==typeof e?e:"metric":i?"feet":n?"nauticalMile":"yards"){case"metric":r=1e3<t?L.GeometryUtil.formattedNumber(t/1e3,o.km)+" km":L.GeometryUtil.formattedNumber(t,o.m)+" m";break;case"feet":t*=3.28083,r=L.GeometryUtil.formattedNumber(t,o.ft)+" ft";break;case"nauticalMile":t*=.53996,r=L.GeometryUtil.formattedNumber(t/1e3,o.nm)+" nm";break;case"yards":default:r=1760<(t*=1.09361)?L.GeometryUtil.formattedNumber(t/1760,o.mi)+" miles":L.GeometryUtil.formattedNumber(t,o.yd)+" yd"}return r},isVersion07x:function(){var t=L.version.split(".");return 0===parseInt(t[0],10)&&7===parseInt(t[1],10)}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,i,n){return this._checkCounterclockwise(t,i,n)!==this._checkCounterclockwise(e,i,n)&&this._checkCounterclockwise(t,e,i)!==this._checkCounterclockwise(t,e,n)},_checkCounterclockwise:function(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,i,n=this._getProjectedPoints(),o=n?n.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=o-1;3<=t;t--)if(e=n[t-1],i=n[t],this._lineSegmentsIntersectsRange(e,i,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t),e)},newPointIntersects:function(t,e){var i=this._getProjectedPoints(),n=i?i.length:0,o=i?i[n-1]:null,r=n-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(o,t,r,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._getProjectedPoints(),i=e?e.length:0;return!e||(i+=t||0)<=3},_lineSegmentsIntersectsRange:function(t,e,i,n){var o,r,s=this._getProjectedPoints();n=n||0;for(var a=i;n<a;a--)if(o=s[a-1],r=s[a],L.LineUtil.segmentsIntersect(t,e,o,r))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var t=[],e=this._defaultShape(),i=0;i<e.length;i++)t.push(this._map.latLngToLayerPoint(e[i]));return t}}),L.Polygon.include({intersects:function(){var t,e,i,n,o=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(t=o.length,e=o[0],i=o[t-1],n=t-2,this._lineSegmentsIntersectsRange(i,e,n,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");var e;L.Control.prototype.initialize.call(this,t),this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(t){var e,i=L.DomUtil.create("div","leaflet-draw"),n=!1;for(var o in this._toolbars)this._toolbars.hasOwnProperty(o)&&(e=this._toolbars[o].addToolbar(t))&&(n||(L.DomUtil.hasClass(e,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(e.childNodes[0],"leaflet-draw-toolbar-top"),n=!0),i.appendChild(e));return i},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=t.target;for(var i in this._toolbars)this._toolbars[i]!==e&&this._toolbars[i].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null;var e=L.version.split(".");1===parseInt(e[0],10)&&2<=parseInt(e[1],10)?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var e,i=L.DomUtil.create("div","leaflet-draw-section"),n=0,o=this._toolbarClass||"",r=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,e=0;e<r.length;e++)r[e].enabled&&this._initModeHandler(r[e].handler,this._toolbarContainer,n++,o,r[e].title);if(n)return this._lastButtonIndex=--n,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),i.appendChild(this._toolbarContainer),i.appendChild(this._actionsContainer),i},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,i=this._actionButtons.length;e<i;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,i,n,o){var r=t.type;this._modes[r]={},this._modes[r].handler=t,this._modes[r].button=this._createButton({type:r,title:o,className:n+"-"+r,container:e,callback:this._modes[r].handler.enable,context:this._modes[r].handler}),this._modes[r].buttonIndex=i,this._modes[r].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!r.MSStream},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container),i=L.DomUtil.create("span","sr-only",t.container);e.href="#",e.appendChild(i),t.title&&(e.title=t.title,i.innerHTML=t.title),t.text&&(e.innerHTML=t.text,i.innerHTML=t.text);var n=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"touchstart",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,n,t.callback,t.context),e},_disposeButton:function(t,e){var i=this._detectIOS()?"touchstart":"click";L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"touchstart",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,i,e)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){var e,i,n,o,r=this._actionsContainer,s=this.getActions(t),a=s.length;for(i=0,n=this._actionButtons.length;i<n;i++)this._disposeButton(this._actionButtons[i].button,this._actionButtons[i].callback);for(this._actionButtons=[];r.firstChild;)r.removeChild(r.firstChild);for(var l=0;l<a;l++)"enabled"in s[l]&&!s[l].enabled||(e=L.DomUtil.create("li","",r),o=this._createButton({title:s[l].title,text:s[l].text,container:e,callback:s[l].callback,context:s[l].context}),this._actionButtons.push({button:o,callback:s[l].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,i=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=i+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._visible=!1,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container&&(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?0<t.subtext.length&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(0<t.subtext.length?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",t.text||t.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden")),this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),i=this._container;return this._container&&(this._visible&&(i.style.visibility="inherit"),L.DomUtil.setPosition(i,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(t,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(t){return[{enabled:t.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:t.completeShape,context:t},{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){for(var e in L.setOptions(this,t),this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(t){t.edit&&(void 0===t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),t.poly&&(t.poly=L.extend({},this.options.poly,t.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(t){var e=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return t.removeAllLayers&&e.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),e},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.setOptions(this,e),this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var i=L.version.split(".");1===parseInt(i[0],10)&&2<=parseInt(i[1],10)?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),t._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var e=new L.LayerGroup;this._featureGroup.eachLayer(function(t){t.edited&&(e.addLayer(t),t.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:e})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:(t instanceof L.Marker||t instanceof L.CircleMarker)&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):(t instanceof L.Marker||t instanceof L.CircleMarker)&&t.setLatLng(this._uneditedLayerProps[e].latlng),t.fire("revert-edited",{layer:t}))},_enableLayerEdit:function(t){var e,i,n=t.layer||t.target||t;this._backupLayer(n),this.options.poly&&(i=L.Util.extend({},this.options.poly),n.options.poly=i),this.options.selectedPathOptions&&((e=L.Util.extend({},this.options.selectedPathOptions)).maintainColor&&(e.color=n.options.color,e.fillColor=n.options.fillColor),n.options.original=L.extend({},n.options),n.options.editing=e),n instanceof L.Marker?(n.editing&&n.editing.enable(),n.dragging.enable(),n.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):n.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,e.editing&&e.editing.disable(),delete e.options.editing,delete e.options.original,this._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):e.editing.disable()},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_onMarkerDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_onTouchMove:function(t){var e=t.originalEvent.changedTouches[0],i=this._map.mouseEventToLayerPoint(e),n=this._map.layerPointToLatLng(i);t.target.setLatLng(n)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var i=L.version.split(".");1===parseInt(i[0],10)&&2<=parseInt(i[1],10)?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t){this._deletableLayers.addLayer(t),t.fire("revert-deleted",{layer:t})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(t){this._removeLayer({layer:t})},this),this.save()},_enableLayerDelete:function(t){(t.layer||t.target||t).on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e),e.fire("deleted")},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})},{}],14:[function(t,e,i){L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{minZoom:0,maxZoom:23,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1,type:"roadmap",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t),this._ready=!!window.google&&!!window.google.maps&&!!window.google.maps.Map,this._GAPIPromise=this._ready?Promise.resolve(window.google):new Promise(function(t,e){var i=0,n=null;n=setInterval(function(){return 10<=i?(clearInterval(n),e(new Error("window.google not found after 10 attempts"))):window.google&&window.google.maps&&window.google.maps.Map?(clearInterval(n),t(window.google)):void i++},500)}),this._tileCallbacks={},this._freshTiles={},this._imagesPerTile="hybrid"===this.options.type?2:1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(e){L.GridLayer.prototype.onAdd.call(this,e),this._initMutantContainer(),this._GAPIPromise.then(function(){if(this._ready=!0,this._map=e,this._initMutant(),e.on("viewreset",this._reset,this),e.on("move",this._update,this),e.on("zoomend",this._handleZoomAnim,this),e.on("resize",this._resize,this),google.maps.event.addListenerOnce(this._mutant,"idle",function(){this._checkZoomLevels(),this._mutantIsReady=!0}.bind(this)),e._controlCorners.bottomright.style.marginBottom="20px",e._controlCorners.bottomleft.style.marginBottom="20px",this._reset(),this._update(),this._subLayers)for(var t in this._subLayers)this._subLayers[t].setMap(this._mutant)}.bind(this))},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),t._container.removeChild(this._mutantContainer),this._mutantContainer=void 0,google.maps.event.clearListeners(t,"idle"),google.maps.event.clearListeners(this._mutant,"idle"),t.off("viewreset",this._reset,this),t.off("move",this._update,this),t.off("zoomend",this._handleZoomAnim,this),t.off("resize",this._resize,this),t._controlCorners&&(t._controlCorners.bottomright.style.marginBottom="0em",t._controlCorners.bottomleft.style.marginBottom="0em")},getAttribution:function(){return this.options.attribution},setOpacity:function(t){(this.options.opacity=t)<1&&L.DomUtil.setOpacity(this._mutantContainer,t)},setElementSize:function(t,e){t.style.width=e.x+"px",t.style.height=e.y+"px"},addGoogleLayer:function(e,i){return this._subLayers||(this._subLayers={}),this._GAPIPromise.then(function(){var t=new google.maps[e](i);return t.setMap(this._mutant),this._subLayers[e]=t}.bind(this))},removeGoogleLayer:function(t){var e=this._subLayers&&this._subLayers[t];e&&(e.setMap(null),delete this._subLayers[t])},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.zIndex="800",this._mutantContainer.style.pointerEvents="none",this._map.getContainer().appendChild(this._mutantContainer)),this.setOpacity(this.options.opacity),this.setElementSize(this._mutantContainer,this._map.getSize()),this._attachObserver(this._mutantContainer)},_initMutant:function(){if(this._ready&&this._mutantContainer){this._mutantCenter=new google.maps.LatLng(0,0);var t=new google.maps.Map(this._mutantContainer,{center:this._mutantCenter,zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1,styles:this.options.styles||{},backgroundColor:"transparent"});this._mutant=t,google.maps.event.addListenerOnce(t,"idle",function(){for(var t=this._mutantContainer.querySelectorAll("a"),e=0;e<t.length;e++)t[e].style.pointerEvents="auto"}.bind(this)),this.fire("spawned",{mapObject:t})}},_attachObserver:function(t){new MutationObserver(this._onMutations.bind(this)).observe(t,{childList:!0,subtree:!0})},_onMutations:function(t){for(var e=0;e<t.length;++e)for(var i=t[e],n=0;n<i.addedNodes.length;++n){var o=i.addedNodes[n];o instanceof HTMLImageElement?this._onMutatedImage(o):o instanceof HTMLElement&&(Array.prototype.forEach.call(o.querySelectorAll("img"),this._boundOnMutatedImage),Array.prototype.forEach.call(o.querySelectorAll('div[draggable=false][style*="text-align: center"]'),L.DomUtil.remove))}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+)/,_staticRegExp:/StaticMapService\.GetMapImage/,_onMutatedImage:function(t){var e,i=t.src.match(this._roadRegexp),n=0;if(i?(e={z:i[1],x:i[2],y:i[3]},1<this._imagesPerTile&&(n=t.style.zIndex=1)):((i=t.src.match(this._satRegexp))&&(e={x:i[1],y:i[2],z:i[3]}),n=0),e){var o=this._tileCoordsToKey(e);t.style.position="absolute",t.style.visibility="hidden";var r=o+"/"+n;if(this._freshTiles[r]=t,r in this._tileCallbacks&&this._tileCallbacks[r])this._tileCallbacks[r].pop()(t),this._tileCallbacks[r].length||delete this._tileCallbacks[r];else if(this._tiles[o]){var s=this._tiles[o].el,a=0===n?s.firstChild:s.firstChild.nextSibling,l=this._clone(t);s.replaceChild(l,a)}}else t.src.match(this._staticRegExp)&&(t.style.visibility="hidden")},createTile:function(t,i){var e=this._tileCoordsToKey(t),n=L.DomUtil.create("div");n.dataset.pending=this._imagesPerTile,i=i.bind(this,null,n);for(var o=0;o<this._imagesPerTile;o++){var r=e+"/"+o;if(r in this._freshTiles){var s=this._freshTiles[r];n.appendChild(this._clone(s)),n.dataset.pending--}else this._tileCallbacks[r]=this._tileCallbacks[r]||[],this._tileCallbacks[r].push(function(e){return function(t){e.appendChild(this._clone(t)),e.dataset.pending--,parseInt(e.dataset.pending)||i()}.bind(this)}.bind(this)(n))}return parseInt(n.dataset.pending)||L.Util.requestAnimFrame(i),n},_clone:function(t){var e=t.cloneNode(!0);return e.style.visibility="visible",e},_checkZoomLevels:function(){var t=this._map.getZoom(),e=this._mutant.getZoom();t&&e&&(e!==t||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(t){t!=this.options.maxNativeZoom&&(this.options.maxNativeZoom=t,this._resetView())},_reset:function(){this._initContainer()},_update:function(){if(this._mutant){var t=this._map.getCenter(),e=new google.maps.LatLng(t.lat,t.lng);this._mutant.setCenter(e);var i=this._map.getZoom(),n=i!==Math.round(i),o=this._mutant.getZoom();n||i==o||(this._mutant.setZoom(i),this._mutantIsReady&&this._checkZoomLevels())}L.GridLayer.prototype._update.call(this)},_resize:function(){var t=this._map.getSize();this._mutantContainer.style.width===t.x&&this._mutantContainer.style.height===t.y||(this.setElementSize(this._mutantContainer,t),this._mutant&&google.maps.event.trigger(this._mutant,"resize"))},_handleZoomAnim:function(){if(this._mutant){var t=this._map.getCenter(),e=new google.maps.LatLng(t.lat,t.lng);this._mutant.setCenter(e),this._mutant.setZoom(Math.round(this._map.getZoom()))}},_removeTile:function(t){if(this._mutant)return setTimeout(this._pruneTile.bind(this,t),1e3),L.GridLayer.prototype._removeTile.call(this,t)},_pruneTile:function(t){for(var e=this._mutant.getZoom(),i=t.split(":")[2],n=this._mutant.getBounds(),o=n.getSouthWest(),r=n.getNorthEast(),s=L.latLngBounds([[o.lat(),o.lng()],[r.lat(),r.lng()]]),a=0;a<this._imagesPerTile;a++){var l=t+"/"+a;if(l in this._freshTiles){var h=this._map&&this._keyToBounds(t);this._map&&h.overlaps(s)&&i==e||delete this._freshTiles[l]}}}}),L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)}},{}],15:[function(t,e,i){var n,o;n=this,o=function(t){"use strict";var e=Object.freeze;function l(t){var e,i,n,o;for(i=1,n=arguments.length;i<n;i++)for(e in o=arguments[i])t[e]=o[e];return t}Object.freeze=function(t){return t};var r=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function f(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var i=0;function h(t){return t._leaflet_id=t._leaflet_id||++i,t._leaflet_id}function n(t,e,i){var n,o,r,s;return s=function(){n=!1,o&&(r.apply(i,o),o=!1)},r=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(s,e),n=!0)}}function o(t,e,i){var n=e[1],o=e[0],r=n-o;return t===n&&i?t:((t-o)%r+r)%r+o}function a(){return!1}function s(t,e){var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function u(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function c(t){return u(t).split(/\s+/)}function d(t,e){for(var i in t.hasOwnProperty("options")||(t.options=t.options?r(t.options):{}),e)t.options[i]=e[i];return t.options}function p(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,n){return t.replace(m,function(t,e){var i=n[e];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(n)),i})}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function _(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function w(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function x(t){var e=+new Date,i=Math.max(0,16-(e-b));return b=e+i,window.setTimeout(t,i)}var k=window.requestAnimationFrame||w("RequestAnimationFrame")||x,T=window.cancelAnimationFrame||w("CancelAnimationFrame")||w("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function E(t,e,i){if(!i||k!==x)return k.call(window,f(t,e));t.call(e)}function C(t){t&&T.call(window,t)}var D=(Object.freeze||Object)({freeze:e,extend:l,create:r,bind:f,lastId:i,stamp:h,throttle:n,wrapNum:o,falseFn:a,formatNum:s,trim:u,splitWords:c,setOptions:d,getParamString:p,template:g,isArray:v,indexOf:_,emptyImageUrl:y,requestFn:k,cancelFn:T,requestAnimFrame:E,cancelAnimFrame:C});function M(){}M.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,n=r(i);for(var o in(n.constructor=e).prototype=n,this)this.hasOwnProperty(o)&&"prototype"!==o&&"__super__"!==o&&(e[o]=this[o]);return t.statics&&(l(e,t.statics),delete t.statics),t.includes&&(!function(t){if("undefined"==typeof L||!L||!L.Mixin)return;t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}(t.includes),l.apply(null,[n].concat(t.includes)),delete t.includes),n.options&&(t.options=l(r(n.options),t.options)),l(n,t),n._initHooks=[],n.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;t<e;t++)n._initHooks[t].call(this)}},e},M.include=function(t){return l(this.prototype,t),this},M.mergeOptions=function(t){return l(this.prototype.options,t),this},M.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var S={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else for(var o=0,r=(t=c(t)).length;o<r;o++)this._on(t[o],e,i);return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else for(var o=0,r=(t=c(t)).length;o<r;o++)this._off(t[o],e,i);else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n),i===this&&(i=void 0);for(var o={fn:e,ctx:i},r=n,s=0,a=r.length;s<a;s++)if(r[s].fn===e&&r[s].ctx===i)return;r.push(o)},_off:function(t,e,i){var n,o,r;if(this._events&&(n=this._events[t]))if(e){if(i===this&&(i=void 0),n)for(o=0,r=n.length;o<r;o++){var s=n[o];if(s.ctx===i&&s.fn===e)return s.fn=a,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(o,1)}}else{for(o=0,r=n.length;o<r;o++)n[o].fn=a;delete this._events[t]}},fire:function(t,e,i){if(!this.listens(t,i))return this;var n=l({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var r=0,s=o.length;r<s;r++){var a=o[r];a.fn.call(a.ctx||this,n)}this._firingCount--}}return i&&this._propagateEvent(n),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var o=f(function(){this.off(t,e,i).off(t,o,i)},this);return this.on(t,e,i).on(t,o,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[h(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[h(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,l({layer:t.target,propagatedFrom:t.target},t),!0)}};S.addEventListener=S.on,S.removeEventListener=S.clearAllEventListeners=S.off,S.addOneTimeEventListener=S.once,S.fireEvent=S.fire,S.hasEventListeners=S.listens;var P=M.extend(S);function N(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var I=Math.trunc||function(t){return 0<t?Math.floor(t):Math.ceil(t)};function A(t,e,i){return t instanceof N?t:v(t)?new N(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new N(t.x,t.y):new N(t,e,i)}function O(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function R(t,e){return!t||t instanceof O?t:new O(t,e)}function j(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function z(t,e){return t instanceof j?t:new j(t,e)}function $(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function F(t,e,i){return t instanceof $?t:v(t)&&"object"!=typeof t[0]?3===t.length?new $(t[0],t[1],t[2]):2===t.length?new $(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new $(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new $(t,e,i)}N.prototype={clone:function(){return new N(this.x,this.y)},add:function(t){return this.clone()._add(A(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(A(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new N(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new N(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=I(this.x),this.y=I(this.y),this},distanceTo:function(t){var e=(t=A(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=A(t)).x===this.x&&t.y===this.y},contains:function(t){return t=A(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+s(this.x)+", "+s(this.y)+")"}},O.prototype={extend:function(t){return t=A(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new N((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new N(this.min.x,this.max.y)},getTopRight:function(){return new N(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof N?A(t):R(t))instanceof O?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=R(t);var e=this.min,i=this.max,n=t.min,o=t.max,r=o.x>=e.x&&n.x<=i.x,s=o.y>=e.y&&n.y<=i.y;return r&&s},overlaps:function(t){t=R(t);var e=this.min,i=this.max,n=t.min,o=t.max,r=o.x>e.x&&n.x<i.x,s=o.y>e.y&&n.y<i.y;return r&&s},isValid:function(){return!(!this.min||!this.max)}},j.prototype={extend:function(t){var e,i,n=this._southWest,o=this._northEast;if(t instanceof $)i=e=t;else{if(!(t instanceof j))return t?this.extend(F(t)||z(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||o?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),o.lat=Math.max(i.lat,o.lat),o.lng=Math.max(i.lng,o.lng)):(this._southWest=new $(e.lat,e.lng),this._northEast=new $(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new j(new $(e.lat-n,e.lng-o),new $(i.lat+n,i.lng+o))},getCenter:function(){return new $((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new $(this.getNorth(),this.getWest())},getSouthEast:function(){return new $(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof $||"lat"in t?F(t):z(t);var e,i,n=this._southWest,o=this._northEast;return t instanceof j?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=o.lat&&e.lng>=n.lng&&i.lng<=o.lng},intersects:function(t){t=z(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&n.lat<=i.lat,s=o.lng>=e.lng&&n.lng<=i.lng;return r&&s},overlaps:function(t){t=z(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>e.lat&&n.lat<i.lat,s=o.lng>e.lng&&n.lng<i.lng;return r&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=z(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}};var B,q={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new O(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!($.prototype={equals:function(t,e){return!!t&&(t=F(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+s(this.lat,t)+", "+s(this.lng,t)+")"},distanceTo:function(t){return U.distance(this,F(t))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return z([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new $(this.lat,this.lng,this.alt)}}),wrapLatLng:function(t){var e=this.wrapLng?o(t.lng,this.wrapLng,!0):t.lng;return new $(this.wrapLat?o(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,o=e.lng-i.lng;if(0===n&&0===o)return t;var r=t.getSouthWest(),s=t.getNorthEast();return new j(new $(r.lat-n,r.lng-o),new $(s.lat-n,s.lng-o))}},U=l({},q,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,r=Math.sin((e.lat-t.lat)*i/2),s=Math.sin((e.lng-t.lng)*i/2),a=r*r+Math.cos(n)*Math.cos(o)*s*s,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),H={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=Math.sin(n*e);return new N(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new $((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(B=6378137*Math.PI,new O([-B,-B],[B,B]))};function V(t,e,i,n){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function W(t,e,i,n){return new V(t,e,i,n)}V.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new N((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var Z,G=l({},U,{code:"EPSG:3857",projection:H,transformation:(Z=.5/(Math.PI*H.R),W(Z,.5,-Z,.5))}),Y=l({},G,{code:"EPSG:900913"});function X(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function K(t,e){var i,n,o,r,s,a,l="";for(i=0,o=t.length;i<o;i++){for(n=0,r=(s=t[i]).length;n<r;n++)l+=(n?"L":"M")+(a=s[n]).x+" "+a.y;l+=e?Dt?"z":"x":""}return l||"M0 0"}var Q=document.documentElement.style,J="ActiveXObject"in window,tt=J&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),it=St("webkit"),nt=St("android"),ot=St("android 2")||St("android 3"),rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),st=nt&&St("Google")&&rt<537&&!("AudioNode"in window),at=!!window.opera,lt=St("chrome"),ht=St("gecko")&&!it&&!at&&!J,ut=!lt&&St("safari"),ct=St("phantom"),dt="OTransition"in Q,pt=0===navigator.platform.indexOf("Win"),ft=J&&"transition"in Q,mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ot,gt="MozPerspective"in Q,vt=!window.L_DISABLE_3D&&(ft||mt||gt)&&!dt&&!ct,_t="undefined"!=typeof orientation||St("mobile"),yt=_t&&it,wt=_t&&mt,bt=!window.PointerEvent&&window.MSPointerEvent,xt=!(!window.PointerEvent&&!bt),Lt=!window.L_NO_TOUCH&&(xt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),kt=_t&&at,Tt=_t&&ht,Et=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),Ct=!!document.createElement("canvas").getContext,Dt=!(!document.createElementNS||!X("svg").createSVGRect),Mt=!Dt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function St(t){return 0<=navigator.userAgent.toLowerCase().indexOf(t)}var Pt=(Object.freeze||Object)({ie:J,ielt9:tt,edge:et,webkit:it,android:nt,android23:ot,androidStock:st,opera:at,chrome:lt,gecko:ht,safari:ut,phantom:ct,opera12:dt,win:pt,ie3d:ft,webkit3d:mt,gecko3d:gt,any3d:vt,mobile:_t,mobileWebkit:yt,mobileWebkit3d:wt,msPointer:bt,pointer:xt,touch:Lt,mobileOpera:kt,mobileGecko:Tt,retina:Et,canvas:Ct,svg:Dt,vml:Mt}),Nt=bt?"MSPointerDown":"pointerdown",It=bt?"MSPointerMove":"pointermove",At=bt?"MSPointerUp":"pointerup",Ot=bt?"MSPointerCancel":"pointercancel",Rt=["INPUT","SELECT","OPTION"],jt={},zt=!1,$t=0;function Ft(t,e,i,n){var o,r,s,a,l,h,u,c,d,p;return"touchstart"===e?(u=t,c=i,d=n,p=f(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Rt.indexOf(t.target.tagName)<0))return;oe(t)}Ht(t,c)}),u["_leaflet_touchstart"+d]=p,u.addEventListener(Nt,p,!1),zt||(document.documentElement.addEventListener(Nt,Bt,!0),document.documentElement.addEventListener(It,qt,!0),document.documentElement.addEventListener(At,Ut,!0),document.documentElement.addEventListener(Ot,Ut,!0),zt=!0)):"touchmove"===e?(l=i,h=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Ht(t,l)},(a=t)["_leaflet_touchmove"+n]=h,a.addEventListener(It,h,!1)):"touchend"===e&&(r=i,s=function(t){Ht(t,r)},(o=t)["_leaflet_touchend"+n]=s,o.addEventListener(At,s,!1),o.addEventListener(Ot,s,!1)),this}function Bt(t){jt[t.pointerId]=t,$t++}function qt(t){jt[t.pointerId]&&(jt[t.pointerId]=t)}function Ut(t){delete jt[t.pointerId],$t--}function Ht(t,e){for(var i in t.touches=[],jt)t.touches.push(jt[i]);t.changedTouches=[t],e(t)}var Vt=bt?"MSPointerDown":xt?"pointerdown":"touchstart",Wt=bt?"MSPointerUp":xt?"pointerup":"touchend",Zt="_leaflet_";function Gt(t,o,e){var r,s,a=!1;function i(t){var e;if(xt){if(!et||"mouse"===t.pointerType)return;e=$t}else e=t.touches.length;if(!(1<e)){var i=Date.now(),n=i-(r||i);s=t.touches?t.touches[0]:t,a=0<n&&n<=250,r=i}}function n(t){if(a&&!s.cancelBubble){if(xt){if(!et||"mouse"===t.pointerType)return;var e,i,n={};for(i in s)e=s[i],n[i]=e&&e.bind?e.bind(s):e;s=n}s.type="dblclick",o(s),r=null}}return t[Zt+Vt+e]=i,t[Zt+Wt+e]=n,t[Zt+"dblclick"+e]=o,t.addEventListener(Vt,i,!1),t.addEventListener(Wt,n,!1),t.addEventListener("dblclick",o,!1),this}function Yt(t,e){var i=t[Zt+Vt+e],n=t[Zt+Wt+e],o=t[Zt+"dblclick"+e];return t.removeEventListener(Vt,i,!1),t.removeEventListener(Wt,n,!1),et||t.removeEventListener("dblclick",o,!1),this}function Xt(t,e,i,n){if("object"==typeof e)for(var o in e)Jt(t,o,e[o],i);else for(var r=0,s=(e=c(e)).length;r<s;r++)Jt(t,e[r],i,n);return this}var Kt="_leaflet_events";function Qt(t,e,i,n){if("object"==typeof e)for(var o in e)te(t,o,e[o],i);else if(e)for(var r=0,s=(e=c(e)).length;r<s;r++)te(t,e[r],i,n);else{for(var a in t[Kt])te(t,a,t[Kt][a]);delete t[Kt]}return this}function Jt(e,t,i,n){var o=t+h(i)+(n?"_"+h(n):"");if(e[Kt]&&e[Kt][o])return this;var r=function(t){return i.call(n||e,t||window.event)},s=r;xt&&0===t.indexOf("touch")?Ft(e,t,r,o):!Lt||"dblclick"!==t||xt&&lt?"addEventListener"in e?"mousewheel"===t?e.addEventListener("onwheel"in e?"wheel":"mousewheel",r,!1):"mouseenter"===t||"mouseleave"===t?(r=function(t){t=t||window.event,pe(e,t)&&s(t)},e.addEventListener("mouseenter"===t?"mouseover":"mouseout",r,!1)):("click"===t&&nt&&(r=function(t){!function(t,e){var i=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=he&&i-he;if(n&&100<n&&n<500||t.target._simulatedClick&&!t._simulated)return re(t);he=i,e(t)}(t,s)}),e.addEventListener(t,r,!1)):"attachEvent"in e&&e.attachEvent("on"+t,r):Gt(e,r,o),e[Kt]=e[Kt]||{},e[Kt][o]=r}function te(t,e,i,n){var o,r,s,a=e+h(i)+(n?"_"+h(n):""),l=t[Kt]&&t[Kt][a];if(!l)return this;xt&&0===e.indexOf("touch")?(s=(o=t)["_leaflet_"+(r=e)+a],"touchstart"===r?o.removeEventListener(Nt,s,!1):"touchmove"===r?o.removeEventListener(It,s,!1):"touchend"===r&&(o.removeEventListener(At,s,!1),o.removeEventListener(Ot,s,!1))):!Lt||"dblclick"!==e||xt&&lt?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",l,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,l,!1):"detachEvent"in t&&t.detachEvent("on"+e,l):Yt(t,a),t[Kt][a]=null}function ee(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,de(t),this}function ie(t){return Jt(t,"mousewheel",ee),this}function ne(t){return Xt(t,"mousedown touchstart dblclick",ee),Jt(t,"click",ce),this}function oe(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function re(t){return oe(t),ee(t),this}function se(t,e){if(!e)return new N(t.clientX,t.clientY);var i=e.getBoundingClientRect(),n=i.width/e.offsetWidth||1,o=i.height/e.offsetHeight||1;return new N(t.clientX/n-i.left-e.clientLeft,t.clientY/o-i.top-e.clientTop)}var ae=pt&&lt?2*window.devicePixelRatio:ht?window.devicePixelRatio:1;function le(t){return et?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/ae:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var he,ue={};function ce(t){ue[t.type]=!0}function de(t){var e=ue[t.type];return ue[t.type]=!1,e}function pe(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}var fe,me,ge,ve,_e,ye=(Object.freeze||Object)({on:Xt,off:Qt,stopPropagation:ee,disableScrollPropagation:ie,disableClickPropagation:ne,preventDefault:oe,stop:re,getMousePosition:se,getWheelDelta:le,fakeStop:ce,skipped:de,isExternalTarget:pe,addListener:Xt,removeListener:Qt}),we=Re(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),be=Re(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xe="webkitTransition"===be||"OTransition"===be?be+"End":"transitionend";function Le(t){return"string"==typeof t?document.getElementById(t):t}function ke(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i}function Te(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function Ee(t){var e=t.parentNode;e&&e.removeChild(t)}function Ce(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function De(t){var e=t.parentNode;e.lastChild!==t&&e.appendChild(t)}function Me(t){var e=t.parentNode;e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Se(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=Ae(t);return 0<i.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function Pe(t,e){if(void 0!==t.classList)for(var i=c(e),n=0,o=i.length;n<o;n++)t.classList.add(i[n]);else if(!Se(t,e)){var r=Ae(t);Ie(t,(r?r+" ":"")+e)}}function Ne(t,e){void 0!==t.classList?t.classList.remove(e):Ie(t,u((" "+Ae(t)+" ").replace(" "+e+" "," ")))}function Ie(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function Ae(t){return void 0===t.className.baseVal?t.className:t.className.baseVal}function Oe(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}(t,e)}function Re(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function je(t,e,i){var n=e||new N(0,0);t.style[we]=(ft?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function ze(t,e){t._leaflet_pos=e,vt?je(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function $e(t){return t._leaflet_pos||new N(0,0)}if("onselectstart"in document)fe=function(){Xt(window,"selectstart",oe)},me=function(){Qt(window,"selectstart",oe)};else{var Fe=Re(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);fe=function(){if(Fe){var t=document.documentElement.style;ge=t[Fe],t[Fe]="none"}},me=function(){Fe&&(document.documentElement.style[Fe]=ge,ge=void 0)}}function Be(){Xt(window,"dragstart",oe)}function qe(){Qt(window,"dragstart",oe)}function Ue(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(He(),_e=(ve=t).style.outline,t.style.outline="none",Xt(window,"keydown",He))}function He(){ve&&(ve.style.outline=_e,_e=ve=void 0,Qt(window,"keydown",He))}var Ve=(Object.freeze||Object)({TRANSFORM:we,TRANSITION:be,TRANSITION_END:xe,get:Le,getStyle:ke,create:Te,remove:Ee,empty:Ce,toFront:De,toBack:Me,hasClass:Se,addClass:Pe,removeClass:Ne,setClass:Ie,getClass:Ae,setOpacity:Oe,testProp:Re,setTransform:je,setPosition:ze,getPosition:$e,disableTextSelection:fe,enableTextSelection:me,disableImageDrag:Be,enableImageDrag:qe,preventOutline:Ue,restoreOutline:He}),We=P.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=$e(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),ze(this._el,i),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ze=P.extend({options:{crs:G,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=d(this,e),this._initContainer(t),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(F(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=be&&vt&&!kt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Xt(this._proxy,xe,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if((e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(F(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i)&&(void 0!==i.animate&&(i.zoom=l({animate:i.animate},i.zoom),i.pan=l({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),r=(t instanceof N?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/n),s=this.containerPointToLatLng(o.add(r));return this.setView(s,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():z(t);var i=A(e.paddingTopLeft||e.padding||[0,0]),n=A(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,i.add(n));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var r=n.subtract(i).divideBy(2),s=this.project(t.getSouthWest(),o),a=this.project(t.getNorthEast(),o);return{center:this.unproject(s.add(a).divideBy(2).add(r),o),zoom:o}},fitBounds:function(t,e){if(!(t=z(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=A(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new We,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){Pe(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(r,s,t){if(!1===(t=t||{}).animate||!vt)return this.setView(r,s,t);this._stop();var a=this.project(this.getCenter()),l=this.project(r),e=this.getSize(),h=this._zoom;r=F(r),s=void 0===s?h:s;var u=Math.max(e.x,e.y),n=u*this.getZoomScale(h,s),c=l.distanceTo(a)||1,d=1.42,o=d*d;function i(t){var e=(n*n-u*u+(t?-1:1)*o*o*c*c)/(2*(t?n:u)*o*c),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var m=i(0);function g(t){return u*(f(m)*(p(e=m+d*t)/f(e))-p(m))/o;var e}var v=Date.now(),_=(i(1)-m)/d,y=t.duration?1e3*t.duration:1e3*_*.8;return this._moveStart(!0,t.noMoveStart),function t(){var e,i,n=(Date.now()-v)/y,o=(e=n,(1-Math.pow(1-e,1.5))*_);n<=1?(this._flyToFrame=E(t,this),this._move(this.unproject(a.add(l.subtract(a).multiplyBy(g(o)/c)),h),this.getScaleZoom(u/(i=o,u*(f(m)/f(m+d*i))),h),{flyTo:!0})):this._move(r,s)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return(t=z(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,z(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=l({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),o=i.divideBy(2).round(),r=n.subtract(o);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=l({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=f(this._handleGeolocationResponse,this),i=f(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=new $(t.coords.latitude,t.coords.longitude),i=e.toBounds(t.coords.accuracy),n=this._locateOptions;if(n.setView){var o=this.getBoundsZoom(i);this.setView(e,n.maxZoom?Math.min(o,n.maxZoom):o)}var r={latlng:e,bounds:i,timestamp:t.timestamp};for(var s in t.coords)"number"==typeof t.coords[s]&&(r[s]=t.coords[s]);this.fire("locationfound",r)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),Ee(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)Ee(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=Te("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new j(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=z(t),i=A(i||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),l=this.getSize().subtract(i),h=R(this.project(a,n),this.project(s,n)).getSize(),u=vt?this.options.zoomSnap:1,c=l.x/h.x,d=l.y/h.y,p=e?Math.max(c,d):Math.min(c,d);return n=this.getScaleZoom(p,n),u&&(n=Math.round(n/(u/100))*(u/100),n=e?Math.ceil(n/u)*u:Math.floor(n/u)*u),Math.max(o,Math.min(r,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new N(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new O(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(F(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(A(t),e)},layerPointToLatLng:function(t){var e=A(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(F(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(F(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(z(t))},distance:function(t,e){return this.options.crs.distance(F(t),F(e))},containerPointToLayerPoint:function(t){return A(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return A(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(A(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(t)))},mouseEventToContainerPoint:function(t){return se(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Le(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Xt(e,"scroll",this._onScroll,this),this._containerId=h(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt,Pe(t,"leaflet-container"+(Lt?" leaflet-touch":"")+(Et?" leaflet-retina":"")+(tt?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ke(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ze(this._mapPane,new N(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Pe(t.markerPane,"leaflet-zoom-hide"),Pe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){ze(this._mapPane,new N(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,!1)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ze(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={};var e=t?Qt:Xt;e((this._targets[h(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),vt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=E(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],o="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,s=!1;r;){if((i=this._targets[h(r)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){s=!0;break}if(i&&i.listens(e,!0)){if(o&&!pe(r,t))break;if(n.push(i),o)break}if(r===this._container)break;r=r.parentNode}return n.length||s||o||!pe(r,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!de(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e||Ue(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type){var n=l({},t);n.type="preclick",this._fireDOMEvent(n,n.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e))).length){var o=i[0];"contextmenu"===e&&o.listens(e,!0)&&oe(t);var r={originalEvent:t};if("keypress"!==t.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);r.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=s?o.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var a=0;a<i.length;a++)if(i[a].fire(e,r,!0),r.originalEvent._stopped||!1===i[a].options.bubblingMouseEvents&&-1!==_(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return $e(this._mapPane)||new N(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return R([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),r=new O(n.subtract(o),n.add(o)),s=this._getBoundsOffset(r,i,e);return s.round().equals([0,0])?t:this.unproject(n.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new O(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=R(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),o=n.min.subtract(t.min),r=n.max.subtract(t.max);return new N(this._rebound(o.x,-r.x),this._rebound(o.y,-r.y))},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=vt?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ne(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i))&&(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=Te("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=we,i=this._proxy.style[e];je(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();je(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ee(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(o))&&(E(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,Pe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ne(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),E(function(){this._moveEnd(!0)},this))}});var Ge=M.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return Pe(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this},remove:function(){return this._map&&(Ee(this._container),this.onRemove&&this.onRemove(this._map),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}}),Ye=function(t){return new Ge(t)};Ze.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var n=this._controlCorners={},o="leaflet-",r=this._controlContainer=Te("div",o+"control-container",this._container);function t(t,e){var i=o+t+" "+o+e;n[t+e]=Te("div",i,r)}t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Ee(this._controlCorners[t]);Ee(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Xe=Ge.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){for(var n in d(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ge.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(h(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){Pe(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(Pe(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):Ne(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ne(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=Te("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),ne(e),ie(e);var n=this._form=Te("form",t+"-list");i&&(this._map.on("click",this.collapse,this),nt||Xt(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=Te("a",t+"-toggle",e);o.href="#",o.title="Layers",Lt?(Xt(o,"click",re),Xt(o,"click",this.expand,this)):Xt(o,"focus",this.expand,this),i||this.expand(),this._baseLayersList=Te("div",t+"-base",n),this._separator=Te("div",t+"-separator",n),this._overlaysList=Te("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&h(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(f(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ce(this._baseLayersList),Ce(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,o=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<o,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(h(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers",n),this._layerControlInputs.push(e),e.layerId=h(t.layer),Xt(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var r=document.createElement("div");return i.appendChild(r),r.appendChild(e),r.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],o=[];this._handlingClick=!0;for(var r=i.length-1;0<=r;r--)t=i[r],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||o.push(e);for(r=0;r<o.length;r++)this._map.hasLayer(o[r])&&this._map.removeLayer(o[r]);for(r=0;r<n.length;r++)this._map.hasLayer(n[r])||this._map.addLayer(n[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),o=i.length-1;0<=o;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Ke=Ge.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=Te("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,o){var r=Te("a",i,n);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),ne(r),Xt(r,"click",re),Xt(r,"click",o,this),Xt(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";Ne(this._zoomInButton,e),Ne(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&Pe(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&Pe(this._zoomInButton,e)}});Ze.mergeOptions({zoomControl:!0}),Ze.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ke,this.addControl(this.zoomControl))});var Qe=Ge.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=Te("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=Te("div",e,i)),t.imperial&&(this._iScale=Te("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,o=3.2808399*t;5280<o?(e=o/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i=10<=i?10:5<=i?5:3<=i?3:2<=i?2:1)}}),Je=Ge.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){d(this,t),this._attributions={}},onAdd:function(t){for(var e in(t.attributionControl=this)._container=Te("div","leaflet-control-attribution"),ne(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}});Ze.mergeOptions({attributionControl:!0}),Ze.addInitHook(function(){this.options.attributionControl&&(new Je).addTo(this)});Ge.Layers=Xe,Ge.Zoom=Ke,Ge.Scale=Qe,Ge.Attribution=Je,Ye.layers=function(t,e,i){return new Xe(t,e,i)},Ye.zoom=function(t){return new Ke(t)},Ye.scale=function(t){return new Qe(t)},Ye.attribution=function(t){return new Je(t)};var ti=M.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}});ti.addTo=function(t,e){return t.addHandler(e,this),this};var ei,ii={Events:S},ni=Lt?"touchstart mousedown":"mousedown",oi={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ri={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},si=P.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){d(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(Xt(this._dragStartTarget,ni,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(si._dragging===this&&this.finishDrag(),Qt(this._dragStartTarget,ni,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!Se(this._element,"leaflet-zoom-anim")&&!(si._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||((si._dragging=this)._preventOutline&&Ue(this._element),Be(),fe(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new N(e.clientX,e.clientY),Xt(document,ri[t.type],this._onMove,this),Xt(document,oi[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&1<t.touches.length)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new N(e.clientX,e.clientY).subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(oe(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=$e(this._element).subtract(i),Pe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Pe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,C(this._animRequest),this._lastEvent=t,this._animRequest=E(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ze(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in Ne(document.body,"leaflet-dragging"),this._lastTarget&&(Ne(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ri)Qt(document,ri[t],this._onMove,this),Qt(document,oi[t],this._onUp,this);qe(),me(),this._moved&&this._moving&&(C(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,si._dragging=!1}});function ai(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=function(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,function t(e,i,n,o,r){var s,a,l,h=0;for(a=o+1;a<=r-1;a++)l=di(e[a],e[o],e[r],!0),h<l&&(s=a,h=l);n<h&&(i[s]=1,t(e,i,n,o,s),t(e,i,n,s,r))}(t,n,e,0,i-1);var o,r=[];for(o=0;o<i;o++)n[o]&&r.push(t[o]);return r}(t=function(t,e){for(var i=[t[0]],n=1,o=0,r=t.length;n<r;n++)s=t[n],a=t[o],void 0,l=a.x-s.x,h=a.y-s.y,e<l*l+h*h&&(i.push(t[n]),o=n);var s,a,l,h;o<r-1&&i.push(t[r-1]);return i}(t,i),i)}function li(t,e,i){return Math.sqrt(di(t,e,i,!0))}function hi(t,e,i,n,o){var r,s,a,l=n?ei:ci(t,i),h=ci(e,i);for(ei=h;;){if(!(l|h))return[t,e];if(l&h)return!1;a=ci(s=ui(t,e,r=l||h,i,o),i),r===l?(t=s,l=a):(e=s,h=a)}}function ui(t,e,i,n,o){var r,s,a=e.x-t.x,l=e.y-t.y,h=n.min,u=n.max;return 8&i?(r=t.x+a*(u.y-t.y)/l,s=u.y):4&i?(r=t.x+a*(h.y-t.y)/l,s=h.y):2&i?(r=u.x,s=t.y+l*(u.x-t.x)/a):1&i&&(r=h.x,s=t.y+l*(h.x-t.x)/a),new N(r,s,o)}function ci(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function di(t,e,i,n){var o,r=e.x,s=e.y,a=i.x-r,l=i.y-s,h=a*a+l*l;return 0<h&&(1<(o=((t.x-r)*a+(t.y-s)*l)/h)?(r=i.x,s=i.y):0<o&&(r+=a*o,s+=l*o)),a=t.x-r,l=t.y-s,n?a*a+l*l:new N(r,s)}function pi(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function fi(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),pi(t)}var mi=(Object.freeze||Object)({simplify:ai,pointToSegmentDistance:li,closestPointOnSegment:function(t,e,i){return di(t,e,i)},clipSegment:hi,_getEdgeIntersection:ui,_getBitCode:ci,_sqClosestPointOnSegment:di,isFlat:pi,_flat:fi});function gi(t,e,i){var n,o,r,s,a,l,h,u,c,d=[1,4,2,8];for(o=0,h=t.length;o<h;o++)t[o]._code=ci(t[o],e);for(s=0;s<4;s++){for(u=d[s],n=[],o=0,r=(h=t.length)-1;o<h;r=o++)a=t[o],l=t[r],a._code&u?l._code&u||((c=ui(l,a,u,e,i))._code=ci(c,e),n.push(c)):(l._code&u&&((c=ui(l,a,u,e,i))._code=ci(c,e),n.push(c)),n.push(a));t=n}return t}var vi,_i=(Object.freeze||Object)({clipPolygon:gi}),yi={project:function(t){return new N(t.lng,t.lat)},unproject:function(t){return new $(t.y,t.x)},bounds:new O([-180,-90],[180,90])},wi={R:6378137,R_MINOR:6356752.314245179,bounds:new O([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,o=this.R_MINOR/i,r=Math.sqrt(1-o*o),s=r*Math.sin(n),a=Math.tan(Math.PI/4-n/2)/Math.pow((1-s)/(1+s),r/2);return n=-i*Math.log(Math.max(a,1e-10)),new N(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,o=this.R_MINOR/n,r=Math.sqrt(1-o*o),s=Math.exp(-t.y/n),a=Math.PI/2-2*Math.atan(s),l=0,h=.1;l<15&&1e-7<Math.abs(h);l++)e=r*Math.sin(a),e=Math.pow((1-e)/(1+e),r/2),a+=h=Math.PI/2-2*Math.atan(s*e)-a;return new $(a*i,t.x*i/n)}},bi=(Object.freeze||Object)({LonLat:yi,Mercator:wi,SphericalMercator:H}),xi=l({},U,{code:"EPSG:3395",projection:wi,transformation:(vi=.5/(Math.PI*wi.R),W(vi,.5,-vi,.5))}),Li=l({},U,{code:"EPSG:4326",projection:yi,transformation:W(1/180,1,-1/180,.5)}),ki=l({},q,{projection:yi,transformation:W(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});q.Earth=U,q.EPSG3395=xi,q.EPSG3857=G,q.EPSG900913=Y,q.EPSG4326=Li,q.Simple=ki;var Ti=P.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[h(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[h(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ze.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=h(t);return this._layers[e]||((this._layers[e]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=h(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return!!t&&h(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?v(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[h(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=h(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ei=Ti.extend({initialize:function(t,e){var i,n;if(d(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return h(t)}}),Ci=Ei.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Ei.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Ei.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new j;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Di=M.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var o=A(n),r=A("shadow"===e&&i.shadowAnchor||i.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Et&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});var Mi=Di.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Mi.imagePath||(Mi.imagePath=this._detectIconPath()),(this.options.imagePath||Mi.imagePath)+Di.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=Te("div","leaflet-default-icon-path",document.body),e=ke(t,"background-image")||ke(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Si=ti.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new si(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Pe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ne(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,r=L.DomUtil.getPosition(e._icon),s=i.getPixelBounds(),a=i.getPixelOrigin(),l=R(s.min._subtract(a).add(o),s.max._subtract(a).subtract(o));if(!l.contains(r)){var h=A((Math.max(l.max.x,r.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,r.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,r.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,r.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(n);i.panBy(h,{animate:!1}),this._draggable._newPos._add(h),this._draggable._startPos._add(h),L.DomUtil.setPosition(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=E(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=$e(e._icon),o=e._map.layerPointToLatLng(n);i&&ze(i,n),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Pi=Ti.extend({options:{icon:new Mi,interactive:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(t,e){d(this,e),this._latlng=F(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),Pe(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),r=!1;o!==this._shadow&&(this._removeShadow(),r=!0),o&&(Pe(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&r&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Ee(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ee(this._shadow),this._shadow=null},_setPos:function(t){ze(this._icon,t),this._shadow&&ze(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(Pe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Si)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Si(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;Oe(this._icon,t),this._shadow&&Oe(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Ni=Ti.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return d(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Ii=Ni.extend({options:{fill:!0,radius:10},initialize:function(t,e){d(this,e),this._latlng=F(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=F(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Ni.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new O(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Ai=Ii.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=l({},i,{radius:e})),d(this,e),this._latlng=F(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new j(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Ni.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===U.distance){var o=Math.PI/180,r=this._mRadius/U.R/o,s=i.project([e+r,t]),a=i.project([e-r,t]),l=s.add(a).divideBy(2),h=i.unproject(l).lat,u=Math.acos((Math.cos(r*o)-Math.sin(e*o)*Math.sin(h*o))/(Math.cos(e*o)*Math.cos(h*o)))/o;(isNaN(u)||0===u)&&(u=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-i.project([h,t-u]).x,this._radiusY=l.y-s.y}else{var c=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(c).x}this._updateBounds()}});var Oi=Ni.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){d(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,o=null,r=di,s=0,a=this._parts.length;s<a;s++)for(var l=this._parts[s],h=1,u=l.length;h<u;h++){var c=r(t,e=l[h-1],i=l[h],!0);c<n&&(n=c,o=r(t,e,i))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,r,s,a=this._rings[0],l=a.length;if(!l)return null;for(e=t=0;t<l-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(n=t=0;t<l-1;t++)if(o=a[t],r=a[t+1],e<(n+=i=o.distanceTo(r)))return s=(n-e)/i,this._map.layerPointToLatLng([r.x-s*(r.x-o.x),r.y-s*(r.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=F(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new j,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return pi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=pi(t),n=0,o=t.length;n<o;n++)i?(e[n]=F(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new O;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),i=new N(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(i),t.max._add(i),this._pxBounds=t)},_projectLatlngs:function(t,e,i){var n,o,r=t[0]instanceof $,s=t.length;if(r){for(o=[],n=0;n<s;n++)o[n]=this._map.latLngToLayerPoint(t[n]),i.extend(o[n]);e.push(o)}else for(n=0;n<s;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,i,n,o,r,s,a,l=this._parts;for(n=e=0,o=this._rings.length;e<o;e++)for(i=0,r=(a=this._rings[e]).length;i<r-1;i++)(s=hi(a[i],a[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(s[0]),s[1]===a[i+1]&&i!==r-2||(l[n].push(s[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=ai(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,o,r,s,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,r=this._parts.length;i<r;i++)for(n=0,o=(s=(a=this._parts[i]).length)-1;n<s;o=n++)if((e||0!==n)&&li(t,a[o],a[n])<=l)return!0;return!1}});Oi._flat=fi;var Ri=Oi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,r,s,a,l,h=this._rings[0],u=h.length;if(!u)return null;for(r=s=a=0,t=0,e=u-1;t<u;e=t++)i=h[t],n=h[e],o=i.y*n.x-n.y*i.x,s+=(i.x+n.x)*o,a+=(i.y+n.y)*o,r+=3*o;return l=0===r?h[0]:[s/r,a/r],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=Oi.prototype._convertLatLngs.call(this,t),i=e.length;return 2<=i&&e[0]instanceof $&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Oi.prototype._setLatLngs.call(this,t),pi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return pi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new N(e,e);if(t=new O(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,o=0,r=this._rings.length;o<r;o++)(n=gi(this._rings[o],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,o,r,s,a,l,h=!1;if(!this._pxBounds.contains(t))return!1;for(o=0,a=this._parts.length;o<a;o++)for(r=0,s=(l=(e=this._parts[o]).length)-1;r<l;s=r++)i=e[r],n=e[s],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(h=!h);return h||Oi.prototype._containsPoint.call(this,t,!0)}});var ji=Ci.extend({initialize:function(t,e){d(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,o=v(t)?t:t.features;if(o){for(e=0,i=o.length;e<i;e++)((n=o[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var s=zi(t,r);return s?(s.feature=Hi(t),s.defaultOptions=s.options,this.resetStyle(s),r.onEachFeature&&r.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return t.options=l({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}});function zi(t,e){var i,n,o,r,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,l=[],h=e&&e.pointToLayer,u=e&&e.coordsToLatLng||$i;if(!a&&!s)return null;switch(s.type){case"Point":return i=u(a),h?h(t,i):new Pi(i);case"MultiPoint":for(o=0,r=a.length;o<r;o++)i=u(a[o]),l.push(h?h(t,i):new Pi(i));return new Ci(l);case"LineString":case"MultiLineString":return n=Fi(a,"LineString"===s.type?0:1,u),new Oi(n,e);case"Polygon":case"MultiPolygon":return n=Fi(a,"Polygon"===s.type?1:2,u),new Ri(n,e);case"GeometryCollection":for(o=0,r=s.geometries.length;o<r;o++){var c=zi({geometry:s.geometries[o],type:"Feature",properties:t.properties},e);c&&l.push(c)}return new Ci(l);default:throw new Error("Invalid GeoJSON object.")}}function $i(t){return new $(t[1],t[0],t[2])}function Fi(t,e,i){for(var n,o=[],r=0,s=t.length;r<s;r++)n=e?Fi(t[r],e-1,i):(i||$i)(t[r]),o.push(n);return o}function Bi(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[s(t.lng,e),s(t.lat,e),s(t.alt,e)]:[s(t.lng,e),s(t.lat,e)]}function qi(t,e,i,n){for(var o=[],r=0,s=t.length;r<s;r++)o.push(e?qi(t[r],e-1,i,n):Bi(t[r],n));return!e&&i&&o.push(o[0]),o}function Ui(t,e){return t.feature?l({},t.feature,{geometry:e}):Hi(e)}function Hi(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Vi={toGeoJSON:function(t){return Ui(this,{type:"Point",coordinates:Bi(this.getLatLng(),t)})}};function Wi(t,e){return new ji(t,e)}Pi.include(Vi),Ai.include(Vi),Ii.include(Vi),Oi.include({toGeoJSON:function(t){var e=!pi(this._latlngs);return Ui(this,{type:(e?"Multi":"")+"LineString",coordinates:qi(this._latlngs,e?1:0,!1,t)})}}),Ri.include({toGeoJSON:function(t){var e=!pi(this._latlngs),i=e&&!pi(this._latlngs[0]),n=qi(this._latlngs,i?2:e?1:0,!0,t);return e||(n=[n]),Ui(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),Ei.include({toMultiPoint:function(e){var i=[];return this.eachLayer(function(t){i.push(t.toGeoJSON(e).geometry.coordinates)}),Ui(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(n){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(n);var o="GeometryCollection"===t,r=[];return this.eachLayer(function(t){if(t.toGeoJSON){var e=t.toGeoJSON(n);if(o)r.push(e.geometry);else{var i=Hi(e);"FeatureCollection"===i.type?r.push.apply(r,i.features):r.push(i)}}}),o?Ui(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var Zi=Wi,Gi=Ti.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=z(e),d(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Pe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ee(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&De(this._image),this},bringToBack:function(){return this._map&&Me(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=z(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:Te("img");Pe(e,"leaflet-image-layer"),this._zoomAnimated&&Pe(e,"leaflet-zoom-animated"),this.options.className&&Pe(e,this.options.className),e.onselectstart=a,e.onmousemove=a,e.onload=f(this.fire,this,"load"),e.onerror=f(this._overlayOnError,this,"error"),this.options.crossOrigin&&(e.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;je(this._image,i,e)},_reset:function(){var t=this._image,e=new O(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();ze(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){Oe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Yi=Gi.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:Te("video");if(Pe(e,"leaflet-image-layer"),this._zoomAnimated&&Pe(e,"leaflet-zoom-animated"),e.onselectstart=a,e.onmousemove=a,e.onloadeddata=f(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),n=[],o=0;o<i.length;o++)n.push(i[o].src);this._url=0<i.length?n:[e.src]}else{v(this._url)||(this._url=[this._url]),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var r=0;r<this._url.length;r++){var s=Te("source");s.src=this._url[r],e.appendChild(s)}}}});var Xi=Ti.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){d(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Oe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Oe(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(Oe(this._container,0),this._removeTimeout=setTimeout(f(Ee,void 0,this._container),200)):Ee(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=F(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&De(this._container),this},bringToBack:function(){return this._map&&Me(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=A(this.options.offset),i=this._getAnchor();this._zoomAnimated?ze(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),Ki=Xi.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Xi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ni||this._source.on("preclick",ee))},onRemove:function(t){Xi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ni||this._source.off("preclick",ee))},getEvents:function(){var t=Xi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=Te("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=Te("div",t+"-content-wrapper",e);if(this._contentNode=Te("div",t+"-content",i),ne(i),ie(this._contentNode),Xt(i,"contextmenu",ee),this._tipContainer=Te("div",t+"-tip-container",e),this._tip=Te("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=Te("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",Xt(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,o=this.options.maxHeight,r="leaflet-popup-scrolled";o&&o<n?(e.height=o+"px",Pe(t,r)):Ne(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();ze(this._container,e.add(i))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(ke(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,o=new N(this._containerLeft,-i-this._containerBottom);o._add($e(this._container));var r=t.layerPointToContainerPoint(o),s=A(this.options.autoPanPadding),a=A(this.options.autoPanPaddingTopLeft||s),l=A(this.options.autoPanPaddingBottomRight||s),h=t.getSize(),u=0,c=0;r.x+n+l.x>h.x&&(u=r.x+n-h.x+l.x),r.x-u-a.x<0&&(u=r.x-a.x),r.y+i+l.y>h.y&&(c=r.y+i-h.y+l.y),r.y-c-a.y<0&&(c=r.y-a.y),(u||c)&&t.fire("autopanstart").panBy([u,c])}},_onCloseButtonClick:function(t){this._close(),re(t)},_getAnchor:function(){return A(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ze.mergeOptions({closePopupOnClick:!0}),Ze.include({openPopup:function(t,e,i){return t instanceof Ki||(t=new Ki(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Ti.include({bindPopup:function(t,e){return t instanceof Ki?(d(t,e),(this._popup=t)._source=this):(this._popup&&!e||(this._popup=new Ki(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof Ti||(e=t,t=this),t instanceof Ci)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(re(t),e instanceof Ni?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Qi=Xi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Xi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Xi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Xi.prototype.getEvents.call(this);return Lt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Te("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,i=this._container,n=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),r=this.options.direction,s=i.offsetWidth,a=i.offsetHeight,l=A(this.options.offset),h=this._getAnchor();"top"===r?t=t.add(A(-s/2+l.x,-a+l.y+h.y,!0)):"bottom"===r?t=t.subtract(A(s/2-l.x,-l.y,!0)):"center"===r?t=t.subtract(A(s/2+l.x,a/2-h.y+l.y,!0)):"right"===r||"auto"===r&&o.x<n.x?(r="right",t=t.add(A(l.x+h.x,h.y-a/2+l.y,!0))):(r="left",t=t.subtract(A(s+h.x-l.x,a/2-h.y-l.y,!0))),Ne(i,"leaflet-tooltip-right"),Ne(i,"leaflet-tooltip-left"),Ne(i,"leaflet-tooltip-top"),Ne(i,"leaflet-tooltip-bottom"),Pe(i,"leaflet-tooltip-"+r),ze(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Oe(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return A(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ze.include({openTooltip:function(t,e,i){return t instanceof Qi||(t=new Qi(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Ti.include({bindTooltip:function(t,e){return t instanceof Qi?(d(t,e),(this._tooltip=t)._source=this):(this._tooltip&&!e||(this._tooltip=new Qi(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),Lt&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof Ti||(e=t,t=this),t instanceof Ci)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(Pe(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Ne(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var Ji=Di.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=A(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Di.Default=Mi;var tn=Ti.extend({options:{tileSize:256,opacity:1,updateWhenIdle:_t,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Ee(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(De(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Me(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=n(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof N?t:new N(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),o=0,r=i.length;o<r;o++)e=i[o].style.zIndex,i[o]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!tt){Oe(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){var r=Math.min(1,(t-o.loaded)/200);Oe(o.el,r),r<1?e=!0:(o.active?i=!0:this._onOpaqueTile(o),o.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(C(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:a,_initContainer:function(){this._container||(this._container=Te("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(Ee(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],o=this._map;return n||((n=this._levels[t]={}).el=Te("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),n.el.offsetWidth,this._onCreateLevel(n)),this._level=n}},_onUpdateLevel:a,_onRemoveLevel:a,_onCreateLevel:a,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Ee(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),r=Math.floor(e/2),s=i-1,a=new N(+o,+r);a.z=+s;var l=this._tileCoordsToKey(a),h=this._tiles[l];return h&&h.active?h.retain=!0:(h&&h.loaded&&(h.retain=!0),n<s&&this._retainParent(o,r,s,n))},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var s=new N(o,r);s.z=i+1;var a=this._tileCoordsToKey(s),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(o,r,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var o=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom)&&(o=void 0);var r=this.options.updateWhenZooming&&o!==this._tileZoom;n&&!r||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();vt?je(t.el,o,n):ze(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),o=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*n);return new O(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),r=o.getCenter(),s=[],a=this.options.keepBuffer,l=new O(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var h in this._tiles){var u=this._tiles[h].coords;u.z===this._tileZoom&&l.contains(new N(u.x,u.y))||(this._tiles[h].current=!1)}if(1<Math.abs(i-this._tileZoom))this._setView(t,i);else{for(var c=o.min.y;c<=o.max.y;c++)for(var d=o.min.x;d<=o.max.x;d++){var p=new N(d,c);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:s.push(p)}}if(s.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<s.length;d++)this._addTile(s[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return z(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),o=n.add(i);return[e.unproject(n,t.z),e.unproject(o,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new j(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new N(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(st||e.el.setAttribute("src",y),Ee(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Pe(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=a,t.onmousemove=a,tt&&this.options.opacity<1&&Oe(t,this.options.opacity),nt&&!ot&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),f(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&E(f(this._tileReady,this,t,null,o)),ze(o,i),this._tiles[n]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){if(this._map){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);(i=this._tiles[n])&&(i.loaded=+new Date,this._map._fadeAnimated?(Oe(i.el,0),C(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(Pe(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),tt||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new N(this._wrapX?o(t.x,this._wrapX):t.x,this._wrapY?o(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new O(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});var en=tn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=d(this,e)).detectRetina&&Et&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return Xt(i,"load",f(this._tileOnLoad,this,e,i)),Xt(i,"error",f(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:Et?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return g(this._url,l(e,this.options))},_tileOnLoad:function(t,e){tt?setTimeout(f(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=a,e.onerror=a,e.complete||(e.src=y,Ee(e),delete this._tiles[t]))}});function nn(t,e){return new en(t,e)}var on=en.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=l({},this.defaultWmsParams);for(var n in e)n in this.options||(i[n]=e[n]);var o=(e=d(this,e)).detectRetina&&Et?2:1,r=this.getTileSize();i.width=r.x*o,i.height=r.y*o,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,en.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=R(i.project(e[0]),i.project(e[1])),o=n.min,r=n.max,s=(1.3<=this._wmsVersion&&this._crs===Li?[o.y,o.x,r.y,r.x]:[o.x,o.y,r.x,r.y]).join(","),a=L.TileLayer.prototype.getTileUrl.call(this,t);return a+p(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,e){return l(this.wmsParams,t),e||this.redraw(),this}});en.WMS=on,nn.wms=function(t,e){return new on(t,e)};var rn=Ti.extend({options:{padding:.1,tolerance:0},initialize:function(t){d(this,t),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Pe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=$e(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),s=this._map.project(t,e).subtract(r),a=o.multiplyBy(-i).add(n).add(o).subtract(s);vt?je(this._container,a,i):ze(this._container,a)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new O(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),sn=rn.extend({getEvents:function(){var t=rn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){rn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Xt(t,"mousemove",n(this._onMouseMove,32,this),this),Xt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Xt(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){delete this._ctx,Ee(this._container),Qt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},rn.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=Et?2:1;ze(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",Et&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){rn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t);var e=(this._layers[h(t)]=t)._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[L.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,i=t.options.dashArray.split(","),n=[];for(e=0;e<i.length;e++)n.push(Number(i[e]));t.options._dashArray=n}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new O,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,o,r,s=t._parts,a=s.length,l=this._ctx;if(a){for(this._drawnLayers[t._leaflet_id]=t,l.beginPath(),i=0;i<a;i++){for(n=0,o=s[i].length;n<o;n++)r=s[i][n],l[n?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||n)/n;this._drawnLayers[t._leaflet_id]=t,1!==o&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,2*Math.PI,!1),1!==o&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(i=e);i&&(ce(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(Ne(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var i,n,o=this._drawFirst;o;o=o.next)(i=o.layer).options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(Pe(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order,i=e.next,n=e.prev;i&&((i.prev=n)?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,(this._drawLast.next=e).next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,i=e.next,n=e.prev;n&&((n.next=i)?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}});function an(t){return Ct?new sn(t):null}var ln=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),hn={_initContainer:function(){this._container=Te("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(rn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=ln("shape");Pe(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=ln("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;Ee(e),t.removeInteractiveTarget(e),delete this._layers[h(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(e||(e=t._stroke=ln("stroke")),o.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=v(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(o.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=ln("fill")),o.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(o.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){De(t._container)},_bringToBack:function(t){Me(t._container)}},un=Mt?ln:X,cn=rn.extend({getEvents:function(){var t=rn.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=un("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=un("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ee(this._container),Qt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){rn.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),ze(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=un("path");t.options.className&&Pe(e,t.options.className),t.options.interactive&&Pe(e,"leaflet-interactive"),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Ee(t._path),t.removeInteractiveTarget(t._path),delete this._layers[h(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,K(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){De(t._path)},_bringToBack:function(t){Me(t._path)}});function dn(t){return Dt||Mt?new cn(t):null}Mt&&cn.include(hn),Ze.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&an()||dn()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=cn&&dn({pane:t})||sn&&an({pane:t}),this._paneRenderers[t]=e),e}});var pn=Ri.extend({initialize:function(t,e){Ri.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=z(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});cn.create=un,cn.pointsToPath=K,ji.geometryToLayer=zi,ji.coordsToLatLng=$i,ji.coordsToLatLngs=Fi,ji.latLngToCoords=Bi,ji.latLngsToCoords=qi,ji.getFeature=Ui,ji.asFeature=Hi,Ze.mergeOptions({boxZoom:!0});var fn=ti.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Xt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ee(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),fe(),Be(),this._startPoint=this._map.mouseEventToContainerPoint(t),Xt(document,{contextmenu:re,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Te("div","leaflet-zoom-box",this._container),Pe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new O(this._point,this._startPoint),i=e.getSize();ze(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(Ee(this._box),Ne(this._container,"leaflet-crosshair")),me(),qe(),Qt(document,{contextmenu:re,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var e=new j(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ze.addInitHook("addHandler","boxZoom",fn),Ze.mergeOptions({doubleClickZoom:!0});var mn=ti.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,o=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});Ze.addInitHook("addHandler","doubleClickZoom",mn),Ze.mergeOptions({dragging:!0,inertia:!ot,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gn=ti.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new si(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Pe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ne(this._map._container,"leaflet-grab"),Ne(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=z(this._map.options.maxBounds);this._offsetLimit=R(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;1<this._positions.length&&50<t-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,r=(n+e+i)%t-e-i,s=Math.abs(o+i)<Math.abs(r+i)?o:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,s=i.easeLinearity,a=o.multiplyBy(s/r),l=a.distanceTo([0,0]),h=Math.min(i.inertiaMaxSpeed,l),u=a.multiplyBy(h/l),c=h/(i.inertiaDeceleration*s),d=u.multiplyBy(-c/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),E(function(){e.panBy(d,{duration:c,easeLinearity:s,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Ze.addInitHook("addHandler","dragging",gn),Ze.mergeOptions({keyboard:!0,keyboardPanDelta:80});var vn=ti.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Xt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;e<i;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;e<i;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;e<i;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;e<i;e++)n[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;e<i;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;e<i;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){Xt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;e=this._panKeys[i],t.shiftKey&&(e=A(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}re(t)}}});Ze.addInitHook("addHandler","keyboard",vn),Ze.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _n=ti.extend({addHooks:function(){Xt(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qt(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=le(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),n),re(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,r=i?Math.ceil(o/i)*i:o,s=t._limitZoom(e+(0<this._delta?r:-r))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});Ze.addInitHook("addHandler","scrollWheelZoom",_n),Ze.mergeOptions({tap:!0,tapTolerance:15});var yn=ti.extend({addHooks:function(){Xt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(oe(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new N(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&Pe(i,"leaflet-active"),this._holdTimeout=setTimeout(f(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Xt(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Qt(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&Ne(i,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new N(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}});Lt&&!xt&&Ze.addInitHook("addHandler","tap",yn),Ze.mergeOptions({touchZoom:Lt&&!ot,bounceAtZoomLimits:!0});var wn=ti.extend({addHooks:function(){Pe(this._map._container,"leaflet-touch-zoom"),Xt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ne(this._map._container,"leaflet-touch-zoom"),Qt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Xt(document,"touchmove",this._onTouchMove,this),Xt(document,"touchend",this._onTouchEnd,this),oe(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),o=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&1<o)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var r=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===r.x&&0===r.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),C(this._animRequest);var s=f(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=E(s,this,!0),oe(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,C(this._animRequest),Qt(document,"touchmove",this._onTouchMove),Qt(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ze.addInitHook("addHandler","touchZoom",wn),Ze.BoxZoom=fn,Ze.DoubleClickZoom=mn,Ze.Drag=gn,Ze.Keyboard=vn,Ze.ScrollWheelZoom=_n,Ze.Tap=yn,Ze.TouchZoom=wn;var bn=window.L;window.L=t,Object.freeze=e,t.version="1.3.1",t.noConflict=function(){return window.L=bn,this},t.Control=Ge,t.control=Ye,t.Browser=Pt,t.Evented=P,t.Mixin=ii,t.Util=D,t.Class=M,t.Handler=ti,t.extend=l,t.bind=f,t.stamp=h,t.setOptions=d,t.DomEvent=ye,t.DomUtil=Ve,t.PosAnimation=We,t.Draggable=si,t.LineUtil=mi,t.PolyUtil=_i,t.Point=N,t.point=A,t.Bounds=O,t.bounds=R,t.Transformation=V,t.transformation=W,t.Projection=bi,t.LatLng=$,t.latLng=F,t.LatLngBounds=j,t.latLngBounds=z,t.CRS=q,t.GeoJSON=ji,t.geoJSON=Wi,t.geoJson=Zi,t.Layer=Ti,t.LayerGroup=Ei,t.layerGroup=function(t,e){return new Ei(t,e)},t.FeatureGroup=Ci,t.featureGroup=function(t){return new Ci(t)},t.ImageOverlay=Gi,t.imageOverlay=function(t,e,i){return new Gi(t,e,i)},t.VideoOverlay=Yi,t.videoOverlay=function(t,e,i){return new Yi(t,e,i)},t.DivOverlay=Xi,t.Popup=Ki,t.popup=function(t,e){return new Ki(t,e)},t.Tooltip=Qi,t.tooltip=function(t,e){return new Qi(t,e)},t.Icon=Di,t.icon=function(t){return new Di(t)},t.DivIcon=Ji,t.divIcon=function(t){return new Ji(t)},t.Marker=Pi,t.marker=function(t,e){return new Pi(t,e)},t.TileLayer=en,t.tileLayer=nn,t.GridLayer=tn,t.gridLayer=function(t){return new tn(t)},t.SVG=cn,t.svg=dn,t.Renderer=rn,t.Canvas=sn,t.canvas=an,t.Path=Ni,t.CircleMarker=Ii,t.circleMarker=function(t,e){return new Ii(t,e)},t.Circle=Ai,t.circle=function(t,e,i){return new Ai(t,e,i)},t.Polyline=Oi,t.polyline=function(t,e){return new Oi(t,e)},t.Polygon=Ri,t.polygon=function(t,e){return new Ri(t,e)},t.Rectangle=pn,t.rectangle=function(t,e){return new pn(t,e)},t.Map=Ze,t.map=function(t,e){return new Ze(t,e)}},"object"==typeof i&&void 0!==e?o(i):"function"==typeof define&&define.amd?define(["exports"],o):o(n.L={})},{}],16:[function(t,i,n){!function(t,e){"use strict";"function"==typeof define&&define.amd?define([],e):"object"==typeof n?i.exports=e():t.MergeXML=e()}(this,function(){return function(t){var u,a,l,h,c,d,p,f,m,g=this;g.Init=function(){return g.dom=null,g.nsp={},g.count=0,f[1]=!1,0<u&&(g.error={code:"",text:""}),0<u},g.AddFile=function(t){return t&&t.target?t.target.result?g.AddSource(t.target.result):k("emf"):k("nof")},g.AddSource=function(t){var e,i;if("object"==typeof t)(i=!!g.Get(1,t)&&t)&&(1===u&&!window.DOMParser||2===u&&!i.selectSingleNode("/"))&&(i=null);else try{i=v(t)}catch(t){i=!1}if(null===i)e=k("nos");else if(!1===i)e=k("inv");else if(!0===i)g.nsp=w(g.dom.documentElement),g.count=1,e=g.dom;else if(o(i)){if(_(i,"/"),!0===f[1]){var n=g.dom.createTextNode("\r\n");g.dom.documentElement.appendChild(n)}g.count++,e=g.dom}else e=!1;return e};var v=function(t){var e,i;return 1===u?g.dom?(i=l.parseFromString(t,"text/xml"),e=!!n(i)&&i):(g.dom=l.parseFromString(t,"text/xml"),e=!!n(g.dom)):g.dom?((i=new ActiveXObject(a)).async=!1,e=!!i.loadXML(t)&&i):(g.dom=new ActiveXObject(a),g.dom.async=!1,g.dom.setProperty("SelectionLanguage","XPath"),e=!!g.dom.loadXML(t)),e},n=function(t){return 0===t.getElementsByTagNameNS(h,"parsererror").length},o=function(t){var e=!0,i=g.dom.characterSet||g.dom.inputEncoding||g.dom.xmlEncoding;if((t.characterSet||t.inputEncoding||t.xmlEncoding)!==i)e=k("enc");else if(t.documentElement.namespaceURI!==g.dom.documentElement.namespaceURI)e=k("nse");else if(t.documentElement.nodeName!==g.dom.documentElement.nodeName)if(f[0]){if(!f[1]){var n=void 0!==i?i:"UTF-8",o='<?xml version="'+(g.dom.xmlVersion?g.dom.xmlVersion:"1.0")+'" encoding="'+n+'"?>\r\n<'+f[0]+">\r\n</"+f[0]+">",r=v(o);if(r){var s=g.dom.documentElement.cloneNode(!0);r.documentElement.appendChild(s),s=r.createTextNode("\r\n"),r.documentElement.appendChild(s),g.dom=r,f[1]=!0}else e=k("jne"),f[1]=null}}else e=k("dif");if(e){var a=w(t.documentElement);for(var l in a)g.nsp[l]||(void 0!==g.dom.documentElement.setAttributeNS?g.dom.documentElement.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+l,a[l]):g.dom.documentElement.setAttribute("xmlns:"+l,a[l]),g.nsp[l]=a[l]);m?1===u?d=b:x():d=null}return e},_=function(t,e){for(var i=0;i<t.childNodes.length;i++){var n,o=t.childNodes[i],r=y(t.childNodes,o,e,i),s=g.Query(r);if(1===o.nodeType){var a=!0;if(null===s||s.namespaceURI!==o.namespaceURI)n=o.cloneNode(!0),(s=g.Query(e)).appendChild(n);else if(!1!==L(s.getAttribute("stay"),p)&&(a=!1),a)try{for(var l=0;l<o.attributes.length;l++)o.attributes[l].namespaceURI&&void 0!==o.setAttributeNS?s.setAttributeNS(o.attributes[l].namespaceURI,o.attributes[l].nodeName,o.attributes[l].nodeValue):s.setAttribute(o.attributes[l].nodeName,o.attributes[l].nodeValue)}catch(t){}o.hasChildNodes()&&a&&_(o,r)}else 3!==o.nodeType&&8!==o.nodeType||(null===s||s.nodeType!==o.nodeType?(s=g.Query(e),n=3===o.nodeType?g.dom.createTextNode(o.nodeValue):g.dom.createComment(o.nodeValue),s.appendChild(n)):s.nodeValue=o.nodeValue)}},y=function(t,e,i,n){var o,r,s=0;if(1===e.nodeType){for(r=0;r<=n;r++)(m&&t[r].nodeType===e.nodeType&&t[r].nodeName===e.nodeName||!m&&7!==t[r].nodeType)&&s++;if(m){var a=!1,l=w(e);for(var h in l)"_"!==h&&(g.nsp[h]=l[h],a=2===u);a&&x(),o=e.prefix?e.prefix+":":g.nsp._?"_:":"",o+=e.localName?e.localName:e.baseName}else o="node()"}else if(3===e.nodeType||8===e.nodeType){for(r=0;r<=n;r++)t[r].nodeType===e.nodeType&&s++;o=3===e.nodeType?"text()":"comment()"}else o=i;return s&&(o=i+("/"===i.slice(-1)?"":"/")+o+"["+s+"]"),o},w=function(t){for(var e={},i=t.attributes,n=0;n<i.length;++n){var o=i[n].name.split(":");if("xmlns"===o[0])e[o[1]?o[1]:"_"]=i[n].value}return e};g.Query=function(t){var e;f[1]&&(t="/"+g.dom.documentElement.nodeName+("/"===t?"":t));try{e=1===u?(e=c.evaluate(t,g.dom,d,XPathResult.FIRST_ORDERED_NODE_TYPE,null)).singleNodeValue:g.dom.selectSingleNode(t)}catch(t){e=null}return e};var b=function(t){return g.nsp[t]||null},x=function(){var t="";for(var e in g.nsp)t+=" xmlns:"+e+"='"+g.nsp[e]+"'";t&&g.dom.setProperty("SelectionNamespaces",t.substr(1))},L=function(t,e){var i=!1;for(var n in e)if(e[n]===t){i=n;break}return i};g.Get=function(t,e){var i;if(t&&!e&&(e=g.dom),t)if(e)if(e.xml)i=e.xml;else try{i=(new XMLSerializer).serializeToString(e)}catch(t){i=null}else i="";else i=g.dom;if(i&&2===t){if(f[1]){var n=i.indexOf("<"+f[0]);i=i.substr(0,n)+"\r\n"+i.substr(n)}i=(i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ |\t/g,"&nbsp;")).replace(/(\r\n|\n|\r)/g,"<br>")}return i};var k=function(t){var e={nod:"XML DOM is not supported in this browser",nox:"xPath is not supported in this browser",nos:"Incompatible source object",nof:"File not found",emf:"File is empty",inv:"Invalid XML source",enc:"Different encoding",dif:"Different root nodes",jne:"Invalid join parameter",nse:"Namespace incompatibility",und:"Undefined error"};return g.error.code=e[t]?t:"und",g.error.text=e[g.error.code],!1};"object"!=typeof t&&(t={}),p=void 0===t.stay?["all"]:t.stay?"object"==typeof t.stay&&t.stay instanceof Array?t.stay:[t.stay]:[],f=void 0===t.join?["root"]:[!!t.join&&String(t.join)],m=void 0===t.updn||t.updn,"string"==typeof(u=function(){for(var t,e=!1,i=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","Microsoft.XmlDom"],n=i.length,o=0;o<n;o++)try{var r=new ActiveXObject(i[o]);if(e=!(r.async=!1),r.loadXML("<x></x>")&&r.selectSingleNode("/"))break}catch(s){}if(e)o<n?(a=i[o],t=2):t="nox";else if(window.DOMParser)if(window.XPathEvaluator){var s=(l=new DOMParser).parseFromString("Invalid","text/xml");h=s.getElementsByTagName("parsererror")[0].namespaceURI,c=new XPathEvaluator,t=1}else t="nox";else t="nod";return t}())&&(g.error={},k(u),u=0),g.Init()}})},{}],17:[function(t,e,i){var n,o;n=this,o=function(){"use strict";function _(t,e,i){this.x=t,this.y=e,this.time=i||(new Date).getTime()}function s(t,e,i,n){this.startPoint=t,this.control1=e,this.control2=i,this.endPoint=n}function o(t,e){var i=this,n=e||{};this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.throttle?this._strokeMoveUpdate=function(i,n,o){var r,s,a,l=null,h=0;o||(o={});var u=function(){h=!1===o.leading?0:Date.now(),l=null,a=i.apply(r,s),l||(r=s=null)};return function(){var t=Date.now();h||!1!==o.leading||(h=t);var e=n-(t-h);return r=this,s=arguments,e<=0||n<e?(l&&(clearTimeout(l),l=null),h=t,a=i.apply(r,s),l||(r=s=null)):l||!1===o.trailing||(l=setTimeout(u,e)),a}}(o.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=o.prototype._strokeUpdate,this.dotSize=n.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this.onBegin=n.onBegin,this.onEnd=n.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(t){1===t.which&&(i._mouseButtonDown=!0,i._strokeBegin(t))},this._handleMouseMove=function(t){i._mouseButtonDown&&i._strokeMoveUpdate(t)},this._handleMouseUp=function(t){1===t.which&&i._mouseButtonDown&&(i._mouseButtonDown=!1,i._strokeEnd(t))},this._handleTouchStart=function(t){if(1===t.targetTouches.length){var e=t.changedTouches[0];i._strokeBegin(e)}},this._handleTouchMove=function(t){t.preventDefault();var e=t.targetTouches[0];i._strokeMoveUpdate(e)},this._handleTouchEnd=function(t){t.target===i._canvas&&(t.preventDefault(),i._strokeEnd(t))},this.on()}return _.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1},_.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},_.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time},s.prototype.length=function(){for(var t=0,e=void 0,i=void 0,n=0;n<=10;n+=1){var o=n/10,r=this._point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),s=this._point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(0<n){var a=r-e,l=s-i;t+=Math.sqrt(a*a+l*l)}e=r,i=s}return t},s.prototype._point=function(t,e,i,n,o){return e*(1-t)*(1-t)*(1-t)+3*i*(1-t)*(1-t)*t+3*n*(1-t)*t*t+o*t*t*t},o.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0},o.prototype.fromDataURL=function(t){var e=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=new Image,o=i.ratio||window.devicePixelRatio||1,r=i.width||this._canvas.width/o,s=i.height||this._canvas.height/o;this._reset(),n.src=t,n.onload=function(){e._ctx.drawImage(n,0,0,r,s)},this._isEmpty=!1},o.prototype.toDataURL=function(t){var e;switch(t){case"image/svg+xml":return this._toSVG();default:for(var i=arguments.length,n=Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return(e=this._canvas).toDataURL.apply(e,[t].concat(n))}},o.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},o.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},o.prototype.isEmpty=function(){return this._isEmpty},o.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),"function"==typeof this.onBegin&&this.onBegin(t)},o.prototype._strokeUpdate=function(t){var e=t.clientX,i=t.clientY,n=this._createPoint(e,i),o=this._data[this._data.length-1],r=o&&o[o.length-1],s=r&&n.distanceTo(r)<this.minDistance;if(!r||!s){var a=this._addPoint(n),l=a.curve,h=a.widths;l&&h&&this._drawCurve(l,h.start,h.end),this._data[this._data.length-1].push({x:n.x,y:n.y,time:n.time,color:this.penColor})}},o.prototype._strokeEnd=function(t){var e=2<this.points.length,i=this.points[0];if(!e&&i&&this._drawDot(i),i){var n=this._data[this._data.length-1],o=n[n.length-1];i.equals(o)||n.push({x:i.x,y:i.y,time:i.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(t)},o.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},o.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},o.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},o.prototype._createPoint=function(t,e,i){var n=this._canvas.getBoundingClientRect();return new _(t-n.left,e-n.top,i||(new Date).getTime())},o.prototype._addPoint=function(t){var e=this.points;if(e.push(t),2<e.length){3===e.length&&e.unshift(e[0]);var i=this._calculateCurveControlPoints(e[0],e[1],e[2]).c2,n=this._calculateCurveControlPoints(e[1],e[2],e[3]).c1,o=new s(e[1],i,n,e[2]),r=this._calculateCurveWidths(o);return e.shift(),{curve:o,widths:r}}return{}},o.prototype._calculateCurveControlPoints=function(t,e,i){var n=t.x-e.x,o=t.y-e.y,r=e.x-i.x,s=e.y-i.y,a=(t.x+e.x)/2,l=(t.y+e.y)/2,h=(e.x+i.x)/2,u=(e.y+i.y)/2,c=Math.sqrt(n*n+o*o),d=Math.sqrt(r*r+s*s),p=d/(c+d),f=h+(a-h)*p,m=u+(l-u)*p,g=e.x-f,v=e.y-m;return{c1:new _(a+g,l+v),c2:new _(h+g,u+v)}},o.prototype._calculateCurveWidths=function(t){var e=t.startPoint,i=t.endPoint,n={start:null,end:null},o=this.velocityFilterWeight*i.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(o);return n.start=this._lastWidth,n.end=r,this._lastVelocity=o,this._lastWidth=r,n},o.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)},o.prototype._drawPoint=function(t,e,i){var n=this._ctx;n.moveTo(t,e),n.arc(t,e,i,0,2*Math.PI,!1),this._isEmpty=!1},o.prototype._drawCurve=function(t,e,i){var n=this._ctx,o=i-e,r=Math.floor(t.length());n.beginPath();for(var s=0;s<r;s+=1){var a=s/r,l=a*a,h=l*a,u=1-a,c=u*u,d=c*u,p=d*t.startPoint.x;p+=3*c*a*t.control1.x,p+=3*u*l*t.control2.x,p+=h*t.endPoint.x;var f=d*t.startPoint.y;f+=3*c*a*t.control1.y,f+=3*u*l*t.control2.y,f+=h*t.endPoint.y;var m=e+h*o;this._drawPoint(p,f,m)}n.closePath(),n.fill()},o.prototype._drawDot=function(t){var e=this._ctx,i="function"==typeof this.dotSize?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,i),e.closePath(),e.fill()},o.prototype._fromData=function(t,e,i){for(var n=0;n<t.length;n+=1){var o=t[n];if(1<o.length)for(var r=0;r<o.length;r+=1){var s=o[r],a=new _(s.x,s.y,s.time),l=s.color;if(0===r)this.penColor=l,this._reset(),this._addPoint(a);else if(r!==o.length-1){var h=this._addPoint(a),u=h.curve,c=h.widths;u&&c&&e(u,c,l)}}else this._reset(),i(o[0])}},o.prototype._toSVG=function(){var n=this,t=this._data,e=this._canvas,i=Math.max(window.devicePixelRatio||1,1),o=e.width/i,r=e.height/i,s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttributeNS(null,"width",e.width),s.setAttributeNS(null,"height",e.height),this._fromData(t,function(t,e,i){var n=document.createElement("path");if(!(isNaN(t.control1.x)||isNaN(t.control1.y)||isNaN(t.control2.x)||isNaN(t.control2.y))){var o="M "+t.startPoint.x.toFixed(3)+","+t.startPoint.y.toFixed(3)+" C "+t.control1.x.toFixed(3)+","+t.control1.y.toFixed(3)+" "+t.control2.x.toFixed(3)+","+t.control2.y.toFixed(3)+" "+t.endPoint.x.toFixed(3)+","+t.endPoint.y.toFixed(3);n.setAttribute("d",o),n.setAttribute("stroke-width",(2.25*e.end).toFixed(3)),n.setAttribute("stroke",i),n.setAttribute("fill","none"),n.setAttribute("stroke-linecap","round"),s.appendChild(n)}},function(t){var e=document.createElement("circle"),i="function"==typeof n.dotSize?n.dotSize():n.dotSize;e.setAttribute("r",i),e.setAttribute("cx",t.x),e.setAttribute("cy",t.y),e.setAttribute("fill",t.color),s.appendChild(e)});var a='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+o+" "+r+'" width="'+o+'" height="'+r+'">',l=s.innerHTML;if(void 0===l){var h=document.createElement("dummy"),u=s.childNodes;h.innerHTML="";for(var c=0;c<u.length;c+=1)h.appendChild(u[c].cloneNode(!0));l=h.innerHTML}return"data:image/svg+xml;base64,"+btoa(a+l+"</svg>")},o.prototype.fromData=function(t){var i=this;this.clear(),this._fromData(t,function(t,e){return i._drawCurve(t,e.start,e.end)},function(t){return i._drawDot(t)}),this._data=t},o.prototype.toData=function(){return this._data},o},"object"==typeof i&&void 0!==e?e.exports=o():"function"==typeof define&&define.amd?define(o):n.SignaturePad=o()},{}],18:[function(t,e,i){"use strict";function n(t){this.message=t||"unknown",this.name="FormLogicError",this.stack=(new Error).stack}(n.prototype=Object.create(Error.prototype)).constructor=n,e.exports=n},{}],19:[function(i,y,t){(function(u){"use strict";var c=i("mergexml/mergexml"),h=i("./utils"),l=i("jquery"),a=i("./dom-utils"),v=i("./Form-logic-error"),r=i("enketo/config"),o=i("./types"),d=i("./event"),p="repeat:/",e=/instance\(\s*(["'])((?:(?!\1)[A-z0-9.\-_]+))\1\s*\)/g,_=/(decimal-date-time\(|pow\(|indexed-repeat\(|format-date\(|coalesce\(|join\(|max\(|min\(|random\(|substr\(|int\(|uuid\(|regex\(|now\(|today\(|date\(|if\(|boolean-from-string\(|checklist\(|selected\(|selected-at\(|round\(|area\(|position\([^)])/,s="http://openrosa.org/xforms",f="http://openrosa.org/javarosa",m="http://enketo.org/xforms";i("./extend");var t,n,g=new DOMParser;((t=function(t,e){"string"==typeof t&&(t={modelStr:t}),t.external=t.external||[],t.submitted=void 0===t.submitted||t.submitted,(e=e||{}).full=void 0===e.full||e.full,this.events=document.createElement("div"),this.convertedExpressions={},this.templates={},this.loadErrors=[],this.data=t,this.options=e,this.namespaces={}}).prototype={get version(){return this.evaluate("/node()/@version","string",null,null,!0)},get instanceID(){return this.getMetaNode("instanceID").getVal()},get deprecatedID(){return this.getMetaNode("deprecatedID").getVal()||""},get instanceName(){return this.getMetaNode("instanceName").getVal()}}).init=function(){var i,n,o,r,s=this;this.data.modelStr=this.data.modelStr.replace(/\s(xmlns=("|')[^\s>]+("|'))/g," data-$1"),this.options.full||(this.data.modelStr=this.data.modelStr.replace(/^(<model\s*><instance((?!<instance).)+<\/instance\s*>\s*)(<instance.+<\/instance\s*>)*/,"$1"));try{i="model",this.xml=g.parseFromString(this.data.modelStr,"text/xml"),this.throwParserErrors(this.xml,this.data.modelStr),this.data.external.forEach(function(t){for(i='instance "'+t.id+'"'||"instance unknown",o=s.getSecondaryInstance(t.id),r=o.children,n=r.length-1;0<=n;n--)o.removeChild(r[n]);var e;"string"==typeof t.xml||t.xmlStr?(console.deprecate("External instance provided as string","provide external instance as XML Document"),e=g.parseFromString(t.xml||t.xmlStr,"text/xml").firstChild,s.throwParserErrors(e,t.xml||t.xmlStr)):t.xml instanceof XMLDocument&&(e=0<=u.navigator.userAgent.indexOf("Trident/")?s.importNode(t.xml.documentElement,!0):s.xml.importNode(t.xml.documentElement,!0)),e&&o.appendChild(e)}),this.createSession("__session",this.data.session)}catch(t){console.error("parseXML error"),this.loadErrors.push("Error trying to parse XML "+i+". "+t.message)}if(this.xml){try{this.hasInstance=!!this.xml.querySelector("model > instance"),this.rootElement=this.xml.querySelector("instance > *")||this.xml.documentElement,this.setNamespaces(),this.getMetaNode("instanceID").getElement()||s.loadErrors.push("Invalid primary instance. Missing instanceID node."),Array.prototype.slice.call(this.xml.querySelectorAll("model > instance[src]:empty")).forEach(function(t){s.loadErrors.push('External instance "'+t.id+'" is empty.')}),this.trimValues(),this.extractTemplates()}catch(t){console.error(t),this.loadErrors.push(t.name+": "+t.message)}try{i="record",this.data.instanceStr&&this.mergeXml(this.data.instanceStr),this.setInstanceIdAndDeprecatedId()}catch(t){console.error(t),this.loadErrors.push("Error trying to parse XML "+i+". "+t.message)}}return this.loadErrors},t.prototype.throwParserErrors=function(t,e){if(!t||t.querySelector("parsererror"))throw new Error("Invalid XML: "+e)},t.prototype.createSession=function(t,e){var i,n,o=this.xml.querySelector("model"),r=["deviceid","username","email","phonenumber","simserial","subscriberid"];o&&(e="object"==typeof e?e:{},(i=o.querySelector('instance[id="'+t+'"]'))||(i=g.parseFromString('<instance id="'+t+'"/>',"text/xml").documentElement,this.xml.adoptNode(i),o.appendChild(i)),r.forEach(function(t){e[t]=e[t]||h.readCookie("__enketo_meta_"+t)||t+" not found"}),n=g.parseFromString("<session><context>"+r.map(function(t){return"<"+t+">"+e[t]+"</"+t+">"}).join("")+"</context></session>","text/xml").documentElement,this.xml.adoptNode(n),i.appendChild(n))},t.prototype.getSecondaryInstance=function(e){var i;return[].slice.call(this.xml.querySelectorAll("model > instance")).some(function(t){return t.getAttribute("id")===e&&(i=t,!0)}),i},t.prototype.node=function(t,e,i){return new n(t,e,i,this)},t.prototype.importNode=function(t,e){var i,n;switch(t.nodeType){case document.ELEMENT_NODE:var o=document.createElementNS(t.namespaceURI,t.nodeName);if(t.attributes&&0<t.attributes.length)for(i=0,n=t.attributes.length;i<n;i++){var r=t.attributes[i];r.namespaceURI?o.setAttributeNS(r.namespaceURI,r.nodeName,t.getAttributeNS(r.namespaceURI,r.localName)):o.setAttribute(r.nodeName,t.getAttribute(r.nodeName))}if(e&&t.children.length)for(i=0,n=t.children.length;i<n;i++)o.appendChild(this.importNode(t.children[i],e));return!t.children.length&&t.textContent&&(o.textContent=t.textContent),o;case document.TEXT_NODE:case document.CDATA_SECTION_NODE:case document.COMMENT_NODE:return document.createTextNode(t.nodeValue)}},t.prototype.mergeXml=function(t){var e,i,n,o,r,s,a,l=this;if(t){if(n=this.xml.querySelector("instance"),!(o=this.xml.querySelector("instance > *")))throw new Error("Model is corrupt. It does not contain a childnode of instance");t=(t=t.replace(/\s(xmlns=("|')[^\s>]+("|'))/g,"")).replace(/<!--[^>]*-->/g,""),s=(a=g.parseFromString(t,"text/xml")).querySelectorAll("[*|template]");for(var h=0;h<s.length;h++)s[h].remove();if(Array.prototype.slice.call(a.querySelectorAll("*")).forEach(function(t){var e,i,n,o=0;try{e=l.getXPath(t,"instance",!1),(void 0!==l.templates[e]||0<l.getRepeatIndex(t))&&(i=l.getXPath(t,"instance",!0),l.evaluate(i,"node",null,null,!0)||((n=i.match(/([^[]+)\[(\d+)\]\//g))&&0<n.length&&(o=n[n.length-1].match(/\[(\d+)\]/)[1]-1),l.addRepeat(e,o,!0)))}catch(t){console.log("Ignored error:",t)}}),Array.prototype.slice.call(a.querySelectorAll("*")).filter(function(t){var e=t.textContent;return 0===t.children.length&&0===e.trim().length}).forEach(function(t){var e=l.getXPath(t,"instance",!0);l.node(e,0).getElement()&&(0===l.evaluate("./*","nodes",e,0,!0).length?l.evaluate("./text()","nodes",e,0,!0).forEach(function(t){t.textContent=""}):l.evaluate(".//*[not(*)]","nodes",e,0,!0).forEach(function(t){t.textContent=""}))}),i=new c({join:!1}),e=(new XMLSerializer).serializeToString(o),t=(new XMLSerializer).serializeToString(a),i.AddSource(e),i.AddSource(t),i.error.code)throw new Error(i.error.text);r=g.parseFromString(i.Get(1),"text/xml"),this.xml.querySelector("instance").removeChild(o),o=0<=u.navigator.userAgent.indexOf("Trident/")?this.importNode(r.documentElement,!0):this.xml.adoptNode(r.documentElement,!0),n.appendChild(o),this.rootElement=o}},t.prototype.getXPath=function(t,e,i){var n,o=[],r="",s=t.nodeName,a=t.parentElement,l=a?a.nodeName:null;for(e=e||"#document",(i=i||!1)&&0<(n=this.getRepeatIndex(t))&&(r="["+(n+1)+"]"),o.push(s+r);a&&l!==e&&"#document"!==l;)i&&(r=0<(n=this.getRepeatIndex(a))?"["+(n+1)+"]":""),o.push(l+r),l=(a=a.parentElement)?a.nodeName:null;return"/"+o.reverse().join("/")},t.prototype.getRepeatIndex=function(t){for(var e=0,i=t.nodeName,n=t.previousSibling;n;)n.nodeName&&n.nodeName===i&&e++,n=n.previousSibling;return e},t.prototype.trimValues=function(){this.node(null,null,{noEmpty:!0}).getElements().forEach(function(t){t.textContent=t.textContent.trim()})},t.prototype.setInstanceIdAndDeprecatedId=function(){var t,e,i,n;e=(t=this.getMetaNode("instanceID")).getElement(),n=t.getVal(),this.data.instanceStr&&this.data.submitted&&(i=this.getMetaNode("deprecatedID").getElement(),e.textContent="",i||(i=g.parseFromString("<deprecatedID/>","text/xml").documentElement,this.xml.adoptNode(i),this.xml.querySelector("* > meta").appendChild(i))),t.getVal()||t.setVal(this.evaluate('concat("uuid:", uuid())',"string")),i&&this.getMetaNode("deprecatedID").setVal(n)},t.prototype.bindJsEvaluator=i("./xpath-evaluator-binding"),t.prototype.getMetaNode=function(t){var e=this.getNamespacePrefix(s),i=this.node("/*/"+e+":meta/"+e+":"+t);return i.getElement()||(i=this.node("/*/meta/"+t)),i},t.prototype.getRepeatCommentText=function(t){return t=t.trim(),p+t},t.prototype.getRepeatCommentEl=function(t,e){var i='//comment()[self::comment()="'+this.getRepeatCommentText(t)+'"]';return this.evaluate(i,"nodes",null,null,!0)[e]},t.prototype.addRepeat=function(t,e,i){var n,o=this;this.templates[t]||this.extractFakeTemplates([t]);var r=this.templates[t],s=this.getRepeatSeries(t,e),a=s.length?s[s.length-1]:this.getRepeatCommentEl(t,e);i||s.forEach(function(t){o.addOrdinalAttribute(t,s[0])}),r&&a?(n=r.cloneNode(!0),a.after(n),this.removeOrdinalAttributes(n),i||this.addOrdinalAttribute(n,s[0]),i&&Array.prototype.slice.call(n.querySelectorAll("*")).filter(function(t){return 0===t.children.length}).forEach(function(t){t.textContent=""})):console.error("Could not find template node and/or node to insert the clone after")},t.prototype.addOrdinalAttribute=function(t,e){var i,n,o=this.getNamespacePrefix(m);e=e||t,!0!==r.repeatOrdinals||t.getAttributeNS(m,"ordinal")||(i=e.getAttributeNS(m,"last-used-ordinal")||0,n=Number(i)+1,e.setAttributeNS(m,o+":last-used-ordinal",n),t.setAttributeNS(m,o+":ordinal",n))},t.prototype.removeOrdinalAttributes=function(t){if(!0===r.repeatOrdinals){var e=Array.prototype.slice.call(t.querySelectorAll("[*|ordinal]"));e.push(t);for(var i=0;i<e.length;i++)e[i].removeAttributeNS(m,"last-used-ordinal"),e[i].removeAttributeNS(m,"ordinal")}},t.prototype.getRepeatSeries=function(t,e){var i,n,o,r=this.getRepeatCommentEl(t,e),s=[];if(r)for(n=(i=r.textContent.substr(p.length).split("/"))[i.length-1],o=r.nextSibling;o;)o.nodeName&&o.nodeName===n&&s.push(o),o=o.nextSibling;return s},t.prototype.hasPreviousSiblingElementSameName=function(t){var e=!1,i=t.nodeName;for(t=t.previousSibling;t;){if(t.nodeName&&t.nodeName===i){e=!0;break}t=t.previousSibling}return e},t.prototype.hasPreviousCommentSiblingWithContent=function(t,e){var i=!1;for(t=t.previousSibling;t;){if(t.nodeType===Node.COMMENT_NODE&&t.textContent===e){i=!0;break}t=t.previousSibling}return i},t.prototype.determineIndex=function(t){var e=this;if(t){var i=t.nodeName,n=this.getXPath(t,"instance"),o=Array.prototype.slice.call(this.xml.querySelectorAll(i.replace(/\./g,"\\."))).filter(function(t){return n===e.getXPath(t,"instance")});return 1===o.length?null:o.indexOf(t)}return console.error("no node, or multiple nodes, provided to determineIndex function"),-1},t.prototype.extractTemplates=function(){var i=this;this.getTemplateNodes().reverse().forEach(function(t){var e=i.getXPath(t,"instance");i.addTemplate(e,t),t.remove()})},t.prototype.extractFakeTemplates=function(t){var e,i=this;t.forEach(function(t){(e=i.evaluate(t,"node",null,null,!0))&&i.addTemplate(t,e,!0)})},t.prototype.addRepeatComments=function(t){var e=this.getRepeatCommentText(t),i=this;this.evaluate(t,"nodes",null,null,!0).forEach(function(t){i.hasPreviousSiblingElementSameName(t)||i.hasPreviousCommentSiblingWithContent(t,e)||t.before(document.createComment(e))})},t.prototype.addTemplate=function(t,e,i){if(this.addRepeatComments(t),!this.templates[t]){var n=e.cloneNode(!0);n.removeAttribute("template"),n.removeAttribute("jr:template"),i&&Array.prototype.slice.call(n.querySelectorAll("*")).filter(function(t){return 0===t.children.length}).forEach(function(t){t.textContent=""}),this.templates[t]=n}},t.prototype.getTemplateNodes=function(){var t=this.getNamespacePrefix(f);return this.evaluate("/model/instance[1]/*//*[@template] | /model/instance[1]/*//*[@"+t+":template]","nodes",null,null,!1)},t.prototype.getStr=function(){var t=(new XMLSerializer).serializeToString(this.xml.querySelector("instance > *")||this.xml.documentElement,"text/xml");return t=(t=t.replace(/\s(data-)(xmlns=("|')[^\s>]+("|'))/g," $2")).replace(new RegExp("\x3c!--"+p+"\\/[^>]+--\x3e","g"),""),-1===navigator.userAgent.indexOf("Trident/")&&(t=this.removeDuplicateEnketoNsDeclarations(t)),t},t.prototype.removeDuplicateEnketoNsDeclarations=function(t){var e=0,i=new RegExp("( xmlns:"+this.getNamespacePrefix(m)+'="'+m+'")',"g");return t.replace(i,function(t){return 1<++e?"":t})},t.prototype.makeBugCompliant=function(r,t,e){for(var i=this.node(t,e).getElement(),n=[i],s=this;i&&i.parentElement&&"instance"!==i.nodeName.toLowerCase();)i=i.parentElement,n.push(i);return n.forEach(function(t){var e=t.nodeName.replace(/\./g,"\\."),i=a.getSiblingElementsAndSelf(t,e+":not([template])");if(1<i.length){var n=s.getXPath(t,"instance"),o=i.indexOf(t);r=r.replace(new RegExp(n+"/","g"),n+"["+(o+1)+"]/")}}),r},t.prototype.setNamespaces=function(){var n,t=this.hasInstance?"/model/instance":"",e=this.evaluate(t+"/*","nodes",null,null,!0),o=this;e.forEach(function(e){if(e.hasAttributes())for(var t=0;t<e.attributes.length;t++){var i=e.attributes[t];0===i.name.indexOf("xmlns:")&&(o.namespaces[i.name.substring(6)]=i.value)}[["orx",s,!1],["jr",f,!1],["enk",m,!0===r.repeatOrdinals]].forEach(function(t){o.getNamespacePrefix(t[1])||(n=o.namespaces[t[0]]?"__"+t[0]:t[0],o.namespaces[n]=t[1],t[2]&&e.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+n,t[1]))})})},t.prototype.getNamespacePrefix=function(t){var e;for(var i in this.namespaces)if(this.namespaces.hasOwnProperty(i)&&this.namespaces[i]===t){e=i;break}return e},t.prototype.getNsResolver=function(){var e=void 0===this.namespaces?{}:this.namespaces;return{lookupNamespaceURI:function(t){return e[t]||null}}},t.prototype.shiftRoot=function(t){var e=/"([^"]*)(")|'([^']*)(')/g;return this.hasInstance&&(t=(t=(t=(t=t.replace(e,function(t,e,i,n,o){var r=i||o;return r+(void 0!==e?encodeURIComponent(e):encodeURIComponent(n))+r})).replace(/^(\/(?!model\/)[^/][^/\s,"']*\/)/g,"/model/instance[1]$1")).replace(/([^a-zA-Z0-9.\])/*_-])(\/(?!model\/)[^/][^/\s,"']*\/)/g,"$1/model/instance[1]$2")).replace(e,function(t,e,i,n,o){var r=i||o;return r+(void 0!==e?decodeURIComponent(e):decodeURIComponent(n))+r})),t},t.prototype.replaceInstanceFn=function(t){var n,o=this;return t.replace(e,function(t,e,i){if(n='/model/instance[@id="'+i+'"]',o.evaluate(n,"nodes",null,null,!0).length)return n;throw new v('instance "'+i+'" does not exist in model')})},t.prototype.replaceCurrentFn=function(t,e){return t=(t=t.replace("current()/.",e+"/.")).replace("current()/","/")},t.prototype.replaceIndexedRepeatFn=function(r,s,a){var l=this;return h.parseFunctionFromExpression(r,"indexed-repeat").forEach(function(t){var e,i,n,o=t[1];if(o.length%2!=1)throw new v("indexed repeat with incorrect number of parameters found: "+t[0]);for(i=o[0],e=o.length-1;1<e;e-=2)n=isNaN(o[e])?l.evaluate(o[e],"number",s,a,!0):o[e],i=i.replace(o[e-1],o[e-1]+"[position() = "+n+"]");r=r.replace(t[0],i)}),r},t.prototype.replaceVersionFn=function(e){var i,n=this;return h.parseFunctionFromExpression(e,"version").forEach(function(t){i=i||n.evaluate("/node()/@version","string",null,0,!0),e=e.replace(t[0],'"'+i+'"')}),e},t.prototype.replacePullDataFn=function(t,e,i){var n,o=this.convertPullDataFn(t,e,i);for(var r in o)o.hasOwnProperty(r)&&(n=this.evaluate(o[r],"string",e,i,!0),t=t.replace(r,'"'+n+'"'));return t},t.prototype.convertPullDataFn=function(t,o,r){var s=this,e=h.parseFunctionFromExpression(t,"pulldata"),a={};return e.length&&e.forEach(function(t){var e,i,n=t[1];if(4!==n.length)throw new v("pulldata with incorrect number of parameters found: "+t[0]);n[1]=h.stripQuotes(n[1]),n[2]=h.stripQuotes(n[2]),e=""===(e=s.evaluate(n[3],"string",o,r,!0))||isNaN(e)?"'"+e+"'":e,i="instance("+n[0]+")/root/item["+n[2]+" = "+e+"]/"+n[1],a[t[0]]=i}),a},t.prototype.evaluate=function(e,t,i,n,o){var r,s,a,l,h,u,c,d,p,f,m,g;for(l in m=e,o=o||!1,t=t||"any",n=n||0,a=this.xml,p=null,i?(p=(c=this.node(i).getElements()).length,s=c[n]):s=this.rootElement,s||console.error("no context element found",i,n),f=[e,i,n,p].join("|"),e=this.replaceIndexedRepeatFn(e,i,n),g=m===(e=this.replacePullDataFn(e,i,n)),this.convertedExpressions[f]?e=this.convertedExpressions[f]:(e=e.trim(),e=this.replaceInstanceFn(e),e=this.replaceVersionFn(e),e=this.replaceCurrentFn(e,this.getXPath(s,"instance",!0)),e=this.shiftRoot(e),p&&1<p&&(e=this.makeBugCompliant(e,i,n)),e=(e=(e=e.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"'),g&&(this.convertedExpressions[f]=e)),h={0:["any","ANY_TYPE"],1:["number","NUMBER_TYPE","numberValue"],2:["string","STRING_TYPE","stringValue"],3:["boolean","BOOLEAN_TYPE","booleanValue"],7:["nodes","ORDERED_NODE_SNAPSHOT_TYPE"],9:["node","FIRST_ORDERED_NODE_TYPE","singleNodeValue"]})if(h.hasOwnProperty(l)){if(h[l=Number(l)][0]===t)break;l=0}if(o&&void 0!==a.evaluate&&!_.test(e))try{u=a.evaluate(e,s,this.getNsResolver(),l,null)}catch(t){console.log("%cWell native XPath evaluation did not work... No worries, worth a shot, the expression probably contained unknown OpenRosa functions or errors:","color:orange",e)}if(!u)try{void 0===a.jsEvaluate&&this.bindJsEvaluator(),u=a.jsEvaluate(e,s,this.getNsResolver(),l,null)}catch(t){throw new v("Could not evaluate: "+e+", message: "+t.message)}if(u){if(0===l){for(l in h)if(h.hasOwnProperty(l)&&(l=Number(l))===Number(u.resultType)&&0<l&&l<4){d=u[h[l][2]];break}console.error("Expression: "+e+" did not return any boolean, string or number value as expected")}else if(7===l)for(d=[],r=0;r<u.snapshotLength;r++)d.push(u.snapshotItem(r));else d=u[h[l][2]];return d}},(n=function(t,e,i,n){var o=n.hasInstance?"/model/instance[1]//*":"//*";this.model=n,this.originalSelector=t,this.selector="string"==typeof t&&0<t.length?t:o,i=null!=i?i:{},this.filter=i,this.filter.onlyLeaf=void 0!==i.onlyLeaf&&i.onlyLeaf,this.filter.noEmpty=void 0!==i.noEmpty&&i.noEmpty,this.index=e}).prototype.get=function(){return console.deprecate("node.get()","node.getElement() or node.getElements()"),l(this.getElements())},n.prototype.getElement=function(){return this.getElements()[0]},n.prototype.getElements=function(){var t,e;return this._nodes||(this._nodes=this.model.evaluate(this.selector,"nodes",null,null,!0),!0===this.filter.noEmpty?this._nodes=this._nodes.filter(function(t){return e=t.textContent,0===t.children.length&&0<e.trim().length}):!0===this.filter.onlyLeaf&&(this._nodes=this._nodes.filter(function(t){return 0===t.children.length}))),t=this._nodes,void 0!==this.index&&null!==this.index&&(t=void 0===t[this.index]?[]:[t[this.index]]),t},n.prototype.setIndex=function(t){this.index=t},n.prototype.setVal=function(t,e){var i,n,o,r=this.getVal();i=null!=t?Array.isArray(t)?t.join(" "):t.toString():"",i=this.convert(i,e);var s=this.getElements();if(1===s.length&&i.toString()!==r.toString()){var a=s[0];return a.textContent=i.toString(),(n=this.getClosestRepeat()).nodes=[a.nodeName],n=(o=this.model.getUpdateEventData(a,e))?l.extend({},n,o):n,this.model.events.dispatchEvent(d.DataUpdate(n)),"binary"===e&&(0<i.length?a.setAttribute("type","file"):a.removeAttribute("type")),n}return 1<s.length?console.error("nodeset.setVal expected nodeset with one node, but received multiple"):0===s.length&&console.log("Data node: "+this.selector+" with null-based index: "+this.index+" not found. Ignored."),null},n.prototype.getVal=function(){var t=this.getElements();return t.length?t[0].textContent:void 0},n.prototype.getClosestRepeat=function(){for(var t=this.getElement(),e=t.nodeName;e&&"instance"!==e&&(!t.nextElementSibling||t.nextElementSibling.nodeName!==e)&&(!t.previousElementSibling||t.previousElementSibling.nodeName!==e);)e=(t=t.parentElement)?t.nodeName:null;return e&&"instance"!==e?{repeatPath:this.model.getXPath(t,"instance"),repeatIndex:this.model.determineIndex(t)}:{}},n.prototype.remove=function(){var t=this.getElement();if(t){var e=t.nodeName,i=this.model.getXPath(t,"instance"),n=this.model.determineIndex(t),o=this.model.getRemovalEventData(t);this.model.templates[i]||this.model.extractFakeTemplates([i]);var r=t.nextElementSibling;for(t.remove(),this._nodes=null,this.model.events.dispatchEvent(d.DataUpdate({nodes:null,repeatPath:i,repeatIndex:n}));r&&r.nodeName==e;)r=r.nextElementSibling,this.model.events.dispatchEvent(d.DataUpdate({nodes:null,repeatPath:i,repeatIndex:n++}));this.model.events.dispatchEvent(d.Removed(o))}else console.error("could not find node "+this.selector+" with index "+this.index+" to remove ")},n.prototype.convert=function(t,e){return""===t.toString()?t:null!=e&&void 0!==o[e.toLowerCase()]&&void 0!==o[e.toLowerCase()].convert?o[e.toLowerCase()].convert(t):t},n.prototype.validate=function(e,t,i){var n=this,o={};return this.validateRequired(t).then(function(t){return!1===(o.requiredValid=t)?null:n.validateConstraintAndType(e,i)}).then(function(t){return o.constraintValid=t,o})},n.prototype.validateConstraintAndType=function(i,t){var e,n=this;return t&&void 0!==o[t.toLowerCase()]||(t="string"),i||"string"!==t&&"select"!==t&&"select1"!==t&&"binary"!==t?""===(e=n.getVal()).toString()?Promise.resolve(!0):Promise.resolve().then(function(){return o[t.toLowerCase()].validate(e)}).then(function(t){var e=!(null!=i&&0<i.length)||n.model.evaluate(i,"boolean",n.originalSelector,n.index);return t&&e}):Promise.resolve(!0)},n.prototype.isRequired=function(t){return!(!t||"false()"===t.trim())&&("true()"===t.trim()||this.model.evaluate(t,"boolean",this.originalSelector,this.index))},n.prototype.validateRequired=function(t){var e=this;return!t||this.getVal()?Promise.resolve(!0):Promise.resolve().then(function(){return!e.isRequired(t)})},t.prototype.getUpdateEventData=function(){},t.prototype.getRemovalEventData=function(){},t.prototype.types=o,(y.exports=t).prototype.getVersion=function(){return console.deprecate("FormModel.getVersion()","model.version"),this.version},t.prototype.get=function(){return console.deprecate("model.get()","model.xml"),this.$||null},t.prototype.getXML=function(){return console.deprecate("model.getXML()","model.xml"),this.xml||null},t.prototype.getInstanceID=function(){return console.deprecate("model.getInstanceID()","model.instanceID"),this.instanceID},t.prototype.getDeprecatedID=function(){return console.deprecate("model.getDeprecatedID()","model.deprecatedID"),this.deprecatedID},t.prototype.getInstanceName=function(){return console.deprecate("model.getInstanceName()","model.instanceName"),this.instanceName}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Form-logic-error":18,"./dom-utils":23,"./event":25,"./extend":26,"./types":47,"./utils":48,"./xpath-evaluator-binding":52,"enketo/config":2,jquery:12,"mergexml/mergexml":16}],20:[function(t,e,i){"use strict";var o=t("./Form-model"),d=t("jquery"),p=t("./utils"),n=t("enketo/translator").t,r=t("enketo/config"),s=t("./input"),a=t("./repeat"),l=t("./page"),h=t("./relevant"),u=t("./itemset"),c=t("./progress"),f=t("./widgets-controller"),m=t("./language"),g=t("./preload"),v=t("./output"),_=t("./calculate"),y=t("./required"),w=t("./mask"),b=t("./readonly"),x=t("./Form-logic-error");function L(t,e,i){var n=d(t);this.$nonRepeats={},this.$all={},this.options="object"!=typeof i?{}:i,void 0===this.options.clearIrrelevantImmediately&&(this.options.clearIrrelevantImmediately=!0),this.view={$:n,html:n[0],$clone:n.clone()},this.model=new o(e),this.repeatsPresent=!!this.view.html.querySelector(".or-repeat"),this.widgetsInitialized=!1,this.pageNavigationBlocked=!1,this.initialized=!1}t("./plugins"),t("./extend"),(L.prototype={evaluationCascadeAdditions:[],get evaluationCascade(){return[this.calc.update.bind(this.calc),this.repeats.countUpdate.bind(this.repeats),this.relevant.update.bind(this.relevant),this.output.update.bind(this.output),this.itemset.update.bind(this.itemset),this.required.update.bind(this.required),this.readonly.update.bind(this.readonly),this.validationUpdate].concat(this.evaluationCascadeAdditions)},get recordName(){return this.view.$.attr("name")},set recordName(t){this.view.$.attr("name",t)},get editStatus(){return!!this.view.$.data("edited")},set editStatus(t){t&&t!==this.view.$.data("edited")&&this.view.$.trigger("edited.enketo"),this.view.$.data("edited",t)},get surveyName(){return this.view.$.find("#form-title").text()},get instanceID(){return this.model.instanceID},get deprecatedID(){return this.model.deprecatedID},get instanceName(){return this.model.instanceName},get version(){return this.model.version},get encryptionKey(){return this.view.$.data("base64rsapublickey")},get action(){return this.view.$.attr("action")},get method(){return this.view.$.attr("method")},get id(){return this.view.html.id}}).addModule=function(t){return Object.create(t,{form:{value:this}})},L.prototype.init=function(){var e=[],i=this;if(e=e.concat(this.model.init()),void 0===this.model||!(this.model instanceof o))return e.push("Form could not be initialized without a model."),e;this.model.events.addEventListener("dataupdate",function(t){i.view.$.trigger("dataupdate.enketo",t.detail)}),this.model.events.addEventListener("removed",function(t){i.view.$.trigger("removed.enketo",t.detail)}),this.pages=this.addModule(l),this.langs=this.addModule(m),this.progress=this.addModule(c),this.widgets=this.addModule(f),this.preloads=this.addModule(g),this.relevant=this.addModule(h),this.repeats=this.addModule(a),this.input=this.addModule(s),this.output=this.addModule(v),this.itemset=this.addModule(u),this.calc=this.addModule(_),this.required=this.addModule(y),this.mask=this.addModule(w),this.readonly=this.addModule(b);try{return this.preloads.init(),this.view.$.data({instanceID:this.model.instanceID}),this.grosslyViolateStandardComplianceByIgnoringCertainCalcs(),this.calc.update(),this.langs.init(),this.pages.init(),this.repeats.init(),this.itemset.update(),this.setAllVals(),this.readonly.update(),this.options.input=this.input,this.options.pathToAbsolute=this.pathToAbsolute.bind(this),this.options.evaluate=this.model.evaluate.bind(this.model),this.options.formClasses=p.toArray(this.view.html.classList),this.options.getModelValue=this.getModelValue.bind(this),this.widgetsInitialized=this.widgets.init(null,this.options),this.relevant.update(),this.output.update(),this.setEventHandlers(),this.calc.update(),this.required.update(),this.mask.init(),(this.editStatus=!1)!==this.options.printRelevantOnly&&this.view.$.addClass("print-relevant-only"),setTimeout(function(){i.progress.update()},0),this.initialized=!0,e}catch(t){console.error(t),e.push(t.name+": "+t.message)}return document.querySelector("body").scrollIntoView(),console.debug("loadErrors",e),e},L.prototype.goTo=function(t){var e=[];return this.goToTarget(this.getGoToTarget(t))||e.push(n("alert.gotonotfound.msg",{path:location.hash.substring(1)})),e},L.prototype.getDataStr=function(t){return!1===(t="object"!=typeof t||null===t?{}:t).irrelevant?this.getDataStrWithoutIrrelevantNodes():this.model.getStr()},L.prototype.resetView=function(){d("#form-languages").remove(),this.view.$.replaceWith(this.view.$clone)},L.prototype.replaceChoiceNameFn=function(s,a,l,h,u){var c=this;return p.parseFunctionFromExpression(s,"jr:choice-name").forEach(function(t){var e=t[1];if(2!==e.length)throw new x("jr:choice-name function has incorrect number of parameters: "+t[0]);var i="",n=c.model.evaluate(e[0],a,l,h,u),o=p.stripQuotes(e[1]).trim(),r=c.view.$.find('[name="'+o+'"]');n?0<r.length&&"select"===r.prop("nodeName").toLowerCase()?i=r.find('[value="'+n+'"]').text():0<r.length&&"input"===r.prop("nodeName").toLowerCase()&&(i=r.attr("list")?r.siblings("datalist#"+r.attr("list")).find('[data-value="'+n+'"]').attr("value"):r.filter(function(){return d(this).attr("value")===n}).siblings(".option-label.active").text()):i="",s=s.replace(t[0],'"'+i+'"')}),s},L.prototype.setAllVals=function(t,e){var r=this,i=t&&t.attr("name")?t.attr("name"):null;e=void 0!==e?e:null,this.model.node(i,e,{onlyLeaf:!0,noEmpty:!0}).getElements().forEach(function(t){try{var e=t.textContent,i=r.model.getXPath(t,"instance"),n=r.model.node(i).getElements().indexOf(t),o=r.input.find(i,n);o.length&&r.input.setVal(o,e)}catch(t){throw console.error(t),new Error("Could not load input field value with name: "+i+" and value: "+e)}})},L.prototype.getModelValue=function(t){var e=this.input.getName(t),i=this.input.getIndex(t);return this.model.node(e,i).getVal()},L.prototype.getRelatedNodes=function(e,i,t){var n,o,r=null,s=[],a=this;t=t||{},i=i||"",this.$nonRepeats[e]||(o=this.view.$.find(":not(.or-repeat-info)["+e+"]").filter(function(){return 0===d(this).closest(".or-repeat").length}),this.$nonRepeats[e]=this.filterRadioCheckSiblings(o)),void 0!==t.repeatPath&&0<=t.repeatIndex&&(o=this.view.$.find('.or-repeat[name="'+t.repeatPath+'"]').eq(t.repeatIndex).find("["+e+"]"),r=this.filterRadioCheckSiblings(o)),!this.$all[e]||t.repeatPath&&!t.cloned?this.$all[e]=this.filterRadioCheckSiblings(this.view.$.find("["+e+"]")):t.cloned&&r&&(this.$all[e]=this.$all[e].add(r)),n=r?this.$nonRepeats[e].add(r):this.$all[e],t.nodes&&0!==t.nodes.length?(t.nodes.forEach(function(t){s=s.concat(a.getQuerySelectorsForLogic(i,e,t))}),s=s.concat(a.getQuerySelectorsForLogic(i,e,"*"))):s=s.concat([i]);var l=s.join(", ");return n=l?n.filter(l):n},L.prototype.filterRadioCheckSiblings=function(t){var e=[];return t.filter(function(){var t="radio"===this.type||"checkbox"===this.type?d(this.parentNode).parent(".option-wrapper")[0]:null;if(t){if(-1!==e.indexOf(t))return!1;e.push(t)}return!0})},L.prototype.getQuerySelectorsForLogic=function(t,e,i){return[t+"["+e+'*="/'+i+' "]',t+"["+e+'*="/'+i+')"]',t+"["+e+'*="/'+i+',"]',t+"["+e+'$="/'+i+'"]',t+"["+e+'*="/'+i+']"]']},L.prototype.getDataStrWithoutIrrelevantNodes=function(){var r=this,s=new o(this.model.getStr());return s.init(),this.getRelatedNodes("data-relevant").reverse().each(function(){var t,e=d(this),i=r.input.getRelevant(e),n=r.input.getIndex(e),o=r.input.getName(e);(t=e.children('.or-repeat-info[data-name="'+o+'"]').length&&!e.children('.or-repeat[name="'+o+'"]').length?null:o)&&!r.model.evaluate(i,"boolean",t,n)&&s.node(t,n).remove()}),s.getStr()},L.prototype.grosslyViolateStandardComplianceByIgnoringCertainCalcs=function(){var t=this.view.$.find('[name$="instanceID"][data-calculate]');0<t.length&&t.removeAttr("data-calculate")},L.prototype.validationUpdate=function(t){var e,i=this;!0===r.validateContinuously&&(e=t||{},t.cloned&&(e={nodes:t.repeatPath.split("/").reverse().slice(0,1)}),this.getRelatedNodes("data-constraint","",e).add(this.getRelatedNodes("data-required","",e)).each(function(){i.validateInput(d(this))}))},L.prototype.setEventHandlers=function(){var o=this;this.view.$.attr("onsubmit","return false;"),this.view.$.on("change.file","input:not(.ignore), select:not(.ignore), textarea:not(.ignore)",function(){var e=d(this),t={path:o.input.getName(e),inputType:o.input.getInputType(e),xmlType:o.input.getXmlType(e),val:o.input.getVal(e),index:o.input.getIndex(e)};0<t.val.length&&"file"===t.inputType&&e[0].files[0]&&0<e[0].files[0].size&&(t.val=p.getFilename(e[0].files[0],e[0].dataset.filenamePostfix)),0<t.val.length&&"drawing"===t.inputType&&(t.val=p.getFilename({name:t.val},e[0].dataset.filenamePostfix)),o.model.node(t.path,t.index).setVal(t.val,t.xmlType)&&o.validateInput(e).then(function(t){e.trigger("valuechange.enketo",t)})}),this.view.$.on("focus fakefocus","input:not(.ignore), select:not(.ignore), textarea:not(.ignore)",function(t){o.progress.update(t.target)}),this.model.events.addEventListener("dataupdate",function(e){o.evaluationCascade.forEach(function(t){t.call(o,e.detail)},!0),o.editStatus=!0}),this.view.$.on("addrepeat",function(t,e){var i=d(t.target),n={repeatPath:i.attr("name"),repeatIndex:e,cloned:!0};o.setAllVals(i,e),o.evaluationCascade.forEach(function(t){t.call(o,n)}),o.progress.update()}),this.view.$.on("removerepeat",function(){o.progress.update()}),this.view.$.on("changelanguage",function(){o.output.update()}),this.view.$.find(".or-group > h4").on("click",function(){d(this).closest(".or-group").toggleClass("or-appearance-compact").trigger("resize")})},L.prototype.setValid=function(t,e){var i=e?"invalid-"+e:"invalid-constraint invalid-required invalid-relevant";this.input.getWrapNodes(t).removeClass(i)},L.prototype.setInvalid=function(t,e){e=e||"constraint",!1===r.validatePage&&this.isValid(t)&&this.blockPageNavigation(),this.input.getWrapNodes(t).addClass("invalid-"+e)},L.prototype.blockPageNavigation=function(){var t=this;this.pageNavigationBlocked=!0,window.clearTimeout(this.blockPageNavigationTimeout),this.blockPageNavigationTimeout=window.setTimeout(function(){t.pageNavigationBlocked=!1},600)},L.prototype.isValid=function(t){var e;return t?!(e=this.input.getWrapNodes(t)).hasClass("invalid-required")&&!e.hasClass("invalid-constraint")&&!e.hasClass("invalid-relevant"):0===this.view.$.find(".invalid-required, .invalid-constraint, .invalid-relevant").length},L.prototype.clearIrrelevant=function(){this.relevant.update(null,!0)},L.prototype.validate=L.prototype.validateAll=function(){var e=this;return!1===this.options.clearIrrelevantImmediately&&this.clearIrrelevant(),this.validateContent(this.view.$).then(function(t){return e.view.$.trigger("validationcomplete.enketo"),t})},L.prototype.validateContent=function(t){var e,i=this;t.find("fieldset:disabled input, fieldset:disabled select, fieldset:disabled textarea, input:disabled, select:disabled, textarea:disabled").each(function(){i.setValid(d(this))});var n=t.find(".question").addBack(".question").map(function(){var t=d(this).find("input:not(.ignore):not(:disabled), select:not(.ignore):not(:disabled), textarea:not(.ignore):not(:disabled)");return 0===t.length?Promise.resolve():i.validateInput(t.eq(0))}).toArray();return Promise.all(n).then(function(){return 0<(e=t.find(".invalid-required, .invalid-constraint, .invalid-relevant").addBack(".invalid-required, .invalid-constraint, .invalid-relevant").eq(0)).length&&i.goToTarget(e[0]),0===e.length}).catch(function(){return!1})},L.prototype.pathToAbsolute=function(t,e){var i;return 0===t.indexOf("/")?t:(i=this.model.evaluate(t,"node",e,0,!0),this.model.getXPath(i,"instance",!1))},L.prototype.validateInput=function(n){if(!this.initialized)return Promise.resolve();var t,o=this,r={path:this.input.getName(n),inputType:this.input.getInputType(n),xmlType:this.input.getXmlType(n),enabled:this.input.isEnabled(n),constraint:this.input.getConstraint(n),calculation:this.input.getCalculation(n),required:this.input.getRequired(n),readonly:this.input.getReadonly(n),val:this.input.getVal(n)};return!r.readonly||r.val||r.required||r.constraint||r.calculation?(r.enabled&&"hidden"!==r.inputType?(r.ind=this.input.getIndex(n),t=this.model.node(r.path,r.ind).validate(r.constraint,r.required,r.xmlType)):t=Promise.resolve({requiredValid:!0,constraintValid:!0}),t.then(function(t){var e=!1,i=!1!==t.requiredValid&&!1!==t.constraintValid;return"hidden"!==r.inputType&&(r.$q=o.input.getWrapNodes(n),e=r.$q.hasClass("invalid-required")||r.$q.hasClass("invalid-constraint"),!1===t.requiredValid?(o.setValid(n,"constraint"),o.setInvalid(n,"required")):!1===t.constraintValid?(o.setValid(n,"required"),o.setInvalid(n,"constraint")):(o.setValid(n,"constraint"),o.setValid(n,"required"))),i||e||n.trigger("invalidated.enketo"),i}).catch(function(t){throw console.error("validation error",t),o.setInvalid(n,"constraint"),t})):Promise.resolve()},L.prototype.getGoToTarget=function(t){var e,i,n,o,r="",s=/([^[]+)\[(\d+)\]([^[]*$)?/g;if(t&&(i=this.model.node(t).getElement())){if(t=this.model.getXPath(i,"instance",!0),!(n=this.view.html.querySelector('[name="'+t+'"]')))for(o=this.view.html;null!==(e=s.exec(t))&&o;)r+=e[1],(o=o.querySelectorAll('[name="'+r+'"], [data-name="'+r+'"]')[e[2]])&&e[3]&&(r+=e[3],o=o.querySelector('[name="'+r+'"],[data-name="'+r+'"]')),n=o;return n?this.input.getWrapNodes(d(n)).get(0):n}},L.prototype.goToTarget=function(t){return t&&(this.pages.active&&this.pages.flipToPageContaining(d(t)),d(t).closest(".or-branch.disabled").length&&d(t).trigger("gotohidden.enketo"),t.scrollIntoView(),d(t.querySelector("input:not(.ignore), textarea:not(.ignore), select:not(.ignore)")).trigger("focus").trigger("applyfocus")),!!t},L.getRequiredTransformerVersion=function(){return console.deprecate("Form.getRequiredTransformerVersion()","Form.requiredTransformerVersion"),L.requiredTransformerVersion},L.requiredTransformerVersion="1.30.0",(e.exports=L).prototype.getInstanceID=function(){return console.deprecate("form.getInstanceID()","form.instanceID"),this.instanceID},L.prototype.getDeprecatedID=function(){return console.deprecate("form.getDeprecatedID()","form.deprecatedID"),this.deprecatedID},L.prototype.getInstanceName=function(){return console.deprecate("form.getModel()","form.instanceName"),this.instanceName},L.prototype.getVersion=function(){return console.deprecate("form.getVersion()","form.version"),this.version},L.prototype.getEncryptionKey=function(){return console.deprecate("form.getEncryptionKey()","form.encryptionKey"),this.encryptionKey},L.prototype.getAction=function(){return console.deprecate("form.getAction()","form.action"),this.action},L.prototype.getMethod=function(){return console.deprecate("form.getMethod()","form.method "),this.method},L.prototype.getModel=function(){return console.deprecate("form.getModel()","form.model"),this.model},L.prototype.getView=function(){return console.deprecate("form.getView()","form.view"),this.view},L.prototype.getRecordName=function(){return console.deprecate("form.getRecordName()","form.recordName"),this.recordName},L.prototype.setRecordName=function(t){console.deprecate("form.setRecordName()",'form.recordName="val"'),this.recordName=t},L.prototype.setEditStatus=function(t){console.deprecate("form.setEditStatus()",'form.editStatus="val"'),this.editStatus=t},L.prototype.getEditStatus=function(){return console.deprecate("form.getEditStatus()","form.editStatus"),this.editStatus},L.prototype.getSurveyName=function(){return console.deprecate("form.getSurveyName()","form.editStatus"),this.surveyName}},{"./Form-logic-error":18,"./Form-model":19,"./calculate":22,"./extend":26,"./input":31,"./itemset":32,"./language":33,"./mask":34,"./output":35,"./page":36,"./plugins":37,"./preload":38,"./progress":39,"./readonly":40,"./relevant":41,"./repeat":42,"./required":43,"./utils":48,"./widgets-controller":49,"enketo/config":2,"enketo/translator":28,jquery:12}],21:[function(t,e,i){"use strict";var n=t("jquery"),o=function(t,e,i){this.element=t,this.options=e||{},this.namespace=this.namespace||"somewidget",this.event=i||null};o.prototype={destroy:function(t){n(t).removeData(this.namespace).off("."+this.namespace).show().next(".widget").remove()},disable:function(t){n(t).next(".widget").addClass("readonly")},enable:function(t){t.readOnly||n(t).next(".widget").removeClass("readonly")},update:function(){},resetButtonHtml:'<button type="button" class="btn-icon-only btn-reset" aria-label="reset"><i class="icon icon-refresh"> </i></button>',downloadButtonHtml:'<a class="btn-icon-only btn-download" aria-label="download" download href=""><i class="icon icon-download"> </i></a>'},e.exports=o},{jquery:12}],22:[function(t,e,i){"use strict";var f=t("jquery"),m=t("enketo/config");e.exports={update:function(r,t){var p=this;if(t=t||"",!this.form)throw new Error("Calculation module not correctly instantiated with form property.");((r=r||{}).relevantPath?this.form.getRelatedNodes("data-calculate",'[name^="'+r.relevantPath+'/"]'+t).add(this.form.getRelatedNodes("data-calculate",'[name="'+r.relevantPath+'"]'+t)).add(this.form.getRelatedNodes("data-calculate",'[data-name="'+r.relevantPath+'"]'+t)):this.form.getRelatedNodes("data-calculate",t,r)).each(function(){var a=f(this),l=p.form.input.getName(a),t=-1!==l.lastIndexOf("/")?l.substring(l.lastIndexOf("/")+1):l,h=p.form.input.getCalculation(a),u=p.form.input.getXmlType(a),c=p.form.input.getRelevant(a),d=p.form.model.node(l),e=d.getElements();if(1<e.length)if(r.repeatPath&&-1!==l.indexOf(r.repeatPath)){var i=p.form.model.node(r.repeatPath,r.repeatIndex).getElement().querySelector(t);o(e.indexOf(i))}else if("hidden"===a[0].type)e.forEach(function(t,e){o(e)});else{var n=a.closest(".or-repeat").siblings(".or-repeat").addBack();n.length===e.length&&o(n.index(a.closest(".or-repeat")))}else 1===e.length&&o(0);function o(t){var e=l.split("/"),i=e.splice(0,e.length-1).join("/"),n=p.form.view.$.find('.or-group[name="'+i+'"],.or-group-data[name="'+i+'"]').eq(t).parents(".or-group, .or-group-data").addBack();if(n.length)var o=n.filter("[data-relevant]").reverse().get().map(function(t){var e=f(t),i=p.form.input.getName(e);return{context:i,index:p.form.view.$.find('.or-group[name="'+i+'"], .or-group-data[name="'+i+'"]').index(e),expr:p.form.input.getRelevant(e)}}).concat([{context:l,index:t,expr:c}]).every(function(t){return!t.expr||p.form.model.evaluate(t.expr,"boolean",t.context,t.index)});else o=!c||p.form.model.evaluate(c,"boolean",l,t);var r=p.form.replaceChoiceNameFn(h,"string",l,t),s=o&&r?p.form.model.evaluate(r,"string",l,t):"";d.setIndex(t),d.setVal(s,u),p.form.input.setVal(a,d.getVal()),!0===m.validateContinuously&&p.form.validateInput(a)}})}}},{"enketo/config":2,jquery:12}],23:[function(t,e,i){e.exports={getSiblingElementsAndSelf:function(t,e){var i=[t],n=t.previousElementSibling,o=t.nextElementSibling;for(e=void 0===e?"*":e;n;)n.matches(e)&&i.unshift(n),n=n.previousElementSibling;for(;o;)o.matches(e)&&i.push(o),o=o.nextElementSibling;return i}}},{}],24:[function(t,e,i){var a=t("jquery"),l="[data-toggle=dropdown]",n=function(t){a(t).on("click.bs.dropdown",this.toggle)};function r(i){a(".dropdown-backdrop").remove(),a(l).each(function(){var t=h(a(this)),e={relatedTarget:this};t.hasClass("open")&&(t.trigger(i=a.Event("hide.bs.dropdown",e)),i.isDefaultPrevented()||t.removeClass("open").trigger("hidden.bs.dropdown",e))})}function h(t){var e=t.attr("data-target");e||(e=(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var i=e&&a(e);return i&&i.length?i:t.parent()}n.prototype.toggle=function(t){var e=a(this);if(!e.is(".disabled, :disabled")){var i=h(e),n=i.hasClass("open");if(r(),!n){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",r);var o={relatedTarget:this};if(i.trigger(t=a.Event("show.bs.dropdown",o)),t.isDefaultPrevented())return;i.toggleClass("open").trigger("shown.bs.dropdown",o),e.focus()}return!1}},n.prototype.keydown=function(t){if(/^(38|40|27)$/.test(t.keyCode)){var e=a(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var i=h(e),n=i.hasClass("open");if(!n||n&&27===t.keyCode)return 27===t.which&&i.find(l).focus(),e.click();var o=" li:not(.divider):visible a",r=i.find("[role=menu]"+o+", [role=listbox]"+o);if(r.length){var s=r.index(r.filter(":focus"));38===t.keyCode&&0<s&&s--,40===t.keyCode&&s<r.length-1&&s++,~s||(s=0),r.eq(s).focus()}}}};var o=a.fn.dropdown;a.fn.dropdown=function(i){return this.each(function(){var t=a(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",new n(this)),"string"==typeof i&&e[i].call(t)})},a.fn.dropdown.Constructor=n,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=o,this},a(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",l,n.prototype.toggle).on("keydown.bs.dropdown.data-api",l+", [role=menu], [role=listbox]",n.prototype.keydown)},{jquery:12}],25:[function(t,e,i){e.exports={DataUpdate:function t(e){return this instanceof t?new CustomEvent("dataupdate",{detail:e}):new t(e)},Removed:function t(e){return this instanceof t?new CustomEvent("removed",{detail:e}):new t(e)},Change:function(){return new Event("change",{bubbles:!0})}}},{}],26:[function(t,e,i){"use strict";t("enketo-xpathjs/src/date-extensions"),String.prototype.pad=function(t){for(var e=this;e.length<t;)e="0"+e;return e},void 0===console.deprecate&&(console.deprecate=function(t,e){console.warn(t+" is deprecated. Use "+e+" instead.")})},{"enketo-xpathjs/src/date-extensions":6}],27:[function(t,e,i){"use strict";e.exports={alert:function(t){return window.alert(t),Promise.resolve()},confirm:function(t){return Promise.resolve(window.confirm(t))},prompt:function(t,e){return Promise.resolve(window.prompt(t,e))}}},{}],28:[function(t,e,i){"use strict";var o={constraint:{invalid:"Value not allowed",required:"This field is required"},"esri-geopicker":{"coordinate-mgrs":"MGRS coordinate",decimal:"decimal",degrees:"degrees, minutes, seconds","latitude-degrees":"latitude (dÂ° mâ sâ N)","longitude-degrees":"longitude (dÂ° mâ sâ W)",mgrs:"MGRS",notavailable:"Not Available",utm:"UTM","utm-easting":"easting (m)","utm-hemisphere":"hemisphere","utm-north":"North","utm-northing":"northing (m)","utm-south":"South","utm-zone":"zone"},filepicker:{placeholder:"Click here to upload file. (< __maxSize__)",notFound:"File __existing__ could not be found (leave unchanged if already submitted and you want to preserve it).",waitingForPermissions:"Waiting for user permissions.",resetWarning:"This will remove the __item__. Are you sure you want to do this?",toolargeerror:"File too large (> __maxSize__)",file:"file"},drawwidget:{drawing:"drawing",signature:"signature",annotation:"file and drawing"},form:{required:"required"},geopicker:{accuracy:"accuracy (m)",altitude:"altitude (m)",closepolygon:"close polygon",kmlcoords:"KML coordinates",kmlpaste:"paste KML coordinates here",latitude:"latitude (x.y Â°)",longitude:"longitude (x.y Â°)",points:"points",searchPlaceholder:"search for place or address",removePoint:"This will completely remove the current geopoint from the list of geopoints and cannot be undone. Are you sure you want to do this?"},selectpicker:{noneselected:"none selected",numberselected:"__number__ selected"},imagemap:{svgNotFound:"SVG image could not be found"},rankwidget:{tapstart:"Tap to start",clickstart:"Click to start"},widget:{comment:{update:"Update"}},alert:{gotonotfound:{msg:"Failed to find question '__path__' in form. Is it a valid path?"}}};e.exports={t:function(t,i){var e="",n=o;return t.split(".").forEach(function(t){n=n?n[t]:"",e=n}),i=i||{},e=e.replace(/__([^_]+)__/,function(t,e){return i[e]})}}},{}],29:[function(t,e,i){"use strict";var o=t("jquery"),r=t("./utils"),n={},s=t("enketo/translator").t;n.init=function(){return Promise.resolve(!0)},n.isWaitingForPermissions=function(){return!1},n.getFileUrl=function(i){return new Promise(function(t,e){i?"string"==typeof i?e("no!"):"object"==typeof i?n.isTooLarge(i)?e(new Error(s("filepicker.toolargeerror",{maxSize:n.getMaxSizeReadable()}))):t(URL.createObjectURL(i)):e(new Error("Unknown error occurred")):t(null)})},n.getObjectUrl=function(t){return n.getFileUrl(t).then(function(t){return/https?:\/\//.test(t)?n.urlToBlob(t).then(URL.createObjectURL):t})},n.urlToBlob=function(e){var i=new XMLHttpRequest;return new Promise(function(t){i.open("GET",e),i.responseType="blob",i.onload=function(){t(i.response)},i.send()})},n.getCurrentFiles=function(){var n=[];return o("form.or").find('input[type="file"]:not(.ignore), input[type="text"][data-drawing="true"]').each(function(){var t,e=null,i=null;"file"===this.type?e=this.files[0]:this.value&&(i=o(this).closest(".question")[0].querySelector(".draw-widget canvas"))&&((e=r.dataUriToBlobSync(i.toDataURL())).name=this.value),e&&e.name&&(t=r.getFilename(e,this.dataset.filenamePostfix),(e=new Blob([e],{type:e.type})).name=t,n.push(e))}),n},n.isTooLarge=function(){return!1},n.getMaxSizeReadable=function(){return"5MB"},e.exports=n},{"./utils":48,"enketo/translator":28,jquery:12}],30:[function(t,e,i){var n=navigator.language,o="[:0-9Ù -Ù©]+",r="[^: 0-9Ù -Ù©]+",s=new RegExp("^("+o+" ?("+r+"))|(("+r+") ?"+o+")$");function a(t){return l((t=void 0===t?new Date:t).toLocaleTimeString(n))}function l(t){return t.replace(/[\u200E\u200F]/g,"")}e.exports={set language(t){console.deprecate("format.language","format.locale"),n=t},set locale(t){n=t},time:{get hour12(){return this.hasMeridian(a())},get pmNotation(){return this.meridianNotation(new Date(2e3,1,1,23,0,0))},get amNotation(){return this.meridianNotation(new Date(2e3,1,1,1,0,0))},meridianNotation:function(t){var e=a(t).match(s);return e&&e.length?(e=e.filter(function(t){return!!t}))[e.length-1]:null},hasMeridian:function(t){return s.test(l(t))}}}},{}],31:[function(t,e,i){"use strict";e.exports={getWrapNodes:function(t){return"fieldset"===this.getInputType(t.eq(0))?t:t.closest(".question, .calculation")},getProps:function(t){return 1!==t.length?console.error("getProps(): no input node provided or multiple"):{path:this.getName(t),ind:this.getIndex(t),inputType:this.getInputType(t),xmlType:this.getXmlType(t),constraint:this.getConstraint(t),calculation:this.getCalculation(t),relevant:this.getRelevant(t),readonly:this.getReadonly(t),val:this.getVal(t),required:this.getRequired(t),enabled:this.isEnabled(t),multiple:this.isMultiple(t)}},getInputType:function(t){var e;return 1!==t.length?"":"input"===(e=t.prop("nodeName").toLowerCase())?t.data("drawing")?"drawing":0<t.attr("type").length?t.attr("type").toLowerCase():console.error("<input> node has no type"):"select"===e?"select":"textarea"===e?"textarea":"fieldset"===e||"section"===e?"fieldset":console.error("unexpected input node type provided")},getConstraint:function(t){return t.attr("data-constraint")},getRequired:function(t){if(0===t.parentsUntil(".or",".or-appearance-label").length)return t.attr("data-required")},getRelevant:function(t){return t.attr("data-relevant")},getReadonly:function(t){return t.is("[readonly]")},getCalculation:function(t){return t.attr("data-calculate")},getXmlType:function(t){return 1!==t.length?console.error("getXMLType(): no input node provided or multiple"):t.attr("data-type-xml")},getName:function(t){return 1!==t.length?console.error("getName(): no input node provided or multiple"):t.attr("data-name")||t.attr("name")||console.error("input node has no name")},getIndex:function(t){return 1!==t.length?console.error("getIndex(): no input node provided or multiple"):this.form.repeats.getIndex(t[0].closest(".or-repeat"))},isMultiple:function(t){return"checkbox"===this.getInputType(t)||void 0!==t.attr("multiple")},isEnabled:function(t){return!(t.prop("disabled")||0<t.parentsUntil(".or",".disabled").length)},getVal:function(t){var e,i,n=[];return 1!==t.length?console.error("getVal(): no inputNode provided or multiple"):(e=this.getInputType(t),i=this.getName(t),"radio"===e?this.getWrapNodes(t).find("input:checked").val()||"":"checkbox"===e?(this.getWrapNodes(t).find('input[name="'+i+'"]:checked').each(function(){n.push(this.value)}),n):t.val()||"")},find:function(t,e){var i="name";return"radio"===this.getInputType(this.form.view.$.find('[data-name="'+t+'"]:not(.ignore)').eq(0))&&(i="data-name"),this.getWrapNodes(this.form.view.$.find("["+i+'="'+t+'"]')).eq(e).find("["+i+'="'+t+'"]:not(.ignore)').eq(0)},setVal:function(t,e){var i,n=this.getInputType(t),o=this.getWrapNodes(t),r=this.getName(t);if("radio"===n)i=o.find('[data-name="'+r+'"]:not(.ignore)');else{if(i=o.find('[name="'+r+'"]:not(.ignore)'),"file"===n)return t.attr("data-loaded-file-name",e),!1;if("date"!==n&&"datetime"!==n||(e=this.form.model.types[n].convert(e)),"time"===n&&/(\+|-)/.test(e)){var s=(new Date).toLocaleDateString("en",{month:"short",day:"numeric",year:"numeric"}).replace(/\u200E/g,"")+" "+e.replace(/(\d\d:\d\d:\d\d)(\.\d{1,3})(\s?((\+|-)\d\d))(:)?(\d\d)?/,"$1 GMT$3$7"),a=new Date(s);"Invalid Date"!==a.toString()?e=a.getHours().toString().pad(2)+":"+a.getMinutes().toString().pad(2):console.error("could not parse time:",e)}}if(!0===this.isMultiple(t)?e=e.split(" "):"radio"===n&&(e=[e]),i.length){var l=this.getVal(t);void 0!==l&&l.toString()===e.toString()||(i.val(e),i.eq(0).trigger("inputupdate.enketo"))}return i[0]},validate:function(t){return this.form.validateInput(t)}}},{}],32:[function(t,e,i){"use strict";var C=t("jquery"),D=t("./utils");e.exports={update:function(t){var k=this,T={};if(!this.form)throw new Error("Output module not correctly instantiated with form property.");var e=this.form.getRelatedNodes("data-items-path",".itemset-template",t),E=this.form.repeatsPresent&&this.form.view.html.querySelector(".or-repeat.clone");e.each(function(){var t,e,i=C(this),n={};if(!i.parentsUntil(".or",".or-branch").parentsUntil(".or",".disabled").length){var o={},r=i.data(),s=i.prop("nodeName").toLowerCase(),a=i.parent("select, datalist");if("label"===s){var l=i.children("input").eq(0);[].slice.call(l[0].attributes).forEach(function(t){n[t.name]=t.value}),t=l.hasClass("ignore")?l.closest(".option-wrapper").siblings("input.rank").eq(0):l}else"select"===a.prop("nodeName").toLowerCase()?t=a:"datalist"===a.prop("nodeName").toLowerCase()&&(t=a.siblings("input:not(.widget)"));var h=i.closest("label, select, datalist").siblings(".itemset-labels"),u=i.attr("data-items-path"),c=h.attr("data-label-type"),d=h.attr("data-label-ref"),p=D.parseFunctionFromExpression(d,"translate");p.length&&(d=p[0][1][0],c="langs");var f=h.attr("data-value-ref"),m=k.form.input.getName(t),g=!!(E&&0<t.parentsUntil(".or",".or-repeat").length),v=!!(E&&0<t.parentsUntil(".or",".or-repeat.clone").length)?k.form.input.getIndex(t):0;if(void 0!==T[u])e=T[u];else{e=C(k.form.model.evaluate(u,"nodes",m,v,!0)),g||(T[u]=e)}if(o.length=e.length,o.text=e.text(),o.length!==r.length||o.text!==r.text){i.data(o);var _=i.closest(".question");_.find(s).not(i).remove();var y=_.find(".or-option-translations").empty()[0],w=document.createDocumentFragment(),b=document.createDocumentFragment(),x=[];e.each(function(){var t=k.getNodesFromItem(d,this);if(t&&t.length)switch(c){case"itext":x=h.find('[data-itext-id="'+t[0].textContent+'"]').get().map(function(t){var e=t.getAttribute("lang"),i=t.nodeName,n=t.src;return{language:e,type:i,text:t.textContent,active:t.classList.contains("active"),src:n,alt:t.alt}});break;case"langs":x=x.map(function(t){var e=t.getAttribute("lang"),i=e===k.form.langs.getCurrentLang();return{language:e,type:"span",text:t.textContent,active:i}});break;default:x=[{language:"",type:"span",text:t&&t.length?t[0].textContent:"error",active:!0}]}else x=[{language:"",label:"error",active:!0}];var e=k.getNodeFromItem(f,this).textContent;if("label"===s)w.appendChild(k.createInput(n,x,e));else if("option"===s){var i="";1<x.length?x.forEach(function(t){t.active&&(i=t.text),b.appendChild(k.createOptionTranslation(t,e))}):i=x[0].text,w.appendChild(k.createOption(i,e))}}),this.parentNode.appendChild(w),y&&y.appendChild(b);var L=k.form.model.node(m,v).getVal();""!==L&&(t.hasClass("rank")&&(L=""),k.form.input.setVal(t,L),t.trigger("change")),(0<a.length||t.hasClass("rank"))&&t.trigger("changeoption")}}})},getNodesFromItem:function(t,e,i){if(!t||!e)throw new Error("Error: could not query instance item, no expression and/or context provided");var n=i?9:7,o=void 0!==this.form.model.xml.evaluate?"evaluate":"jsEvaluate",r=this.form.model.xml[o](t,e,this.form.model.getNsResolver(),n,null),s=[];if(i)s.push(r.singleNodeValue);else for(var a=0;a<r.snapshotLength;a++)s.push(r.snapshotItem(a));return s},getNodeFromItem:function(t,e){var i=this.getNodesFromItem(t,e,!0);return i.length?i[0]:null},createOption:function(t,e){var i=document.createElement("option");return i.textContent=t,i.value=e,i},createOptionTranslation:function(t,e){var i=document.createElement(t.type||"span");return t.text&&(i.textContent=t.text,i.classList.add("option-label")),i.classList.toggle("active",t.active),i.lang=t.language,i.dataset.optionValue=e,t.src&&(i.src=t.src,i.alt=t.alt),i},createInput:function(e,t,i){var n=this,o=document.createElement("label"),r=document.createElement("input");return Object.getOwnPropertyNames(e).forEach(function(t){r.setAttribute(t,e[t])}),r.value=i,o.appendChild(r),t.forEach(function(t){o.appendChild(n.createOptionTranslation(t,i))}),o}}},{"./utils":48,jquery:12}],33:[function(t,e,i){"use strict";var o=t("jquery");e.exports={init:function(){var e=this;if(!this.form)throw new Error("Language module not correctly instantiated with form property.");var t=this.form.view.html.closest("body")||this.form.view.html.parentNode;if(t){var i=o(t.querySelector(".form-language-selector"));this.$formLanguages=o(this.form.view.html.querySelector("#form-languages")),this.currentLang=this.$formLanguages.attr("data-default-lang")||this.$formLanguages.find("option").eq(0).attr("value");var n=this.$formLanguages.find('[value="'+this.currentLang+'"]').attr("data-dir")||"ltr";i.length&&1<this.$formLanguages.find("option").length&&(this.$formLanguages.detach().appendTo(i),i.removeClass("hide")),this.$formLanguages.val(this.currentLang),this.form.view.$.attr("dir",n),this.$formLanguages.find("option").length<2||this.$formLanguages.change(function(t){t.preventDefault(),e.currentLang=o(this).val(),e.setAll(e.currentLang)})}},getCurrentLang:function(){return this.currentLang},getCurrentLangDesc:function(){return this.$formLanguages.find('[value="'+this.currentLang+'"]').text()},setAll:function(t){var e=this,i=this.$formLanguages.find('[value="'+t+'"]').attr("data-dir")||"ltr";this.form.view.$.attr("dir",i).find("[lang]").removeClass("active").filter('[lang="'+t+'"], [lang=""]').filter(function(){var t=o(this);return!t.hasClass("or-form-short")||t.hasClass("or-form-short")&&0===t.siblings(".or-form-long").length}).addClass("active"),window.enketoFormLocale=t,this.form.view.$.find("select, datalist").each(function(){e.setSelect(this)}),this.form.view.$.trigger("changelanguage")},setSelect:function(t){var r=t.nodeName.toLowerCase(),e=t.closest(".question"),s=e?e.querySelector(".or-option-translations"):null;s&&Array.prototype.slice.call(t.children).filter(function(t){return t.matches("option")&&!t.matches('[value=""], [data-value=""]')}).forEach(function(t){var e="datalist"===r?t.value:t.textContent,i="datalist"===r?t.dataset.value:t.value,n=s.querySelector('.active[data-option-value="'+i+'"]'),o=e;n&&n.textContent&&(o=n.textContent),t.value=i,t.textContent=o})}}},{jquery:12}],34:[function(t,e,i){"use strict";var o=t("jquery"),r=t("./utils"),s="xvc";function n(t,i,n){o(t).on("keydown",function(t){return!!(1<(i=t).key.length&&"Spacebar"!==i.key||(e=t,-1!==s.indexOf(e.key)&&(e.metaKey||e.ctrlKey))||-1!==n.indexOf(t.key));var e,i}).on("paste",function(t){var e=r.getPasteData(t);return!(!e||!i.test(e.trim()))||(o(this).val("").trigger("change"),!1)}).on("blur",function(){void 0!==this.validity&&void 0!==this.validity.badInput&&this.validity.badInput?this.value="":void 0===this.validity.badInput&&this.value&&!i.test(this.value.trim())&&(this.value="")})}e.exports={init:function(){n('[data-type-xml="int"]',/^(-?[0-9]+$)/,"-0123456789"),n('[data-type-xml="decimal"]',/^(-?[0-9]+[.,]?[0-9]*$)/,"-0123456789.,")}}},{"./utils":48,jquery:12}],35:[function(t,e,i){"use strict";var u=t("jquery");e.exports={update:function(t){var s={},a="",l=this;if(!this.form)throw new Error("Output module not correctly instantiated with form property.");var e=this.form.getRelatedNodes("data-value",".or-output",t),h=this.form.repeatsPresent&&this.form.view.html.querySelector(".or-repeat.clone");e.each(function(){var t=u(this);if(!t.closest(".or-branch").parent().closest(".disabled").length){var e=t.attr("data-value"),i=t.closest(".question, .or-group");i.is(".or-group")||(i=i.find("[name]").eq(0));var n=l.form.input.getName(i);i.children('.or-repeat-info[data-name="'+n+'"]').length&&!i.children('.or-repeat[name="'+n+'"]').length&&(n=null);var o=h&&0<t.parentsUntil(".or",".or-repeat").length,r=o&&0<t.parentsUntil(".or",".or-repeat.clone").length&&n?l.form.input.getIndex(i):0;void 0!==s[e]?a=s[e]:(a=l.form.model.evaluate(e,"string",n,r,!0),o||(s[e]=a)),t.text()!==a&&t.text(a)}})}}},{jquery:12}],36:[function(t,e,i){"use strict";var o=t("jquery"),r=t("enketo/config");t("jquery-touchswipe"),e.exports={active:!1,$current:[],$activePages:o(),init:function(){if(!this.form)throw new Error("Repeats module not correctly instantiated with form property.");if(this.form.view.$.hasClass("pages")){var t=this.form.view.$.find(' .question:not([role="comment"]), .or-appearance-field-list').add(".or-repeat.or-appearance-field-list + .or-repeat-info").filter(function(){return 0===o(this).parent().closest(".or-appearance-field-list").length}).attr("role","page");if(0<t.length||t.eq(0).hasClass("or-repeat")){var e=this.form.view.html.parentNode;this.$formFooter=o(e.querySelector(".form-footer")),this.$btnFirst=this.$formFooter.find(".first-page"),this.$btnPrev=this.$formFooter.find(".previous-page"),this.$btnNext=this.$formFooter.find(".next-page"),this.$btnLast=this.$formFooter.find(".last-page"),this.$toc=o(e.querySelector(".pages-toc__list")),this._updateAllActive(t),this._updateToc(),this._toggleButtons(0),this._setButtonHandlers(),this._setRepeatHandlers(),this._setBranchHandlers(),this._setSwipeHandlers(),this._setTocHandlers(),this._setLangChangeHandlers(),this.active=!0,this._flipToFirst()}}},flipToPageContaining:function(t){var e;(e=0===(e=t.closest('[role="page"]')).length?t.find('[role="page"]'):e).length&&this._flipTo(e[0]),this.$toc.parent().find(".pages-toc__overlay").click()},_setButtonHandlers:function(){var t=this;this.$btnFirst.off(".pagemode").on("click.pagemode",function(){return t.form.pageNavigationBlocked||t._flipToFirst(),!1}),this.$btnPrev.off(".pagemode").on("click.pagemode",function(){return t.form.pageNavigationBlocked||t._prev(),!1}),this.$btnNext.off(".pagemode").on("click.pagemode",function(){return t.form.pageNavigationBlocked||t._next(),!1}),this.$btnLast.off(".pagemode").on("click.pagemode",function(){return t.form.pageNavigationBlocked||t._flipToLast(),!1})},_setSwipeHandlers:function(){if(!1!==r.swipePage){var i=this,t=this.form.view.$.closest(".main");t.swipe("destroy"),t.swipe({allowPageScroll:"vertical",threshold:250,preventDefaultEvents:!1,swipeLeft:function(){i.$btnNext.click()},swipeRight:function(){i.$btnPrev.click()},swipeStatus:function(t,e){"start"===e&&i._getCurrent().find(":focus").blur()}})}},_setTocHandlers:function(){var e=this;this.$toc.on("click","a",function(){if(!e.form.pageNavigationBlocked){var t=o(this.parentNode).prevAll().length;e.flipToPageContaining(o(e.tocItems[t].pageEl))}return!1}).parent().find(".pages-toc__overlay").on("click",function(){e.$toc.parent().find("#toc-toggle").prop("checked",!1)})},_setRepeatHandlers:function(){var n=this;this.form.view.$.on("addrepeat.pagemode",function(t,e,i){n._updateAllActive(),i&&n.$activePages[0]!==t.target||n.flipToPageContaining(o(t.target))}).on("removerepeat.pagemode",function(t){if(0===n.$current.closest("html").length){n._updateAllActive();var e=o(t.target).prev();0===e.length&&(e=o(t.target)),n.flipToPageContaining(e)}})},_setBranchHandlers:function(){var t=this;this.form.view.$.on("changebranch.pagemode",function(){t._updateAllActive(),-1===t.$activePages.get().indexOf(t.$current[0])&&t._next(),t._toggleButtons()})},_setLangChangeHandlers:function(){var t=this;this.form.view.$.on("changelanguage.pagemode",function(){t._updateToc()})},_getCurrent:function(){return this.$current},_updateAllActive:function(t){t=t||this.form.view.$.find('[role="page"]'),this.$activePages=t.filter(function(){var t=o(this);return 0===t.closest(".disabled").length&&(t.is(".question")||0<t.find(".question:not(.disabled)").length||t.is(".or-repeat-info")&&0===t.siblings(".or-repeat").length)}),this._updateToc()},_getPrev:function(t){return this.$activePages[t-1]},_getNext:function(t){return this.$activePages[t+1]},_getCurrentIndex:function(){return this.$activePages.index(this.$current)},_next:function(){var n,o=this;return n=this._getCurrentIndex(),(!1===r.validatePage?Promise.resolve(!0):this.form.validateContent(this.$current)).then(function(t){var e,i;return!!t&&((e=o._getNext(n))&&(i=n+1,o._flipTo(e,i)),!0)})},_prev:function(){var t=this._getCurrentIndex(),e=this._getPrev(t);e&&this._flipTo(e,t-1)},_setToCurrent:function(t){var e=o(t);e.addClass("current hidden"),this.$current=e.removeClass("hidden").parentsUntil(".or",".or-group, .or-group-data, .or-repeat").addClass("contains-current").end()},_flipTo:function(t,e){0<this.$current.length&&1===this.$current.closest("html").length?this.$current[0]!==t&&(this.$current.removeClass("current fade-out").parentsUntil(".or",".or-group, .or-group-data, .or-repeat").removeClass("contains-current"),this._setToCurrent(t),this._focusOnFirstQuestion(t),this._toggleButtons(e),o(t).trigger("pageflip.enketo")):(this._setToCurrent(t),this._focusOnFirstQuestion(t),this._toggleButtons(e),o(t).trigger("pageflip.enketo"))},_flipToFirst:function(){this._flipTo(this.$activePages[0])},_flipToLast:function(){this._flipTo(this.$activePages.last()[0])},_focusOnFirstQuestion:function(t){o(t).find(".question:not(.disabled)").addBack(".question:not(.disabled)").filter(function(){return 0===o(this).parentsUntil(".or",".disabled").length}).eq(0).find("input, select, textarea").eq(0).trigger("fakefocus"),t.scrollIntoView()},_toggleButtons:function(t){var e=t||this._getCurrentIndex(),i=this._getNext(e),n=this._getPrev(e);this.$btnNext.add(this.$btnLast).toggleClass("disabled",!i),this.$btnPrev.add(this.$btnFirst).toggleClass("disabled",!n),this.$formFooter.toggleClass("end",!i)},_updateToc:function(){this.$toc.length&&(this.tocItems=this.$activePages.get().filter(function(t){return!t.classList.contains("or-repeat-info")}).map(function(t){var e=t.querySelector(".question-label.active");return!!e&&{pageEl:t,label:e.textContent}}),this.$toc.empty()[0].append(this._getTocHtmlFragment(this.tocItems)),this.$toc.closest(".pages-toc").removeClass("hide"))},_getTocHtmlFragment:function(t){var n=document.createDocumentFragment();return t.forEach(function(t){var e=document.createElement("li"),i=document.createElement("a");i.setAttribute("href","#"+t.pageEl.querySelector("[name]").getAttribute("name")),i.textContent=t.label,e.append(i),n.appendChild(e)}),n}}},{"enketo/config":2,jquery:12,"jquery-touchswipe":11}],37:[function(t,e,i){"use strict";var r=t("jquery");r.fn.clearInputs=function(n,o){return n=n||"edit",o=o||"",this.each(function(){r(this).find(".file-preview").remove(),r(this).find("input, select, textarea").not(".ignore").each(function(){var t,e=r(this),i=e.attr("type");switch("SELECT"===e.prop("nodeName").toUpperCase()&&(i="select"),"TEXTAREA"===e.prop("nodeName").toUpperCase()&&(i="textarea"),i){case"file":t=this.dataset.loadedFileName,delete this.dataset.loadedFileName;case"date":case"datetime":case"time":case"number":case"search":case"color":case"range":case"url":case"email":case"password":case"text":case"tel":case"hidden":case"textarea":(""!==e.val()||t)&&e.val("").trigger(n).trigger(o);break;case"radio":case"checkbox":e.prop("checked")&&(e.prop("checked",!1),e.trigger(n).trigger(o));break;case"select":0<e[0].selectedIndex&&(e[0].selectedIndex=0,e.trigger(n).trigger(o));break;default:console.error("Unrecognized input type found when trying to reset",this)}})})},r.fn.reverse=[].reverse},{jquery:12}],38:[function(t,e,i){"use strict";var l=t("jquery");e.exports={init:function(){var t,e,i,n,o,r,s,a=this;if(!this.form)throw new Error("Preload module not correctly instantiated with form property.");this.form.view.$.find("input[data-preload], select[data-preload], textarea[data-preload]").each(function(){s=l(this),r=a.form.input.getProps(s),t=s.attr("data-preload").toLowerCase(),e=s.attr("data-preload-params").toLowerCase(),void 0!==a[t]?(o=a.form.model.node(r.path,r.index)).getElements().length&&(i=o.getVal(),n=a[t]({param:e,curVal:i,dataNode:o}),o.setVal(n,r.xmlType)):console.log('Preload "'+t+'" not supported. May or may not be a big deal.')})},timestamp:function(t){var e,i=this;return"start"===t.param?0<t.curVal.length?t.curVal:this.form.model.evaluate("now()","string"):"end"===t.param?(this.form.view.$.on("beforesave",function(){e=i.form.model.evaluate("now()","string"),t.dataNode.setVal(e,"datetime")}),this.form.model.evaluate("now()","string")):"error - unknown timestamp parameter"},date:function(t){var e;return 0===t.curVal.length?(e=new Date(this.form.model.evaluate("today()","string"))).getFullYear().toString().pad(4)+"-"+(e.getMonth()+1).toString().pad(2)+"-"+e.getDate().toString().pad(2):t.curVal},property:function(t){var e;return 0===t.curVal.length?(e=this.form.model.node('instance("__session")/session/context/'+t.param)).getElements().length?e.getVal():"no "+t.param+" property in enketo":t.curVal},context:function(t){return 0===t.curVal.length?"application"===t.param?"enketo":t.param+" not supported in enketo":t.curVal},patient:function(t){return 0===t.curVal.length?"patient preload item not supported in enketo":t.curVal},user:function(t){return 0===t.curVal.length?"user preload item not supported in enketo yet":t.curVal},uid:function(t){return 0===t.curVal.length?this.form.model.evaluate('concat("uuid:", uuid())',"string"):t.curVal}}},{jquery:12}],39:[function(t,e,i){"use strict";var n=t("jquery");e.exports={status:0,lastChanged:null,$all:null,updateTotal:function(){this.$all=this.form.view.$.find(".question").not(".disabled, .or-appearance-comment, .or-appearance-dn").filter(function(){return 0===n(this).parentsUntil(".or",".disabled").length})},update:function(t){var e;this.$all&&t||this.updateTotal(),this.lastChanged=t||this.lastChanged,0<(e=Math.round(100*(this.$all.index(n(this.lastChanged).closest(".question"))+1)/this.$all.length))&&e!==this.status&&(this.status=e,this.form.view.$.trigger("progressupdate.enketo",e))},get:function(){return this.status}}},{jquery:12}],40:[function(t,e,i){"use strict";var n=t("jquery");e.exports={update:function(t){this.form.getRelatedNodes("readonly","",t).each(function(){n(this).closest(".question").addClass("readonly"),this.value||this.dataset.calculate||this.classList.contains("readonly-forced")||this.classList.add("empty")})}}},{jquery:12}],41:[function(t,e,i){"use strict";var g=t("jquery");e.exports={update:function(t,e){var i;if(!this.form)throw new Error("Branch module not correctly instantiated with form property.");i=this.form.getRelatedNodes("data-relevant","",t),this.updateNodes(i,e)},updateNodes:function(t,o){var r,s,a,l,h,u,c={},d=[],p=!1,f=this,m=this.form.repeatsPresent&&this.form.view.html.querySelector(".or-repeat.clone");t.each(function(){var t,e,i,n=g(this);-1===d.indexOf(n.attr("name"))&&(s=n.closest(".or-branch"),u=null,(r={}).relevant=f.form.input.getRelevant(n),r.path=f.form.input.getName(n),1===s.length?3<(e=r.path.split("/")).length&&(i=e.splice(0,e.length-1).join("/"),0===f.form.view.$.find('.or-group[name="'+i+'"],.or-group-data[name="'+i+'"]').filter(function(){var t=g(this);return 0<t.children(".or-repeat").length||0===t.children(".or-repeat-info").length}).length)||(l=m&&0<s.parentsUntil(".or",".or-repeat").length,h=m&&0<s.parentsUntil(".or",".or-repeat.clone").length,t=n.children('.or-repeat-info[data-name="'+r.path+'"]').length&&!n.children('.or-repeat[name="'+r.path+'"]').length?null:r.path,r.ind=t&&h?f.form.input.getIndex(n):0,-1===r.relevant.indexOf("..")&&(u=l?r.relevant+"__"+r.path.substring(0,r.path.lastIndexOf("/"))+"__"+r.ind:r.relevant),u&&void 0!==c[u]?a=c[u]:(a=f.evaluate(r.relevant,t,r.ind),c[u]=a),l||d.push(this.getAttribute("name")),!0===f.process(s,r.path,a,o)&&(p=!0)):0===n.parentsUntil(".or","#or-calculated-items").length&&console.error("could not find branch node for ",this))}),p&&this.form.view.$.trigger("changebranch")},evaluate:function(t,e,i){return this.form.model.evaluate(t,"boolean",e,i)},process:function(t,e,i,n){return!0===i?this.enable(t,e):this.disable(t,e,n)},selfRelevant:function(t){return!t.hasClass("disabled")&&!t.hasClass("pre-init")},enable:function(t,e){var i=!1;return this.selfRelevant(t)||(i=!0,t.removeClass("disabled pre-init"),this.form.calc.update({relevantPath:e}),this.form.output.update(),this.form.widgets.enable(t),this.activate(t)),i},disable:function(t,e,i){var n=t.hasClass("pre-init"),o=!1;return(n||this.selfRelevant(t)||i)&&(o=!0,n?t.removeClass("pre-init"):(this.form.options.clearIrrelevantImmediately||i)&&this.clear(t,e),this.deactivate(t)),o},clear:function(t,e){t.clearInputs("change","inputupdate.enketo"),t.is(".or-group, .or-group-data")&&this.form.calc.update({relevantPath:e})},setDisabledProperty:function(t,e){var i=t.prop("nodeName").toLowerCase();"label"===i?t.children("input, select, textarea").prop("disabled",e):"fieldset"===i||"section"===i?t.prop("disabled",e):t.find("fieldset, input, select, textarea").prop("disabled",e)},activate:function(t){this.setDisabledProperty(t,!1)},deactivate:function(t){t.addClass("disabled"),this.form.widgets.disable(t),this.setDisabledProperty(t,!0)}}},{jquery:12}],42:[function(t,e,i){"use strict";var p=t("jquery"),c=!0===t("enketo/config").repeatOrdinals;e.exports={init:function(){var t,i=this;if(!this.form)throw new Error("Repeat module not correctly instantiated with form property.");t=this.form.view.$.find(".or-repeat-info"),this.templates={},t.siblings(".or-repeat").filter(function(){return this.firstChild&&3===this.firstChild.nodeType&&(this.firstChild.textContent=""),!!this.querySelector(".question")}).prepend('<span class="repeat-number"></span>'),t.filter("*:not([data-repeat-fixed]):not([data-repeat-count])").append('<button type="button" class="btn btn-default add-repeat-btn"><i class="icon icon-plus"> </i></button>').siblings(".or-repeat").append('<div class="repeat-buttons"><button type="button" '+(c?" disabled ":" ")+'class="btn btn-default remove"><i class="icon icon-minus"> </i></button></div>'),this.form.model.extractFakeTemplates(t.map(function(){return this.dataset.name}).get()),t.siblings(".or-repeat").reverse().each(function(){var t=p(this).remove(),e=t.attr("name");t.removeClass("contains-current current").find(".current").removeClass("current"),i.templates[e]=t[0]}),t.filter("*:not([data-repeat-count])").reverse().each(function(){p(this).closest(".or-repeat").length||i.updateDefaultFirstRepeatInstance(null,this)}).each(i.updateViewInstancesFromModel.bind(this)),this.form.view.$.on("click","button.add-repeat-btn:enabled",function(){return i.add(p(this).closest(".or-repeat-info")[0]),!1}),this.form.view.$.on("click","button.remove:enabled",function(){return i.remove(p(this).closest(".or-repeat")),!1}),this.countUpdate()},getIndex:function(t){if(!t||!this.form.repeatsPresent)return 0;for(var e,i=t.parentElement.closest(".or-repeat"),n=t.classList.contains("or-repeat-info"),o=n?1:Number(t.querySelector(".repeat-number").textContent);i;){for(;i.previousElementSibling&&i.previousElementSibling.matches(".or-repeat");)i=i.previousElementSibling,n?o++:(e=e||t.getAttribute("name"),o+=i.querySelectorAll('.or-repeat[name="'+e+'"]').length);var r=i.parentElement;i=r?r.closest(".or-repeat"):null}return o-1},updateViewInstancesFromModel:function(t,e){var i=this,n=p(e),o=e.dataset.name,r=this.getIndex(e),s=this.form.model.getRepeatSeries(o,r),a=n.siblings(".or-repeat");return s.length>a.length&&(this.add(e,s.length-a.length),n.siblings(".or-repeat").find(".or-repeat-info:not([data-repeat-count])").each(function(){i.updateViewInstancesFromModel(null,this)})),s.length},updateDefaultFirstRepeatInstance:function(t,e){var i,n=p(e),o=e.dataset.name;this.form.model.data.instanceStr||this.templates[o].classList.contains("or-appearance-minimal")||(i=this.getIndex(e),0===this.form.model.getRepeatSeries(o,i).length&&this.add(e,1),n.siblings(".or-repeat").find(".or-repeat-info:not([data-repeat-count])").each(this.updateDefaultFirstRepeatInstance.bind(this)))},updateRepeatInstancesFromCount:function(t,e){var i,n,o,r,s,a,l,h=p(e),u=e.dataset.repeatCount||"";if(u){if(a=e.dataset.name,l=this.getIndex(e),(n=this.form.model.evaluate(u,"nodes",null,null,!0)).length&&n[l]?o=Number(n[l].textContent):console.error("Unexpectedly, could not obtain repeat count node"),0<(s=(o=isNaN(o)?0:o)-(r=h.siblings('.or-repeat[name="'+a+'"]').length)))this.add(e,s);else if(s<0)for(s=Math.abs(s)>=r?(c?1:0)-r:s;s<0;s++)i=h.siblings(".or-repeat").last(),this.remove(i,0);h.siblings(".or-repeat").children(".or-group, .or-group-data").children(".or-repeat-info[data-repeat-count]").each(this.updateRepeatInstancesFromCount.bind(this))}},countUpdate:function(t){t=t||{},this.form.getRelatedNodes("data-repeat-count",".or-repeat-info",t).each(this.updateRepeatInstancesFromCount.bind(this))},add:function(t,e){var i,n,o,r,s,a,l,h=p(t),u=!!e;if(e=e||1,!t)return console.error("Nothing to clone"),!1;s=t.dataset.name,i=h.siblings(".or-repeat"),n=p(this.templates[s]).clone(),r=this.getIndex(t),l=this.form.model.getRepeatSeries(s,r).length;var c=t.previousElementSibling,d=c&&c.classList.contains("or-repeat")?Number(c.querySelector(".repeat-number").textContent):0;for(a=0;a<e;a++)n.find(".option-wrapper").each(this.fixRadioNames),n.find("datalist").each(this.fixDatalistIds),n.insertBefore(t),0<d&&n.addClass("clone"),n[0].querySelector(".repeat-number").textContent=d+1,(i=i.add(n)).length>l&&(this.form.model.addRepeat(s,r),l++),o=o||this.getIndex(n[0]),n.trigger("addrepeat",[o,u]),this.form.widgetsInitialized?this.form.widgets.init(n):this.form.calc.update({repeatPath:s,repeatIndex:o}),n.find(".or-repeat-info:not([data-repeat-count])").each(this.updateDefaultFirstRepeatInstance.bind(this)),n=p(this.templates[s]).clone(),o++,d++;return this.toggleButtons(t),!0},remove:function(t,e){var i=this,n=t.next(".or-repeat, .or-repeat-info"),o=t.attr("name"),r=this.getIndex(t[0]),s=t.siblings(".or-repeat-info")[0];e=void 0!==e?e:600,t.hide(e,function(){t.remove(),i.numberRepeats(s),i.toggleButtons(s),n.trigger("removerepeat"),i.form.model.node(o,r).remove()})},fixRadioNames:function(t,e){p(e).find('input[type="radio"]').attr("name",Math.floor(1e7*Math.random()+1))},fixDatalistIds:function(t,e){var i=e.id+Math.floor(1e7*Math.random()+1);e.parentNode.querySelector('input[list="'+e.id+'"]').setAttribute("list",i),e.id=i},toggleButtons:function(t){p(t).siblings(".or-repeat").children(".repeat-buttons").find("button.remove").prop("disabled",!1).first().prop("disabled",c)},numberRepeats:function(t){p(t).siblings(".or-repeat").each(function(t,e){p(e).children(".repeat-number").text(t+1)})}}},{"enketo/config":2,jquery:12}],43:[function(t,e,i){"use strict";var l=t("jquery");e.exports={update:function(t){var r=this,s={};if(!this.form)throw new Error("Required module not correctly instantiated with form property.");var e=this.form.getRelatedNodes("data-required","",t),a=this.form.repeatsPresent&&this.form.view.html.querySelector(".or-repeat.clone");e.each(function(){var t=l(this),e=r.form.input.getRequired(t),i=r.form.input.getName(t),n=a?r.form.input.getIndex(t):0,o=e+"__"+i.substring(0,i.lastIndexOf("/"))+"__"+n;void 0===s[o]&&(s[o]=r.form.model.node(i,n).isRequired(e)),t.closest(".question").find(".required").toggleClass("hide",!s[o])})}}},{jquery:12}],44:[function(t,e,i){"use strict";var n=navigator.userAgent;e.exports={os:{get ios(){return/iPad|iPhone|iPod/i.test(n)},get android(){return/android/i.test(n)}}}},{}],45:[function(t,e,i){"use strict";var n=t("./sniffer").os,o={},r=!1;["date","datetime","time","month"].forEach(function(t){var e=document.createElement("input");e.setAttribute("type",t),o[t]="text"!==e.type}),(n.ios||n.android)&&(r=!0,document.documentElement.classList.add("touch")),e.exports={get inputtypes(){return console.deprecate("support.inputtypes","support.inputTypes"),o},get inputTypes(){return o},get touch(){return r},set touch(t){r=t}}},{"./sniffer":44}],46:[function(t,e,i){"use strict";function n(t,e,i){this.message=t,this.translationKey=e,this.translationOptions=i}(n.prototype=Object.create(Error.prototype)).name="TranslatedError",e.exports=n},{}],47:[function(t,e,i){"use strict";var r=t("./utils"),n=t("./format"),s={string:{convert:function(t){return t.replace(/^\s+$/,"")},validate:function(){return!0}},select:{validate:function(){return!0}},select1:{validate:function(){return!0}},decimal:{convert:function(t){var e=Number(t);return isNaN(e)||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY?"":e},validate:function(t){var e=Number(t);return!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY}},int:{convert:function(t){var e=Number(t);return isNaN(e)||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY?"":0<=e?Math.floor(e):-Math.floor(Math.abs(e))},validate:function(t){var e=Number(t);return!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY&&Math.round(e)===e&&e.toString()===t.toString()}},date:{validate:function(t){var e=/([0-9]{4})-([0-9]{2})-([0-9]{2})/.exec(t);if(e&&4===e.length){var i=Number(e[1]),n=Number(e[2])-1,o=Number(e[3]),r=new Date(i,n,o);return r.getFullYear()===i&&r.getMonth()===n&&r.getDate()===o}return!1},convert:function(t){if(r.isNumber(t)){var e=new Date(24*t*60*60*1e3);return"Invalid Date"===e.toString()?"":e.getFullYear().toString().pad(4)+"-"+(e.getMonth()+1).toString().pad(2)+"-"+e.getDate().toString().pad(2)}return/[0-9]T[0-9]/.test(t)&&(t=t.split("T")[0]),this.validate(t)?t:""}},datetime:{validate:function(t){var e=t.split("T");return 2===e.length&&(s.date.validate(e[0])&&s.time.validate(e[1],!1))},convert:function(t){var e="Invalid Date",i=t.split("T");if(r.isNumber(t))e=new Date(24*t*60*60*1e3);else if(/[0-9]T[0-9]/.test(t)&&2===i.length){var n=s.date.convert(i[0]),o=s.time.convert(i[1],!1);if(n&&o)return n+"T"+o}return"Invalid Date"!==e.toString()?e.toISOLocalString():""}},time:{validate:function(t,e){var i=t.match(/^(\d\d):(\d\d):(\d\d)\.\d\d\d(\+|-)(\d\d):(\d\d)$/);return e="boolean"!=typeof e||e,i||e||(i=t.match(/^(\d\d):(\d\d):(\d\d)(\+|-)(\d\d):(\d\d)$/)),!!i&&(i[1]<24&&0<=i[1]&&i[2]<60&&0<=i[2]&&i[3]<60&&0<=i[3]&&i[5]<24&&0<=i[5]&&i[6]<60&&0<=i[6])},convert:function(t,e){var i,n,o,r,s,a,l={};if(e="boolean"!=typeof e||e,!/^[0-9]{1,2}:[0-9]{1,2}(:[0-9.]*)?/.test(t)){if("Invalid Date"===(i=new Date(t)).toString())return"";t=i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"."+i.getMilliseconds()+i.getTimezoneOffsetAsTime()}return(n=t.toString().split(/(\+|-|Z)/)).length<1?"":(o=n[0].split(":"),s=n[2]?[n[1]].concat(n[2].split(":")):"Z"===n[1]?["+","00","00"]:[],l.hours=o[0].pad(2),l.minutes=o[1].pad(2),r=o[2]?o[2].split("."):["00"],l.seconds=r[0],l.milliseconds=r[1]||(e?"000":void 0),a=0===s.length?(new Date).getTimezoneOffsetAsTime():s[0]+s[1].pad(2)+":"+(s[2]?s[2].pad(2):"00"),t=l.hours+":"+l.minutes+":"+l.seconds+(l.milliseconds?"."+l.milliseconds:"")+a,this.validate(t,e)?t:"")},convertMeridian:function(t){if(t=t.trim(),n.time.hasMeridian(t)){var e=t.split(" "),i=e[0].split(":");0<e.length&&(i[0]=e[1]===n.time.pmNotation?Number(i[0])+12:i[0],t=i.join(":"))}return t}},barcode:{validate:function(){return!0}},geopoint:{validate:function(t){var e=t.toString().trim().split(" ");return""!==e[0]&&-90<=e[0]&&e[0]<=90&&""!==e[1]&&-360<=e[1]&&e[1]<=360&&(void 0===e[2]||!isNaN(e[2]))&&(void 0===e[3]||!isNaN(e[3])&&0<=e[3])},convert:function(t){return t.toString().trim()}},geotrace:{validate:function(t){var e=t.toString().split(";");return 2<=e.length&&e.every(function(t){return s.geopoint.validate(t)})},convert:function(t){return t.toString().trim()}},geoshape:{validate:function(t){var e=t.toString().split(";");return 4<=e.length&&e[0]===e[e.length-1]&&e.every(function(t){return s.geopoint.validate(t)})},convert:function(t){return t.toString().trim()}},binary:{validate:function(){return!0}}};e.exports=s},{"./format":30,"./utils":48}],48:[function(t,e,i){"use strict";var o;e.exports={parseFunctionFromExpression:function(t,e){var i,n,o,r,s,a,l=new RegExp(e+"\\s*\\(","g"),h=[];if(!t||!e)return h;for(;null!==(n=l.exec(t));){for(o=1,a=[],r=n.index,i=(s=l.lastIndex)-1;0!==o&&i<t.length;)"("===t[++i]?o++:")"===t[i]?o--:","===t[i]&&1===o&&(a.push(t.substring(s,i).trim()),s=i+1);s<i&&a.push(t.substring(s,i).trim()),h.push([t.substring(r,i+1),a])}return h},stripQuotes:function(t){return/^".+"$/.test(t)||/^'.+'$/.test(t)?t.substring(1,t.length-1):t},getFilename:function(t,e){var i;return"object"==typeof t&&null!==t&&t.name?(e=e||"",1<(i=t.name.split(".")).length?i[i.length-2]+=e:1===i.length&&(i[0]+=e),i.join(".")):""},toArray:function(t){for(var e=[],i=t.length>>>0;i--;)e[i]=t[i];return e},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},readCookie:function(t){var e,i,n;if(o)return o[t];for(e=document.cookie.split("; "),o={},n=e.length-1;0<=n;n--)(i=e[n].split("="))[1]=decodeURIComponent(i[1]),"s:"===i[1].substr(0,2)&&(i[1]=i[1].slice(2),i[1]=i[1].slice(0,i[1].lastIndexOf("."))),o[i[0]]=decodeURIComponent(i[1]);return o[t]},dataUriToBlobSync:function(t){var e,i,n,o;e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),o=new Uint8Array(n);for(var r=0;r<e.length;r++)o[r]=e.charCodeAt(r);return new Blob([o],{type:i})},getPasteData:function(t){var e=t.originalEvent.clipboardData||window.clipboardData;return e?e.getData("text"):null},updateDownloadLink:function(t,e,i){t.setAttribute("href",e||""),t.setAttribute("download",i||"")}}},{}],49:[function(t,e,i){"use strict";var n,o,r,s,a,l,h,u,c,d,p=t("jquery"),f=t("enketo/widgets").filter(function(t){return t.selector});console.log("Widgets",f),r=function(e,t){if(!this.form)throw new Error("Widgets module not correctly instantiated with form property.");return o=this.form.view.$,e=e||o,n=n||t,f.forEach(function(t){h(t,e)}),!0},s=function(t){for(var e,i=0;i<f.length;i++)(e=f[i]).name&&l(t,e.selector)[e.name]("enable")},a=function(t){for(var e,i=0;i<f.length;i++)(e=f[i]).name&&l(t,e.selector)[e.name]("disable")},l=function(t,e){return e?"form"===e?o:t.is(".question")?t.find("input:not(.ignore), select:not(.ignore), textarea:not(.ignore)").filter(e):t.find(e):p()},h=function(e,t){var i;if(e.options=e.options||{},!e.name)return console.error("widget doesn't have a name");e.helpersRequired&&0<e.helpersRequired.length&&(e.options.helpers={},e.helpersRequired.forEach(function(t){e.options.helpers[t]=n[t]})),(i=l(t,e.selector)).length&&(i[e.name](e.options),u(e,i),c(e,i),d(e,i))},u=function(t,e){0<e.length&&o.on("changelanguage",function(){e[t.name]("update")})},c=function(t,e){0<e.length&&t.list&&e.on("changeoption",function(){p(this)[t.name]("update")})},d=function(t,e){var i=e.prop("nodeName").toLowerCase();0<e.length&&("input"===i||"select"===i||"textarea"===i)&&e.on("inputupdate.enketo",function(){p(this)[t.name]("update")})},e.exports={init:r,enable:s,disable:a}},{"enketo/widgets":50,jquery:12}],50:[function(t,e,i){"use strict";e.exports=[t("../widget/note/notewidget"),t("../widget/select-desktop/selectpicker"),t("../widget/select-mobile/selectpicker"),t("../widget/select-autocomplete/autocomplete"),t("../widget/geo/geopicker"),t("../widget/textarea/textarea"),t("../widget/table/tablewidget"),t("../widget/radio/radiopicker"),t("../widget/date/datepicker-extended"),t("../widget/date-native/datepicker-native"),t("../widget/date-mobile/datepicker-mobile"),t("../widget/time/timepicker-extended"),t("../widget/datetime/datetimepicker-extended"),t("../widget/compact/compactpicker"),t("../widget/file/filepicker"),t("../widget/draw/draw-widget"),t("../widget/select-likert/likertitem"),t("../widget/horizontal-choices/horizontalchoices"),t("../widget/analog-scale/analog-scalepicker"),t("../widget/big-image/image-viewer"),t("../widget/comment/commentwidget"),t("../widget/image-map/image-map"),t("../widget/range/range-widget"),t("../widget/rank/rank-widget"),t("../widget/url/url-widget"),t("../widget/timerwidget")]},{"../widget/analog-scale/analog-scalepicker":53,"../widget/big-image/image-viewer":54,"../widget/comment/commentwidget":55,"../widget/compact/compactpicker":56,"../widget/date-mobile/datepicker-mobile":57,"../widget/date-native/datepicker-native":58,"../widget/date/datepicker-extended":59,"../widget/datetime/datetimepicker-extended":60,"../widget/draw/draw-widget":61,"../widget/file/filepicker":62,"../widget/geo/geopicker":63,"../widget/horizontal-choices/horizontalchoices":64,"../widget/image-map/image-map":65,"../widget/note/notewidget":66,"../widget/radio/radiopicker":67,"../widget/range/range-widget":68,"../widget/rank/rank-widget":69,"../widget/select-autocomplete/autocomplete":70,"../widget/select-desktop/selectpicker":72,"../widget/select-likert/likertitem":73,"../widget/select-mobile/selectpicker":74,"../widget/table/tablewidget":75,"../widget/textarea/textarea":76,"../widget/time/timepicker-extended":77,"../widget/timerwidget":79,"../widget/url/url-widget":80}],51:[function(e,t,i){!function(){if(window.navigator.msSaveOrOpenBlob&&0<=window.navigator.userAgent.indexOf("Trident/")){var t=e("./utils"),r=e("jquery");t.updateDownloadLink=function(e,t,i){var n,o;r(e).off("click"),t?(n=t,o=new XMLHttpRequest,new Promise(function(t){o.open("GET",n),o.responseType="blob",o.onload=function(){t(o.response)},o.send()})).then(function(t){r(e).off("click").on("click",function(){return window.navigator.msSaveOrOpenBlob(t,i),!1}).removeAttr("href")}).catch(function(t){console.error(t)}):e.setAttribute("href","")}}}()},{"./utils":48,jquery:12}],52:[function(t,e,i){var n=t("enketo-xpathjs");e.exports=function(t){var e=new n.XPathEvaluator;"function"==typeof t&&t(n),n.bindDomLevel3XPath(this.xml,{window:{JsXPathException:!0,JsXPathExpression:!0,JsXPathNSResolver:!0,JsXPathResult:!0,JsXPathNamespace:!0},document:{jsCreateExpression:function(){return e.createExpression.apply(e,arguments)},jsCreateNSResolver:function(){return e.createNSResolver.apply(e,arguments)},jsEvaluate:function(){return e.evaluate.apply(e,arguments)}}})}},{"enketo-xpathjs":7}],53:[function(t,e,i){"use strict";var n=t("../../js/Widget"),o=t("jquery"),r="analogscalepicker",s=t("../../js/support");function a(t,e){this.namespace=r,n.call(this,t,e),this._init()}t("bootstrap-slider-basic"),((a.prototype=Object.create(n.prototype)).constructor=a).prototype._init=function(){var t=o(this.element).closest(".question").addClass("or-analog-scale-initialized"),e=o(this.element),i=Number(this.element.value)||-1;this.props=this._getProps(t),e.slider({reversed:"vertical"===this.props.orientation,min:0,max:100,orientation:this.props.orientation,step:this.props.step,value:i,enabled:!this.props.readonly}),this.$widget=e.next(".widget"),this.$slider=this.$widget.find(".slider"),this.$labelContent=o('<div class="label-content widget" />').prependTo(t),this.$originalLabels=t.find(".question-label, .or-hint, .or-required-msg, .or-constraint-msg"),this.$labelContent.append(this.$originalLabels),this._renderResetButton(),this._renderLabels(),this._renderScale(),this._setChangeListener(),this._setResizeListener(),e.trigger("programmaticChange"+this.namespace)},a.prototype._getProps=function(t){var e=t.attr("class").split(" ").map(function(t){return t.substring(14)}),i=this.element.attributes["data-type-xml"].value;return{touch:s.touch,readonly:this.element.readOnly,step:"decimal"===i?.1:1,orientation:-1!==e.indexOf("horizontal")?"horizontal":"vertical"}},a.prototype._renderLabels=function(){var t=this.$labelContent.find(".question-label.active"),e=t.html().split(/\|/).map(function(t){return t.trim()});this.$mainLabel=this.$mainLabel||o('<span class="question-label widget active" />').insertAfter(t),this.$mainLabel.empty().append(e[0]),this.$maxLabel=this.$maxLabel||o('<div class="max-label" />').prependTo(this.$widget),this.$maxLabel.empty().append(e[1]),this.$minLabel=this.$minLabel||o('<div class="min-label" />').appendTo(this.$widget),this.$minLabel.empty().append(e[2]),e[3]?(this.$showValue=this.$showValue||o('<div class="widget show-value" />').appendTo(this.$labelContent),this.$showValue.empty().append('<div class="show-value__box">'+e[3]+'<span class="show-value__value">'+this.element.value+"</span></div>")):this.$showValue&&(this.$showValue.remove(),this.$showValue=void 0)},a.prototype._renderScale=function(){var t,e=o('<div class="scale"></div>');if("vertical"===this.props.orientation)for(t=100;0<=t;t-=10)e.append(this._getNumberHtml(t));else for(t=0;t<=100;t+=10)e.append(this._getNumberHtml(t));this.$slider.prepend(e)},a.prototype._getNumberHtml=function(t){return'<div class="scale__number"><div class="scale__ticks"></div><div class="scale__value">'+t+"</div></div>"},a.prototype._renderResetButton=function(){var t=this;this.$resetBtn=o(this.resetButtonHtml).appendTo(this.$widget).on("click",function(){return o(t.element).slider("setValue",0,!1),o(t.element).val("").trigger("programmaticChange"+t.namespace),!1}).prop("disabled",t.props.readonly)},a.prototype._updateCurrentValueShown=function(){this.$showValue&&this.$showValue.find(".show-value__value").text(this.element.value)},a.prototype._setChangeListener=function(){var e=this;o(this.element).on("slideStop."+this.namespace+" programmaticChange"+this.namespace,function(){var t=""===this.value;o(this).trigger("change"),e.$resetBtn.prop("disabled",t||e.props.readonly),e.$slider.toggleClass("slider--empty",t),e._updateCurrentValueShown()})},a.prototype._setResizeListener=function(){var t=o(this.element).closest(".question");t.hasClass("or-appearance-horizontal")||t.on("pageflip.enketo",this._stretchHeight)},a.prototype._stretchHeight=function(){var t=o(this).closest(".question").css("min-height","auto"),e=t.outerHeight(),i=t.closest(".or"),n=i.offset().top+i.height()-(t.offset().top+e)-10;n&&t.css("min-height",e+n+"px")},a.prototype.disable=function(){var t=""!==this.element.value?Number(this.element.value):0;o(this.element).slider("disable").slider("setValue",t,!1)},a.prototype.enable=function(){o(this.element).slider("enable")},a.prototype.update=function(){var t=""!==this.element.value?Number(this.element.value):0;t!==o(this.element).slider("getValue")&&o(this.element).slider("setValue",t,!1).trigger("programmaticChange"+this.namespace),this._renderLabels()},o.fn[r]=function(i,n){return this.each(function(){var t=o(this),e=o(this).data(r);i=i||{},e||"object"!=typeof i?e&&"string"==typeof i&&e[i](this):t.data(r,new a(this,i,n))})},e.exports={name:r,selector:'.or-appearance-analog-scale input[type="number"]'}},{"../../js/Widget":21,"../../js/support":45,"bootstrap-slider-basic":4,jquery:12}],54:[function(t,e,i){"use strict";var n=t("../../js/Widget"),o=t("jquery"),r="imageViewer";function s(t,e){this.namespace=r,n.call(this,t,e),this._init()}((s.prototype=Object.create(n.prototype)).constructor=s).prototype._init=function(){o(this.element).on("click",function(){var t=o(this),e=t.attr("href"),i=t.find("img"),n=i.attr("src");return t.attr("href",n),i.attr("src",e),t.toggleClass("open"),!1})},o.fn[r]=function(i,n){return i=i||{},this.each(function(){var t=o(this),e=t.data(r);e||"object"!=typeof i?e&&"string"==typeof i&&e[i](this):t.data(r,new s(this,i,n))})},e.exports={name:r,selector:"a.or-big-image"}},{"../../js/Widget":21,jquery:12}],55:[function(t,e,i){"use strict";var n=t("../../js/Widget"),h=t("jquery"),o="comment",u=t("enketo/translator").t;function r(t,e){this.namespace=o,n.call(this,t,e),this._init()}((r.prototype=Object.create(n.prototype)).constructor=r).prototype._init=function(){this.$linkedQuestion=this._getLinkedQuestion(this.element),this.$commentQuestion=h(this.element).closest(".question"),1===this.$linkedQuestion.length&&(this.$commentQuestion.addClass("hide").attr("role","comment"),this.$commentButton=h('<a class="btn-icon-only btn-comment aria-label="comment" type="button" href="#"><i class="icon"> </i></a>'),this._setCommentButtonState(this.element.value),this.$linkedQuestion.find(".question-label").last().after(this.$commentButton),this._setCommentButtonHandler(),this._setValidationHandler(),this._setFocusHandler())},r.prototype._getLinkedQuestion=function(t){var e=h(t),i=this.options.helpers.input.getName(e),n=t.dataset.for.trim(),o=this.options.helpers.pathToAbsolute(n,i),r=h(t).closest("form.or, .or-repeat");return this.options.helpers.input.getWrapNodes(r.find('[name="'+o+'"], [data-name="'+o+'"]')).eq(0)},r.prototype._commentHasError=function(){return this.$commentQuestion.hasClass("invalid-required")||this.$commentQuestion.hasClass("invalid-constraint")},r.prototype._setCommentButtonState=function(t,e){t="string"==typeof t?t.trim():t,this.$commentButton.toggleClass("empty",!t),this.$commentButton.toggleClass("invalid",!!e)},r.prototype._setCommentButtonHandler=function(){var t=this;this.$commentButton.click(function(){return t._isCommentModalShown(t.$linkedQuestion)?t._hideCommentModal(t.$linkedQuestion):t._showCommentModal(),!1})},r.prototype._setValidationHandler=function(){var i=this;h("form.or").on("validationcomplete.enketo",function(){var t=i._commentHasError(),e=i.element.value;i._setCommentButtonState(e,t)})},r.prototype._setFocusHandler=function(){var t=this;h(this.element).on("applyfocus",function(){t.$commentButton.is(":visible")?t.$commentButton.click():console.log("The linked question is not visible. Cannot apply focus to "+t.element.getAttribute("name"))})},r.prototype._isCommentModalShown=function(t){return 1===t.find(".or-comment-widget").length},r.prototype._showCommentModal=function(){var t,e,i,n,o=this,r=h(this.element).closest(".question").clone(!1),s=u("widget.comment.update")||"Update",a=h('<button class="btn btn-primary or-comment-widget__content__btn-update" type="button">'+s+"</button>"),l=h('<button class="btn-icon-only or-comment-widget__content__btn-close-x" type="button">&times;</button>');i=r.removeClass("hide").find("input, textarea").addClass("ignore").removeAttr("name data-for data-type-xml").removeData(),n=h('<div class="or-comment-widget__overlay"></div>'),e=h('<div class="or-comment-widget__content"></div>').append(r).append(l).append(a),t=h('<section class="widget or-comment-widget"></section>').append(n).append(e),this.$linkedQuestion.find(".or-comment-widget").remove().end().prepend(t).before(n.clone(!1)),i.focus(),t.get(0).scrollIntoView(!1),a.on("click",function(){var t,e=i.val();return h(o.element).val(e).trigger("change"),t=o._commentHasError(),o._setCommentButtonState(e,t),o._hideCommentModal(o.$linkedQuestion),o.options.helpers.input.validate(h(o.$linkedQuestion.get(0).querySelector("input, select, textarea"))),!1}),l.add(n).on("click",function(){return o._hideCommentModal(o.$linkedQuestion),!1})},r.prototype._hideCommentModal=function(t){t.find(".or-comment-widget").remove().end().prev(".or-comment-widget__overlay").remove()},h.fn[o]=function(i,n){return i=i||{},this.each(function(){var t=h(this),e=t.data(o);e||"object"!=typeof i?e&&"string"==typeof i&&e[i](this):t.data(o,new r(this,i,n))})},e.exports={name:o,selector:'.or-appearance-comment input[type="text"][data-for], .or-appearance-comment textarea[data-for]',helpersRequired:["input","pathToAbsolute"]}},{"../../js/Widget":21,"enketo/translator":28,jquery:12}],56:[function(t,e,i){"use strict";var o=t("jquery"),n=t("../../js/Widget"),r="compactpicker";function s(t,e){this.namespace=r,n.call(this,t,e),this._init()}((s.prototype=Object.create(n.prototype)).constructor=s).prototype._init=function(){o(this.element).find(".option-label").each(function(){var t=o(this);0<t.siblings("img, video, audio").length&&t.css("display","none")})},o.fn[r]=function(i,n){return i=i||{},this.each(function(){var t=o(this),e=t.data(r);e||"object"!=typeof i?e&&"string"==typeof i&&e[i](this):t.data(r,new s(this,i,n))})},e.exports={name:"compactpicker",selector:'.or-appearance-compact, .or-appearance-quickcompact, [class*="or-appearance-compact-"]'}},{"../../js/Widget":21,jquery:12}],57:[function(t,e,i){"use strict";var n=t("../../js/Widget"),r=t("jquery"),s="datepickerMobile",a=t("../../js/support");function l(t,e){this.namespace=s,n.call(this,t,e),this._init()}((l.prototype=Object.create(n.prototype)).constructor=l).prototype._init=function(){var e=r(this.element),t=this.element.value;if(a.inputTypes.month){var i=r('<input class="ignore widget datepicker-mobile" type="month"/>');e.addClass("hide"),i.val(t?t.substring(0,t.lastIndexOf("-")):"").insertAfter(e).on("change",function(){var t=this.value?this.value+"-01":"";e.val(t).trigger("change")})}},r.fn[s]=function(n,o){return n=n||{},this.each(function(){var t=r(this),e=t.data("datepickerExtended"),i=t.data(s);e||"object"!=typeof n||i||!a.touch||t.data(s,new l(this,n,o))})},e.exports={name:s,selector:'.or-appearance-month-year input[type="date"]'}},{"../../js/Widget":21,"../../js/support":45,jquery:12}],58:[function(t,e,i){"use strict";var n=t("../../js/Widget"),r=t("jquery"),s="datepickerNative",a=t("../../js/support");function l(t,e){this.namespace=s,n.call(this,t,e),this._init()}((l.prototype=Object.create(n.prototype)).constructor=l).prototype._init=function(){this.element.type="text",this.element.classList.add("mask-date")},r.fn[s]=function(n,o){return n=n||{},this.each(function(){var t=r(this),e=t.data("datepickerExtended"),i=t.data(s);e||"object"!=typeof n||i||a.touch||t.data(s,new l(this,n,o))})},e.exports={name:s,selector:'input[type="date"]'}},{"../../js/Widget":21,"../../js/support":45,jquery:12}],59:[function(t,e,i){"use strict";var n=t("../../js/Widget"),o=t("../../js/support"),a=t("jquery"),l=t("../../js/types"),h=t("../../js/utils");t("bootstrap-datepicker"),t("../../js/dropdown.jquery");var r="datepickerExtended";function s(t,e){this.namespace=r,n.call(this,t,e),this._init()}((s.prototype=Object.create(n.prototype)).constructor=s).prototype._init=function(){var t=a(this.element).parent("label");this.settings=t.hasClass("or-appearance-year")?{format:"yyyy",startView:"decade",minViewMode:"years"}:t.hasClass("or-appearance-month-year")?{format:"yyyy-mm",startView:"year",minViewMode:"months"}:{format:"yyyy-mm-dd",startView:"month",minViewMode:"days"},this.$fakeDateI=this._createFakeDateInput(this.settings.format),this._setChangeHandler(this.$fakeDateI),this._setFocusHandler(this.$fakeDateI),this._setResetHandler(this.$fakeDateI),this.$fakeDateI.datepicker({format:this.settings.format,autoclose:!0,todayHighlight:!0,startView:this.settings.startView,minViewMode:this.settings.minViewMode,forceParse:!1}),this._setDate(this.element.value)},s.prototype._setDate=function(t){var e=t&&"yyyy"===this.settings.format?t.substring(0,4):"yyyy-mm"===this.settings.format?t.substring(0,7):t;this.$fakeDateI.datepicker("setDate",e)},s.prototype._createFakeDateInput=function(t){var e=a(this.element),i=a('<div class="widget date"><input class="ignore input-small" type="text" placeholder="'+t+'" />'+this.resetButtonHtml+"</div>"),n=i.find("input");return e.hide().after(i),n},s.prototype._setChangeHandler=function(o){var r=a(this.element),s=this.settings;o.on("change paste",function(t){var e="",i="paste"===t.type?h.getPasteData(t):o.val(),n="";return 0<i.length&&(h.isNumber(i)&&"yyyy"!==s.format?e="":(i="yyyy-mm"===s.format?i+"-01":"yyyy"===s.format?i+"-01-01":i,e=l.date.convert(i))),""!==e&&r.val()===e||("paste"===t.type&&t.stopImmediatePropagation(),r.val(e).trigger("change").blur()),n="yyyy-mm"===s.format?e.substring(0,e.lastIndexOf("-")):"yyyy"===s.format?e.substring(0,e.indexOf("-")):e,o.val(n).datepicker("update"),!1})},s.prototype._setResetHandler=function(t){var e=this;t.next(".btn-reset").on("click",function(){a(e.element).val()&&t.val("").datepicker("update")})},s.prototype._setFocusHandler=function(t){var e=this;t.on("focus",function(){a(e.element).trigger("fakefocus")}),a(this.element).on("applyfocus",function(){t.focus()})},s.prototype.update=function(){this._setDate(this.element.value)},a.fn[r]=function(i,n){return i=i||{},this.each(function(){var t=a(this),e=t.data(r);e||"object"!=typeof i||o.touch&&o.inputTypes.date&&!/GT-P31[0-9]{2}.+AppleWebKit\/534\.30/.test(navigator.userAgent)?e&&"string"==typeof i&&e[i](this):t.data(r,new s(this,i,n))})},e.exports={name:r,selector:'input[type="date"]:not([readonly])'}},{"../../js/Widget":21,"../../js/dropdown.jquery":24,"../../js/support":45,"../../js/types":47,"../../js/utils":48,"bootstrap-datepicker":3,jquery:12}],60:[function(t,e,i){"use strict";var n=t("../../js/Widget"),o=t("../../js/support"),s=t("jquery"),a=t("../../js/format").time,l=t("../../js/types"),r="datetimepickerExtended";function h(t,e){this.namespace=r,n.call(this,t,e),this._init()}t("../../js/extend"),t("bootstrap-datepicker"),t("../time/timepicker"),t("../../js/dropdown.jquery"),((h.prototype=Object.create(n.prototype)).constructor=h).prototype._init=function(){var i=this,n=s(this.element),t=(0<n.val().length?new Date(n.val()).toISOLocalString():"").split("T"),e=t[0],o=t[1]&&4<t[1].length?t[1].substring(0,5):"";function r(){if(0<i.$fakeDateI.val().length&&3<i.$fakeTimeI.val().length){var t=i.$fakeDateI.val().split("-"),e=(a.hour12?l.time.convertMeridian(i.$fakeTimeI.val()):i.$fakeTimeI.val()).split(":");n.val(new Date(t[0],t[1]-1,t[2],e[0],e[1]).toISOLocalString()).trigger("change")}else n.val("").trigger("change")}this.$fakeDateI=this._createFakeDateInput(),this.$fakeTimeI=this._createFakeTimeInput(),n.hide().after('<div class="datetimepicker widget" />'),n.siblings(".datetimepicker").append(this.$fakeDateI.closest(".date")).append(this.$fakeTimeI.closest(".timepicker")),this.$fakeDateI.datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0,forceParse:!1}).datepicker("setDate",e),this.$fakeTimeI.timepicker({showMeridian:a.hour12,meridianNotation:{am:a.amNotation,pm:a.pmNotation}}).timepicker("setTime",o),this._setFocusHandler(this.$fakeDateI.add(this.$fakeTimeI)),this.$fakeDateI.on("change changeDate",function(){return l.date.validate(this.value)||i.$fakeDateI.val("").datepicker("update"),r(),!1}),this.$fakeTimeI.on("change",function(){return r(),!1}),this.$fakeTimeI.next(".btn-reset").on("click",function(){var t=n.val()?"change":"";(t||i.$fakeDateI.val()||i.$fakeTimeI.val())&&(i.$fakeDateI.val("").trigger(t).datepicker("update"),i.$fakeTimeI.val("").trigger(t))})},h.prototype._createFakeDateInput=function(){return s('<div class="date"><input class="ignore" type="text" placeholder="yyyy-mm-dd"/></div>').find("input")},h.prototype._createFakeTimeInput=function(){return s('<div class="timepicker"><input class="ignore timepicker-default" type="text" placeholder="hh:mm"/>'+this.resetButtonHtml+"</div>").find("input")},h.prototype.update=function(){var t=s(this.element),e=(0<t.val().length?new Date(t.val()).toISOLocalString():"").split("T"),i=e[0],n=e[1]&&4<e[1].length?e[1].substring(0,5):"";this.$fakeDateI.datepicker("setDate",i),this.$fakeTimeI.timepicker("setTime",n)},h.prototype._setFocusHandler=function(t){var e=this;t.on("focus",function(){s(e.element).trigger("fakefocus")}),s(this.element).on("applyfocus",function(){t.eq(0).focus()})},s.fn[r]=function(i,n){return i=i||{},this.each(function(){var t=s(this),e=t.data(r);e||"object"!=typeof i||o.touch&&o.inputTypes.datetime&&!/GT-P31[0-9]{2}.+AppleWebKit\/534\.30/.test(navigator.userAgent)?e&&"string"==typeof i&&e[i](this):t.data(r,new h(this,i,n))})},e.exports={name:r,selector:'input[type="datetime"]:not([readonly])'}},{"../../js/Widget":21,"../../js/dropdown.jquery":24,"../../js/extend":26,"../../js/format":30,"../../js/support":45,"../../js/types":47,"../time/timepicker":78,"bootstrap-datepicker":3,jquery:12}],61:[function(t,e,i){"use strict";var n=t("../../js/Widget"),o=t("jquery"),r="drawWidget",s=t("../../js/support"),a=t("enketo/file-manager"),l=t("signature_pad"),h=t("enketo/translator").t,u=t("enketo/dialog"),c=t("../../js/utils");function d(t,e){this.namespace=r,n.call(this,t,e),this._init()}l.prototype.fromObjectURL=function(l,t){var h=new Image,e=(t=t||{}).ratio||window.devicePixelRatio||1,u=t.width||this._canvas.width/e,c=t.height||this._canvas.height/e,d=this;return this._reset(),new Promise(function(a){h.src=l,h.onload=function(){var t,e,i=h.width,n=h.height,o=u/i,r=c/n;if(o<1||r<1){var s=Math.min(o,r);t=(u-i*s)/2,e=(c-n*s)/2,d._ctx.drawImage(h,0,0,i,n,t,e,i*s,n*s)}else t=(u-i)/2,e=(c-n)/2,d._ctx.drawImage(h,t,e,i,n);a(l)},d._isEmpty=!1})},l.prototype.updateData=function(t){var i=this;this._fromData(t,function(t,e){i._drawCurve(t,e.start,e.end)},function(t){i._drawDot(t)}),this._data=t},((d.prototype=Object.create(n.prototype)).constructor=d).prototype._init=function(){var t,n=this,e=this.element.dataset.loadedFileName;this.element.type="text",this.element.dataset.drawing=!0,this.props=this._getProps(this.element),this.$widget=this._getMarkup(),t=this.$widget[0].querySelector(".draw-widget__body__canvas"),o(this.element).after(this.$widget).closest(".question").addClass("or-"+this.props.type+"-initialized"),this._handleResize(t),this._resizeCanvas(t),this.props.load&&this._handleFiles(e),this.initialize=a.init().then(function(){return n.pad=new l(t,{onEnd:n._updateValue.bind(n),penColor:n.props.colors[0]||"black"}),n.pad.off(),!e||(n.element.value=e,n._loadFileIntoPad(e).then(n._updateDownloadLink.bind(n)))}),this.disable(),this.initialize.then(function(){n.$widget.find(".btn-reset").on("click",n._reset.bind(n)).end().find(".draw-widget__colorpicker").on("click",".current",function(){o(this).parent().toggleClass("reveal")}).on("click","[data-color]:not(.current)",function(){o(this).siblings().removeClass("current").end().addClass("current").parent().removeClass("reveal"),n.pad.penColor=this.dataset.color}).end().find(".draw-widget__undo").on("click",function(){var t=n.pad.toData();n.pad.clear();var e=n.$widget[0].querySelector("input[type=file]"),i=e&&e.files[0]?e.files[0]:n.element.dataset.loadedFileName;n._loadFileIntoPad(i).then(function(){n.pad.updateData(t.slice(0,-1)),n._updateValue(),n.pad.penColor=n.$widget.find(".draw-widget__colorpicker .current")[0].dataset.color})}).end().find(".show-canvas-btn").on("click",function(){return n.$widget.addClass("full-screen"),n._resizeCanvas(t),n.enable(),!1}).end().find(".hide-canvas-btn").on("click",function(){return n.$widget.removeClass("full-screen"),n.pad.off(),n._resizeCanvas(t),!1}).click(),o(t).on("canvasreload."+n.namespace,function(){n.cache&&n.pad.fromObjectURL(n.cache)}),n.enable()}).catch(function(t){n._showFeedback(t.message)}),o(this.element).on("applyfocus",function(){t.focus()}).closest('[role="page"]').on("pageflip.enketo",function(){n._resizeCanvas(t)})},d.prototype._getProps=function(t){var e=o(t).closest(".question"),i=e.hasClass("or-appearance-draw")?"drawing":e.hasClass("or-appearance-signature")?"signature":"annotation";return{readonly:t.readOnly,type:i,filename:i+".png",load:e.hasClass("or-appearance-annotate"),colors:e.hasClass("or-appearance-signature")?[]:["black","lightblue","blue","red","orange","cyan","yellow","lightgreen","green","pink","purple","lightgray","darkgray"],touch:s.touch,accept:t.getAttribute("accept"),capture:t.getAttribute("capture")}},d.prototype._handleFiles=function(t){this._updatePlaceholder(),this.$widget.closest("form.or").on("updateMaxSize",this._updatePlaceholder.bind(this));var e=this,i=this.$widget.find("input[type=file]"),n=this.$widget.find(".fake-file-input");this._showFileName(t),i.on("click."+this.namespace,function(t){if(e.props.readonly||"propagate"!==t.namespace)return e.$fakeInput.focus(),t.stopImmediatePropagation(),!1}).on("change."+this.namespace,function(){var t=this.files[0];t?a.isTooLarge(t)?e._showFeedback(h("filepicker.toolargeerror",{maxSize:a.getMaxSizeReadable()})):(e.pad.clear(),e._loadFileIntoPad(this.files[0]).then(function(){e._updateValue.call(e),e._showFileName(t.name),e.enable()})):e._showFileName(null)}),n.on("click."+this.namespace,function(t){if(e.props.readonly||i[0].value||n[0].value)return o(this).focus(),t.stopImmediatePropagation(),!1;t.preventDefault(),i.trigger("click.propagate")}).on("change."+this.namespace,function(){return!1})},d.prototype._showFileName=function(t){this.$widget.find(".fake-file-input").val(t).prop("readonly",!!t)},d.prototype._updatePlaceholder=function(){this.$widget.find(".fake-file-input").attr("placeholder",h("filepicker.placeholder",{maxSize:a.getMaxSizeReadable()||"?MB"}))},d.prototype._getMarkup=function(){var t=this.props.load?'<input type="file" class="ignore draw-widget__load"'+(null!==this.props.capture?' capture="'+this.props.capture+'"':"")+' accept="'+this.props.accept+'"/><div class="widget file-picker"><input class="ignore fake-file-input"/><div class="file-feedback"></div></div>':"",e=this.props.touch?'<button type="button" class="show-canvas-btn btn btn-default">Draw/Sign</button><button type="button" class="hide-canvas-btn btn btn-default"><span class="icon icon-arrow-left"> </span></button>':"",i=o('<div class="widget draw-widget"><div class="draw-widget__body">'+e+t+'<canvas class="draw-widget__body__canvas noSwipe disabled" tabindex="0"></canvas><div class="draw-widget__colorpicker"></div>'+("signature"===this.props.type?"":'<button class="btn-icon-only draw-widget__undo" aria-label="undo" type=button><i class="icon icon-undo"> </i></button>')+'</div><div class="draw-widget__footer">'+this.resetButtonHtml+this.downloadButtonHtml+'<div class="draw-widget__feedback"></div></div></div>'),n=i.find(".draw-widget__colorpicker");return this.props.colors.forEach(function(t,e){var i=0===e?" current":"";n.append('<div class="'+i+'"data-color="'+t+'" style="background: '+t+';" />')}),i},d.prototype._updateValue=function(){var t=new Date,e="-"+t.getHours()+"_"+t.getMinutes()+"_"+t.getSeconds();this.cache=this.pad.toDataURL(),this.element.dataset.filenamePostfix=e,o(this.element).val(this.props.filename).trigger("change"),this._updateDownloadLink(this.cache)},d.prototype._reset=function(){var e=this;if(this.element.value){var t="signature"===this.props.type?h("drawwidget.signature"):"drawing"===this.props.type?h("drawwidget.drawing"):h("drawwidget.annotation");u.confirm(h("filepicker.resetWarning",{item:t})).then(function(t){t&&(e.pad.clear(),e.cache=null,delete e.element.dataset.loadedFileName,e.element.dataset.filenamePostfix="",o(e.element).val("").trigger("change"),e.$widget.find("input[type=file]").val("").trigger("change"),e._updateDownloadLink(""),e.disable(),e.enable())})}},d.prototype._loadFileIntoPad=function(t){var e=this;return t?a.getObjectUrl(t).then(e.pad.fromObjectURL.bind(e.pad)).then(function(t){return e.cache=t}).catch(function(){e._showFeedback("File could not be loaded (leave unchanged if already submitted and you want to preserve it).","error")}):Promise.resolve("")},d.prototype._showFeedback=function(t){t=t||"",this.$widget.find(".draw-widget__feedback").text(t)},d.prototype._updateDownloadLink=function(t){t&&0===t.indexOf("data:")&&(t=URL.createObjectURL(c.dataUriToBlobSync(t)));var e=t?c.getFilename({name:this.element.value},this.element.dataset.filenamePostfix):"";c.updateDownloadLink(this.$widget.find(".btn-download")[0],t,e)},d.prototype._handleResize=function(t){var e=this;o(window).on("resize",function(){e._resizeCanvas(t)})},d.prototype._resizeCanvas=function(t){var e=Math.max(window.devicePixelRatio||1,1);t.width=t.offsetWidth*e,t.height=t.offsetHeight*e,t.getContext("2d").scale(e,e),o(t).trigger("canvasreload."+this.namespace)},d.prototype.disable=function(){var t=this,e=this.$widget.find(".draw-widget__body__canvas")[0];this.initialize.then(function(){t.pad.off(),e.classList.add("disabled"),t.$widget.find(".btn-reset").prop("disabled",!0)})},d.prototype.enable=function(){var t=this,e=this.$widget.find(".draw-widget__body__canvas")[0],i=this.props.touch&&!this.$widget.is(".full-screen"),n=this.props.load&&!this.element.value;this.initialize.then(function(){t.props.readonly||n||i||(t.pad.on(),e.classList.remove("disabled"),t.$widget.find(".btn-reset").prop("disabled",!1)),t._resizeCanvas(e)})},d.prototype.update=function(t){""===t.value&&this._reset()},o.fn[r]=function(i,n){return i=i||{},this.each(function(){var t=o(this),e=t.data(r);e||"object"!=typeof i||t.data(r,new d(this,i,n)),e&&"string"==typeof i&&e[i](this)})},e.exports={name:r,selector:'.or-appearance-draw input[data-type-xml="binary"][accept^="image"], .or-appearance-signature input[data-type-xml="binary"][accept^="image"], .or-appearance-annotate input[data-type-xml="binary"][accept^="image"]'}},{"../../js/Widget":21,"../../js/support":45,"../../js/utils":48,"enketo/dialog":27,"enketo/file-manager":29,"enketo/translator":28,jquery:12,signature_pad:17}],62:[function(t,e,i){"use strict";var l=t("jquery"),n=t("../../js/Widget"),h=t("enketo/file-manager"),u=t("../../js/utils"),o="filepicker",r=t("enketo/translator").t,s=t("../../js/translated-error"),a=t("enketo/dialog");function c(t,e,i){i&&(i.stopPropagation(),i.preventDefault()),this.namespace=o,n.call(this,t,e),this._init()}((c.prototype=Object.create(n.prototype)).constructor=c).prototype._init=function(){var e=l(this.element),i=e.attr("data-loaded-file-name"),n=this;this.props=this._getProps(),e.prop("disabled",!0).addClass("hide").parent().addClass("with-media clearfix"),this.$widget=l('<div class="widget file-picker"><input class="ignore fake-file-input"/>'+(this.props.readonly?"":this.resetButtonHtml)+this.downloadButtonHtml+'<div class="file-feedback"></div><div class="file-preview"></div></div>').insertAfter(e),this.$feedback=this.$widget.find(".file-feedback"),this.$preview=this.$widget.find(".file-preview"),this.$fakeInput=this.$widget.find(".fake-file-input"),this.$downloadLink=this.$widget.find(".btn-download"),this.$widget.find(".btn-reset").on("click",function(){(e.val()||n.$fakeInput.val())&&a.confirm(r("filepicker.resetWarning",{item:r("filepicker.file")})).then(function(t){t&&e.val("").trigger("change")}).catch(function(){})}).end(),n._focusListener(),this._showFileName(i),h.isWaitingForPermissions()&&this._showFeedback(r("filepicker.waitingForPermissions"),"warning"),this._updatePlaceholder(),e.closest("form.or").on("updateMaxSize",this._updatePlaceholder.bind(this)),h.init().then(function(){n._showFeedback(),n._changeListener(),e.prop("disabled",!1),i&&h.getFileUrl(i).then(function(t){n._showPreview(t,n.props.mediaType),n._updateDownloadLink(t,i)}).catch(function(){n._showFeedback(r("filepicker.notFound",{existing:i}),"error")})}).catch(function(t){n._showFeedback(t,"error")})},c.prototype._getProps=function(){return{mediaType:this.element.getAttribute("accept"),readonly:this.element.readOnly}},c.prototype._updatePlaceholder=function(){this.$fakeInput.attr("placeholder",r("filepicker.placeholder",{maxSize:h.getMaxSizeReadable()||"?MB"}))},c.prototype._changeListener=function(){var a=this;l(this.element).on("click",function(t){if(a.props.readonly||"propagate"!==t.namespace)return a.$fakeInput.focus(),t.stopImmediatePropagation(),!1}).on("change.propagate."+this.namespace,function(t){var e,i,n,o=l(this),r=o.attr("data-loaded-file-name"),s=new Date;if("propagate"===t.namespace)return o.trigger("change.file"),!1;t.stopImmediatePropagation(),e=this.files[0],n="-"+s.getHours()+"_"+s.getMinutes()+"_"+s.getSeconds(),this.dataset.filenamePostfix=n,i=u.getFilename(e,n),h.getFileUrl(e,i).then(function(t){a._showPreview(t,a.props.mediaType),a._showFeedback(),a._showFileName(i),r&&r!==i&&o.removeAttr("data-loaded-file-name"),a._updateDownloadLink(t,i),o.trigger("change.propagate")}).catch(function(t){o.val("").trigger("change.propagate"),a._showFileName(""),a._showPreview(null),a._showFeedback(t,"error"),a._updateDownloadLink("","")})}),this.$fakeInput.on("click",function(t){if(a.props.readonly||a.element.value||a.$fakeInput[0].value)return l(this).focus(),t.stopImmediatePropagation(),!1;t.preventDefault(),l(a.element).trigger("click.propagate")}).on("change",function(){return!1})},c.prototype._focusListener=function(){var t=this;this.$fakeInput.on("focus",function(){l(t.element).trigger("fakefocus")}),l(this.element).on("applyfocus",function(){t.$fakeInput.focus()})},c.prototype._showFileName=function(t){this.$fakeInput.val(t).prop("readonly",!!t)},c.prototype._showFeedback=function(t,e){var i=t instanceof s?r(t.translationKey,t.translationOptions):t instanceof Error?t.message:t||"";e=e||"",this.$feedback.text(i).attr("class","file-feedback "+e)},c.prototype._showPreview=function(t,e){var i;switch(this.$widget.find(".file-preview").empty(),e){case"image/*":i=l("<img />");break;case"audio/*":i=l('<audio controls="controls"/>');break;case"video/*":i=l('<video controls="controls"/>');break;default:i=l("")}t&&this.$preview.append(i.attr("src",t))},c.prototype._updateDownloadLink=function(t,e){u.updateDownloadLink(this.$downloadLink[0],t,e)},l.fn[o]=function(i,n){return i=i||{},this.each(function(){var t=l(this),e=t.data(o);e||"object"!=typeof i?e&&"string"==typeof i&&e[i](this):t.data(o,new c(this,i,n))})},e.exports={name:o,selector:'.question:not(.or-appearance-draw):not(.or-appearance-signature):not(.or-appearance-annotate) input[type="file"]'}},{"../../js/Widget":21,"../../js/translated-error":46,"../../js/utils":48,"enketo/dialog":27,"enketo/file-manager":29,"enketo/translator":28,jquery:12}],63:[function(t,e,i){"use strict";var n,c=t("jquery"),o=t("../../js/Widget"),r=t("enketo/config"),a=t("leaflet"),d=t("enketo/translator").t,s=t("../../js/support"),l=t("../../js/types"),h=t("enketo/dialog"),u="geopicker",p=r&&r.maps&&0<r.maps.length?r.maps:[{name:"streets",maxzoom:24,tiles:["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"],attribution:'Â© <a href="http://openstreetmap.org">OpenStreetMap</a> | <a href="www.openstreetmap.org/copyright">Terms</a>'}],f="https://maps.googleapis.com/maps/api/geocode/json?address={address}&sensor=true&key={api_key}",m=r.googleApiKey||r.google_api_key,g=a.divIcon({iconSize:24,className:"enketo-geopoint-marker"}),v=a.divIcon({iconSize:16,className:"enketo-geopoint-circle-marker"}),_=a.divIcon({iconSize:16,className:"enketo-geopoint-circle-marker-active"});function y(t,e){this.namespace=u,o.call(this,t,e),this._init()}t("leaflet-draw"),t("leaflet.gridlayer.googlemutant"),((y.prototype=Object.create(o.prototype)).constructor=y).prototype._init=function(){var t=c(this.element).val().trim(),s=this;this.$form=c(this.element).closest("form.or"),this.$question=c(this.element).closest(".question"),this.mapId=Math.round(1e7*Math.random()),this.props=this._getProps(),this._addDomElements(),this.currentIndex=0,this.points=[],t&&c(this.element).val().trim().split(";").forEach(function(t,e){s.points[e]=t.trim().split(" "),s.points[e].forEach(function(t,e,i){i[e]=Number(t)})}),this.$widget.find('[name="lat"], [name="long"], [name="alt"], [name="acc"]').on("change change.bymap change.bysearch",function(t){var e=s.$lat.val()?Number(s.$lat.val()):"",i=s.$lng.val()?Number(s.$lng.val()):"",n=s.$alt.val()?Number(s.$alt.val()):"",o=s.$acc.val()?Number(s.$acc.val()):"",r={lat:e,lng:i};t.stopImmediatePropagation(),"bymap"!==t.namespace&&"bysearch"!==t.namespace&&s.polyline&&!s.containsEmptyPoints(s.points,s.currentIndex)&&s.updatedPolylineWouldIntersect(r,s.currentIndex)?(s._showIntersectError(),s._updateInputs(s.points[s.currentIndex],"nochange")):(s._editPoint([e,i,n,o]),"bysearch"!==t.namespace&&s.$search&&s.$search.val(""))}),this.$kmlInput.on("change",function(t){var i=s.$points.find(".addpoint"),e=c(this).prev(".paste-progress").removeClass("hide"),n=t.target.value,o=s._convertKmlCoordinatesToLeafletCoordinates(n);t.target.value="",setTimeout(function(){o.forEach(function(t,e){s._updateInputs(t),e<o.length-1&&i.click()}),e.remove(),s._switchInputType("points")},10)}),this.$widget.find(".toggle-input-type-btn").on("click",function(){var t=s.$inputGroup.hasClass("kml-input-mode")?"points":"kml";return s._switchInputType(t),!1}),c(this.element).on("change",function(){s.$kmlInput.prop("disabled",!!this.value)}).on("applyfocus",function(){s.$widget[0].querySelector("input").focus()}),this.$points.on("click",".point",function(){return s._setCurrent(s.$points.find(".point").index(c(this))),s._switchInputType("points"),!1}),this.$points.find(".addpoint").on("click",function(){return s._addPoint(),!1}),this.$widget.find(".close-chain-btn").on("click",function(){return s._closePolygon(),!1}),this.$widget.find(".btn-remove").on("click",function(){s.points.length<2?s._updateInputs([]):h.confirm(d("geopicker.removePoint")).then(function(t){t&&s._removePoint()}).catch(function(){})}),this.$map.find(".show-map-btn").on("click",function(){return s.$widget.find(".search-bar").removeClass("hide-search"),s.$widget.addClass("full-screen"),s._updateMap(),!1}),this.$form.on("pageflip.enketo.map"+this.mapId,function(t){s.map&&c.contains(t.target,s.element)&&(s.map.invalidateSize(),s.$form.off("pageflip.enketo.map"+s.mapId))}),this.props.wide&&this.$widget.addClass("wide"),this.$widget.toggleClass("hide-input",this.$question.hasClass("or-appearance-hide-input")).find(".toggle-input-visibility-btn").on("click",function(){s.$widget.toggleClass("hide-input"),c(this).toggleClass("open",s.$widget.hasClass("hide-input")),s.map&&s.map.invalidateSize(!1)}).toggleClass("open",s.$widget.hasClass("hide-input")),this.$widget.find(".hide-map-btn").on("click",function(){return s.$widget.find(".search-bar").addClass("hide-search"),s.$widget.removeClass("full-screen").find(".map-canvas").removeClass("leaflet-container").find(".leaflet-google-layer").remove(),s.map&&(s.map.remove(),s.map=null,s.polygon=null,s.polyline=null),!1}),this.$widget.on("focus","input",function(){c(s.element).trigger("fakefocus")}),this.props.search&&this._enableSearch(),this.props.detect&&this._enableDetection(),this.props.readonly&&this.disable(this.element),t?this.points.forEach(function(){s._addPointBtn()}):this._addPoint(),t?(this._updateMap(),this._setCurrent(this.currentIndex)):(this._updateMap([0,0],1),this.props.detect&&navigator.geolocation.getCurrentPosition(function(t){s._updateMap([t.coords.latitude,t.coords.longitude],15)}))},y.prototype._switchInputType=function(t){"kml"===t?this.$inputGroup.addClass("kml-input-mode"):"points"===t&&this.$inputGroup.removeClass("kml-input-mode")},y.prototype._getProps=function(){var t=c(this.element).closest(".question").attr("class").split(" ").filter(function(t){return/or-appearance-/.test(t)}).map(function(t){return t.substring(14)}),e=!s.touch||-1!==t.indexOf("maps")||-1!==t.indexOf("placement-map");return{detect:!!navigator.geolocation,map:e,search:e,appearances:e?t:[],type:this.element.attributes["data-type-xml"].value,touch:s.touch,wide:.8<this.$question.width()/this.$question.closest("form.or").width(),readonly:this.element.readOnly}},y.prototype._addPointBtn=function(){this.$points.find(".addpoint").before('<a href="#" class="point" aria-label="point"> </a>')},y.prototype._addDomElements=function(){var t='<div class="map-canvas-wrapper"><div class=map-canvas id="map'+this.mapId+'"></div></div>',e=d("geopicker.kmlpaste"),i=d("geopicker.kmlcoords"),n='<a href="#" class="toggle-input-type-btn"><span class="kml-input">KML</span><span class="points-input">'+d("geopicker.points")+'</span></a><label class="geo kml">'+i+'<progress class="paste-progress hide"></progress><textarea class="ignore" name="kml" placeholder="'+e+'"></textarea><span class="disabled-msg">remove all points to enable</span></label>',o='<button type="button" class="close-chain-btn btn btn-default btn-xs">'+d("geopicker.closepolygon")+"</button>",r=d("geopicker.latitude"),s=d("geopicker.longitude"),a=d("geopicker.altitude"),l=d("geopicker.accuracy"),h=d("geopicker.searchPlaceholder");if(this.$widget=c('<div class="geopicker widget"><div class="search-bar hide-search no-map no-detect"><button type="button" class="hide-map-btn btn btn-default"><span class="icon icon-arrow-left"> </span></button><button name="geodetect" type="button" class="btn btn-default" title="detect current location" data-placement="top"><span class="icon icon-crosshairs"> </span></button><div class="input-group"><input class="geo ignore" name="search" type="text" placeholder="'+h+'" disabled="disabled"/><button type="button" class="btn btn-default search-btn"><i class="icon icon-search"> </i></button></div></div><div class="geo-inputs"><label class="geo lat">'+r+'<input class="ignore" name="lat" type="number" step="0.000001" min="-90" max="90"/></label><label class="geo long">'+s+'<input class="ignore" name="long" type="number" step="0.000001" min="-180" max="180"/></label><label class="geo alt">'+a+'<input class="ignore" name="alt" type="number" step="0.1" /></label><label class="geo acc">'+l+'<input class="ignore" name="acc" type="number" step="0.1" /></label><button type="button" class="btn-icon-only btn-remove" aria-label="remove"><span class="icon icon-trash"> </span></button></div></div>'),this.props.detect&&(this.$widget.find(".search-bar").removeClass("no-detect"),this.$detect=this.$widget.find('button[name="geodetect"]')),this.$search=this.$widget.find('[name="search"]'),this.$inputGroup=this.$widget.find(".geo-inputs"),this.props.map?(this.$widget.find(".search-bar").removeClass("no-map").after(t),this.$map=this.$widget.find(".map-canvas"),this.$map.parent().append('<button type="button" class="toggle-input-visibility-btn" aria-label="toggle input"> </button>')):this.$map=c(),this.props.touch&&this.props.map&&this.$map.append('<button type="button" class="show-map-btn btn btn-default">Map</button>'),this.props.touch||this.$widget.find(".search-bar").removeClass("hide-search"),"geopoint"!==this.props.type){this.$points=c('<div class="points"><button type="button" class="addpoint">+</button></div>'),this.$widget.prepend(this.$points),"geoshape"===this.props.type&&this.$inputGroup.append(o);var u=c(n);this.$kmlInput=u.find('[name="kml"]'),this.$inputGroup.prepend(u)}else this.$points=c(),this.$kmlInput=c();this.$lat=this.$widget.find('[name="lat"]'),this.$lng=this.$widget.find('[name="long"]'),this.$alt=this.$widget.find('[name="alt"]'),this.$acc=this.$widget.find('[name="acc"]'),c(this.element).hide().after(this.$widget).parent().addClass("clearfix")},y.prototype._updateValue=function(){var t=c(this.element).val(),l="",h=this;return this._markAsValid(),this.points.forEach(function(t,e,i){var n,o="number"==typeof t[0]?t[0]:"number"==typeof t.lat?t.lat:null,r="number"==typeof t[1]?t[1]:"number"==typeof t.lng?t.lng:null,s="number"==typeof t[2]?t[2]:0,a="number"==typeof t[3]?t[3]:0;n=o&&r?o+" "+r+" "+s+" "+a:"",h._isValidGeopoint(n)||""===n&&e===i.length-1||h._markAsInvalid(e),""!==n||e!==i.length-1?(l+=n,e!==i.length-1&&(l+=";")):l=l.substring(0,l.lastIndexOf(";"))}),t!==l&&(c(this.element).val(l).trigger("change"),!0)},y.prototype._isValidGeopoint=function(t){return!!t&&l.geopoint.validate(t)},y.prototype._isValidLatLngList=function(t){var n=this;return t.every(function(t,e,i){return n._isValidLatLng(t)||""===t.join()&&e===i.length-1})},y.prototype._cleanLatLng=function(t){return Array.isArray(t)?[t[0],t[1]]:t},y.prototype._isValidLatLng=function(t){var e="number"==typeof t[0]?t[0]:"number"==typeof t.lat?t.lat:null,i="number"==typeof t[1]?t[1]:"number"==typeof t.lng?t.lng:null;return l.geopoint.validate([e,i].join(" "))},y.prototype._markAsInvalid=function(t){this.$points.find(".point").eq(t).addClass("has-error")},y.prototype._markAsValid=function(){this.$points.find(".point").removeClass("has-error")},y.prototype._setCurrent=function(t){this.currentIndex=t,this.$points.find(".point").removeClass("active").eq(t).addClass("active"),this._updateInputs(this.points[t],""),!this.map||this.props.touch&&!this._inFullScreenMode()||this._updateMarkers()},y.prototype._enableDetection=function(){var i=this,e={enableHighAccuracy:!0,maximumAge:0};this.$detect.click(function(t){return t.preventDefault(),navigator.geolocation.getCurrentPosition(function(t){var e={lat:Math.round(1e6*t.coords.latitude)/1e6,lng:Math.round(1e6*t.coords.longitude)/1e6};i.polyline&&i.updatedPolylineWouldIntersect(e,i.currentIndex)?i._showIntersectError():(i._updateInputs([e.lat,e.lng,t.coords.altitude,t.coords.accuracy]),i.currentIndex===i.points.length-1&&"geopoint"!==i.props.type&&i._addPoint())},function(){console.error("error occurred trying to obtain position")},e),!1})},y.prototype._enableSearch=function(){var n=this;f=m?f.replace("{api_key}",m):f.replace("&key={api_key}",""),this.$search.prop("disabled",!1).on("change",function(t){var i=c(this).val();t.stopImmediatePropagation(),i&&(i=i.split(/\s+/).join("+"),c.get(f.replace("{address}",i),function(t){var e;t.results&&0<t.results.length&&t.results[0].geometry&&t.results[0].geometry.location?(e=t.results[0].geometry.location,n._updateMap([e.lat,e.lng],15),n.$search.closest(".input-group").removeClass("has-error")):(n.$search.closest(".input-group").addClass("has-error"),console.log('Location "'+i+'" not found'))},"json").fail(function(){n.$search.closest(".input-group").addClass("has-error"),console.log("Error. Geocoding service may not be available or app is offline")}).always(function(){}))})},y.prototype._dynamicMapAvailable=function(){return!!this.map},y.prototype._inFullScreenMode=function(){return this.$widget.hasClass("full-screen")},y.prototype._updateMap=function(t,e){var i=this;this.props.map&&(e||(e=this.map&&this.map.getZoom()||15),t&&(this.lastLatLng=t,this.lastZoom=e),this.props.touch&&!this._inFullScreenMode()||(this.map?i._updateDynamicMapView(t,e):this._addDynamicMap().then(function(){i._updateDynamicMapView(t,e)})))},y.prototype._addDynamicMap=function(){var n=this;return this._getLayers().then(function(t){var e={layers:n._getDefaultLayer(t)};n.map=a.map("map"+n.mapId,e).on("click",function(t){var e,i;if(n.props.readonly)return!1;e=t.latlng,i=n.$lat.val()&&n.$lng.val()?n.points.length:n.currentIndex,e.lat=Math.round(1e6*e.lat)/1e6,e.lng=Math.round(1e6*e.lng)/1e6,"geopoint"!==n.props.type&&!n.containsEmptyPoints(n.points,i)&&n.updatedPolylineWouldIntersect(e,i)?n._showIntersectError():n.$lat.val()&&n.$lng.val()&&"geopoint"!==n.props.type?n.$lat.val()&&n.$lng.val()&&(n._addPoint(),n._updateInputs(e,"change.bymap")):n._updateInputs(e,"change.bymap")}),n.map.attributionControl.setPrefix(""),1<t.length&&a.control.layers(n._getBaseLayers(t),null).addTo(n.map),n.$widget.find(".leaflet-control-layers-toggle").append('<span class="icon icon-globe"></span>'),n.map.on("baselayerchange",function(){n.$widget.find(".leaflet-control-container input").addClass("ignore no-unselect").next("span").addClass("option-label")})})},y.prototype._updateDynamicMapView=function(t,e){t?this.map.setView(t,e||15):(this._updatePolyline(),this._updateMarkers(),1===this.points.length&&""===this.points[0].toString()&&(this.lastLatLng?this.map.setView(this.lastLatLng,this.lastZoom||15):this.map.setView(a.latLng(0,0),e||15)))},y.prototype._showIntersectError=function(){h.alert("Borders cannot intersect!")},y.prototype._getLayers=function(){var i=this,n=[];return p.forEach(function(t,e){"string"==typeof t.tiles&&/^GOOGLE_(SATELLITE|ROADMAP|HYBRID|TERRAIN)/.test(t.tiles)?n.push(i._getGoogleTileLayer(t,e)):t.tiles?n.push(i._getLeafletTileLayer(t,e)):console.error("Configuration error for map tiles. Not a valid tile layer: ",t)}),Promise.all(n)},y.prototype._getLeafletTileLayer=function(t,e){var i,n=this._getTileOptions(t,e);return t.tileIndex=void 0===t.tileIndex?Math.round(100*Math.random())%t.tiles.length:t.tileIndex,i=t.tiles[t.tileIndex],Promise.resolve(a.tileLayer(i,n))},y.prototype._getGoogleTileLayer=function(t,e){var i=this._getTileOptions(t,e);return i.type=t.tiles.substring(7).toLowerCase(),this._loadGoogleMapsScript().then(function(){return a.gridLayer.googleMutant(i)})},y.prototype._getTileOptions=function(t,e){var i=t.name||"map-"+(e+1);return{id:t.id||i,maxZoom:t.maxzoom||18,minZoom:t.minzoom||0,name:i,attribution:t.attribution||""}},y.prototype._loadGoogleMapsScript=function(){return n||(n=new Promise(function(t){var e;window.gmapsLoaded=function(){delete window.gmapsLoaded,t()},e="https://maps.google.com/maps/api/js?v=3.exp"+(m?"&key="+m:"")+"&libraries=places&callback=gmapsLoaded",c.getScript(e)})),n},y.prototype._getDefaultLayer=function(t){var i,n=this;return t.reverse().some(function(e){return i=e,n.props.appearances.some(function(t){return t===e.options.name})}),i},y.prototype._getBaseLayers=function(t){var e={};return t.forEach(function(t){e[t.options.name]=t}),e},y.prototype._updateMarkers=function(){var n=[],o=[],r=this;this.markerLayer&&this.markerLayer.clearLayers(),this.points.length<2&&""===this.points[0].join()||(this.points.forEach(function(t,e){var i="geopoint"===r.props.type?g:e===r.currentIndex?_:v;r._isValidLatLng(t)?(n.push(r._cleanLatLng(t)),o.push(a.marker(r._cleanLatLng(t),{icon:i,clickable:!r.props.readonly,draggable:!r.props.readonly,alt:e,opacity:.9}).on("click",function(t){0===t.target.options.alt&&"geoshape"===r.props.type?r._closePolygon():r._setCurrent(t.target.options.alt)}).on("dragend",function(t){var e=t.target.getLatLng(),i=t.target.options.alt;e.lat=Math.round(1e6*e.lat)/1e6,e.lng=Math.round(1e6*e.lng)/1e6,r.polyline&&r.updatedPolylineWouldIntersect(e,i)?(r._showIntersectError(),r._updateMarkers()):(r._setCurrent(i),r._updateInputs(e,"change.bymap"),r._updateMap())}))):console.debug("this latLng was not considered valid",t)}),0<o.length&&(this.markerLayer=a.layerGroup(o).addTo(this.map),1!==this.points.length&&this._isValidLatLngList(this.points)||this.map.setView(n[0],this.lastZoom||15)))},y.prototype._updatePolyline=function(){var t,e=this;if("geopoint"!==this.props.type){if(this.points.length<2||!this._isValidLatLngList(this.points))return this.map&&(this.polyline&&this.map.removeLayer(this.polyline),this.polygon&&this.map.removeLayer(this.polygon)),this.polyline=null,void(this.polygon=null);"geoshape"===this.props.type&&this._updatePolygon(),t=(t=""!==this.points[this.points.length-1].join("")?this.points:this.points.slice(0,this.points.length-1)).map(function(t){return e._cleanLatLng(t)}),this.polyline?this.polyline.setLatLngs(t):(this.polyline=a.polyline(t,{color:"red"}),this.map.addLayer(this.polyline)),setTimeout(function(){e.map.fitBounds(e.polyline.getBounds())},0)}},y.prototype._updatePolygon=function(){var t,e=this;"geopoint"!==this.props.type&&"geotrace"!==this.props.type&&(t=(t=""!==this.points[this.points.length-1].join("")?this.points:this.points.slice(0,this.points.length-1)).map(function(t){return e._cleanLatLng(t)}),this.polygon?this.polygon.setLatLngs(t):(this.polygon=a.polygon(t,{color:"red",stroke:!1}),this.map.addLayer(this.polygon)),this._updateArea(t))},y.prototype._updateArea=function(t){var e,i;if(2<t.length){var n=t.map(function(t){return{lat:t[0],lng:t[1]}});e=a.GeometryUtil.geodesicArea(n),i=a.GeometryUtil.readableArea(e,!0),a.popup({className:"enketo-area-popup"}).setLatLng(this.polygon.getBounds().getCenter()).setContent(i).openOn(this.map)}else this.map.closePopup()},y.prototype._addPoint=function(){this._addPointBtn(),this.points.push([]),this._setCurrent(this.points.length-1),this._updateValue()},y.prototype._editPoint=function(t){var e;return this.points[this.currentIndex]=t,(e=this._updateValue())&&this._updateMap(),e},y.prototype._removePoint=function(){var t=this.currentIndex;this.points.splice(this.currentIndex,1),this._updateValue(),this.$points.find(".point").eq(this.currentIndex).remove(),void 0===this.points[this.currentIndex]&&(t=this.currentIndex-1),this._setCurrent(t),this._updateMap()},y.prototype._closePolygon=function(){var t=this.points[this.points.length-1];if(!(this.points.length<3||3===this.points.length&&!this._isValidLatLng(this.points[2])||JSON.stringify(this.points[0])===JSON.stringify(t))){if(this._isValidLatLng(t)?(console.log("current last point is valid, so will create a new one to use to close"),this._addPoint()):(console.log("current last point is not a valid point, so will use this as closing point"),this.currentIndex=this.points.length-1),this.polyline&&!this.containsEmptyPoints(this.points,this.points.length)&&this.updatedPolylineWouldIntersect(this.points[0],this.currentIndex))return this._showIntersectError();this._updateInputs(this.points[0])}},y.prototype._updateInputs=function(t,e){var i=t[0]||t.lat||"",n=t[1]||t.lng||"",o=t[2]||t.alt||"",r=t[3]||t.acc||"";e=void 0!==e?e:"change",this.$lat.val(i||""),this.$lng.val(n||""),this.$alt.val(o||""),this.$acc.val(r||"").trigger(e)},y.prototype._convertKmlCoordinatesToLeafletCoordinates=function(t){var e=[],i=/<\s?coordinates>(([^<]|\n)*)<\/\s?coordinates\s?>/;return(t=i.test(t)?t.match(i)[1]:t).trim().split(/\s+/).forEach(function(t){var n=[];t.split(",").forEach(function(t,e){var i=Number(t);0===e?n[1]=i:1===e?n[0]=i:2===e&&(n[2]=i)}),e.push(n)}),e},y.prototype.updatedPolylineWouldIntersect=function(t,e){var i,n,o,r=[],s=this;return!(this.points<3)&&(c.extend(!0,r,this.points),r[e]=[t[0]||t.lat,t[1]||t.lng],(i=""!==r[r.length-1].join("")?r:r.slice(0,r.length-1))[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]&&(i=i.slice(0,i.length-1)),i=i.map(function(t){return s._cleanLatLng(t)}),n=a.polyline(i,{color:"white"}),this.map.addLayer(n),o=n.intersects(),this.map.removeLayer(n),o)},y.prototype.containsEmptyPoints=function(t,i){return t.some(function(t,e){return!(e===i||t[0]&&t[1])})},y.prototype.disable=function(t){c(t).next(".widget").addClass("readonly").find("input, select, textarea").prop("disabled",!0).end().find(".btn:not(.show-map-btn):not(.hide-map-btn), .btn-icon-only, .addpoint").prop("disabled",!0)},y.prototype.enable=function(t){c(t).next(".widget").removeClass("readonly").find("input, select, textarea").prop("disabled",!1).end().find(".btn:not(.show-map-btn):not(.hide-map-btn), .btn-icon-only, .addpoint").prop("disabled",!1),this.map&&this.map.invalidateSize()},y.prototype.update=function(t){this.destroy(t),c(t).data(u,new y(t,this.options,this.event))},c.fn[u]=function(i,n){return this.each(function(){try{var t=c(this),e=c(this).data(u);i=i||{},e||"object"!=typeof i?e&&"string"==typeof i&&e[i](this):t.data(u,new y(this,i,n))}catch(t){console.log("Failed to initialise geopicker for "+this+": "+t)}})},e.exports={name:u,selector:'input[data-type-xml="geopoint"], input[data-type-xml="geotrace"], input[data-type-xml="geoshape"]'}},{"../../js/Widget":21,"../../js/support":45,"../../js/types":47,"enketo/config":2,"enketo/dialog":27,"enketo/translator":28,jquery:12,leaflet:15,"leaflet-draw":13,"leaflet.gridlayer.googlemutant":14}],64:[function(t,e,i){"use strict";var o=t("jquery"),n=t("../../js/Widget"),r="horizontalChoices";function s(t,e){this.namespace=r,n.call(this,t,e),this._init()}((s.prototype=Object.create(n.prototype)).constructor=s).prototype._init=function(){o(this.element).find(".option-wrapper").each(function(){for(var t=o(this),e=3-t.find("label").length%3;e<3&&0<e;)t.append('<label class="filler"></label>'),e--;o(this).closest(".question").addClass("or-horizontal-initialized")})},o.fn[r]=function(i,n){return i=i||{},this.each(function(){var t=o(this),e=t.data(r);e||"object"!=typeof i?e&&"string"==typeof i&&e[i](this):t.data(r,new s(this,i,n))})},e.exports={name:r,selector:".or-appearance-horizontal"}},{"../../js/Widget":21,jquery:12}],65:[function(t,e,i){"use strict";var n=t("../../js/Widget"),a=t("jquery"),o="imageMap",r=t("enketo/translator").t;function s(t,e){this.namespace=o,n.call(this,t,e),this.options=e,this._init()}((s.prototype=Object.create(n.prototype)).constructor=s).prototype._init=function(){var t=this,e=this.element.querySelector("img");if(this.$inputs=a(this.element).find("input"),this.props=this._getProps(),this.element.classList.add("or-image-map-initialized"),!e)return this._showSvgNotFoundError();e.getAttribute("src")?this._addMarkup(e).then(this._addFunctionality.bind(this)):a(e).on("load",function(){t._addMarkup(e).then(t._addFunctionality.bind(t))})},s.prototype._addFunctionality=function(t){this.$svg=t.find("svg"),this.$tooltip=t.find(".image-map__ui__tooltip"),this.props.readonly&&this.disable(),this._setSvgClickHandler(),this._setChangeHandler(),this._setHoverHandler(),this._updateImage()},s.prototype._getProps=function(){return{readonly:this.$inputs[0].readOnly}},s.prototype._addMarkup=function(t){var s=this,e=t.getAttribute("src");return a.get(e).then(function(t){var e,i,n,o;if(s._isSvgDoc(t)){e=s._removeUnmatchedIds(a(t.querySelector("svg"))),i=a('<div class="widget image-map"/>').append('<div class="image-map__ui"><span class="image-map__ui__tooltip"></span></div>').append(e),a(s.element).find("img").remove(),a(s.element).find(".option-wrapper").before(i);var r={};try{r=e[0].getBBox()}catch(t){console.error("Could not obtain Boundary Box of SVG element",t)}return n=r.width||e.attr("width"),o=r.height||e.attr("height"),e.attr("viewBox",[0,0,parseInt(n,10),parseInt(o,10)].join(" ")),i}throw"Image is not an SVG doc"}).catch(this._showSvgNotFoundError.bind(s))},s.prototype._showSvgNotFoundError=function(){a(this.element).find(".option-wrapper").before('<div class="widget image-map"><div class="image-map__error">'+r("imagemap.svgNotFound")+"</div></div>")},s.prototype._removeUnmatchedIds=function(t){var e=this;return t.find("path[id], g[id]").each(function(){e._getInput(this.id)||this.removeAttribute("id")}),t},s.prototype._getInput=function(t){return this.element.querySelector('input[value="'+t+'"]')},s.prototype._setSvgClickHandler=function(){var n=this;this.$svg.not("[or-readonly]").on("click","path[id], g[id]",function(t){var e=t.target.id||a(t.target).closest("g[id]")[0].id,i=n._getInput(e);i&&a(i).prop("checked",!i.checked).trigger("change")})},s.prototype._setChangeHandler=function(){this.$inputs.on("change inputupdate.enketo",this._updateImage.bind(this))},s.prototype._setHoverHandler=function(){var n=this;this.$svg.on("mouseenter","path[id], g[id]",function(t){var e=t.target.id||a(t.target).closest("g[id]")[0].id,i=a(n._getInput(e)).siblings(".option-label.active").text();n.$tooltip.text(i)}).on("mouseleave","path[id], g[id]",function(){n.$tooltip.text("")})},s.prototype._isSvgDoc=function(t){return"object"==typeof t&&t.querySelector("svg")},s.prototype._updateImage=function(){var e=this,t=this.options.helpers.input.getVal(this.$inputs.eq(0));this.$svg.find("path[or-selected], g[or-selected]").removeAttr("or-selected"),"string"==typeof t&&(t=[t]),t.forEach(function(t){t&&e.$svg.find("path#"+t+",g#"+t).attr("or-selected","")})},s.prototype.disable=function(){this.$svg.attr("or-readonly","")},s.prototype.enable=function(){this.props.readonly||this.$svg.removeAttr("or-readonly")},a.fn[o]=function(i,n){return i=i||{},this.each(function(){var t=a(this),e=t.data(o);e||"object"!=typeof i?e&&"string"==typeof i&&e[i](this):t.data(o,new s(this,i,n))})},e.exports={name:o,selector:".simple-select.or-appearance-image-map",helpersRequired:["input"]}},{"../../js/Widget":21,"enketo/translator":28,jquery:12}],66:[function(t,e,i){"use strict";e.exports={name:"benson"}},{}],67:[function(t,e,i){"use strict";var n=t("../../js/Widget"),o=t("jquery");t("../../js/plugins");var r="radiopicker";function s(t,e){this.namespace=r,n.call(this,t,e),this._init()}((s.prototype=Object.create(n.prototype)).constructor=s).prototype._init=function(){this._setDelegatedHandlers()},s.prototype._setDelegatedHandlers=function(){var t=o(this.element);t.on("click",'input[type="radio"]:not([readonly]):checked',function(){o(this).parent("label").siblings().removeAttr("data-checked").end().attr("data-checked","true")}).on("click",'input[type="checkbox"]:not([readonly])',function(){this.checked?this.parentNode.dataset.checked="true":delete this.parentNode.dataset.checked}).on("change","[data-checked] > input:not(:checked)",function(){delete this.parentNode.dataset.checked}).on("click",'input[type="checkbox"][readonly],input[type="radio"][readonly]',function(t){return t.stopImmediatePropagation(),!1}).on("change",'input[type="checkbox"][readonly],input[type="radio"][readonly]',function(t){var e=void 0===t.originalEvent;return e||(t.stopImmediatePropagation(),this.checked&&"true"!==this.parentNode.dataset.checked&&(this.checked=!1)),e}).on("click",'[data-checked]>input[type="radio"]:not(.no-unselect)',function(){o(this).prop("checked",!1).trigger("change").parent().removeAttr("data-checked")}),t.find('input[type="radio"]:checked, input[type="checkbox"]:checked').parent("label").attr("data-checked","true")},o.fn[r]=function(t,e){var i=o(this),n=i.data(r);return t=t||{},n||"object"!=typeof t?n&&"string"==typeof t&&n[t](this):i.data(r,new s(i[0],t,e)),this},e.exports={name:r,selector:"form"}},{"../../js/Widget":21,"../../js/plugins":37,jquery:12}],68:[function(t,e,i){"use strict";var o="rangewidget",r=t("jquery"),n=t("../../js/Widget"),s=t("../../js/utils");function a(t,e){this.namespace=o,n.call(this,t,e),this._init()}((a.prototype=Object.create(n.prototype)).constructor=a).prototype._init=function(){var t=this;this.props=this._getProps();var e=r('<div class="widget range-widget"><div class="range-widget__wrap"><div class="range-widget__current"/><div class="range-widget__bg"/><div class="range-widget__ticks"/><div class="range-widget__scale"><span class="range-widget__scale__start"/>'+this._stepsBetweenHtml(this.props)+this.resetButtonHtml+'<span class="range-widget__scale__end"/></div><div class="range-widget__bulb"><div class="range-widget__bulb__inner"/><div class="range-widget__bulb__mercury"/></div></div><input type="range" class="ignore empty" min="'+this.props.min+'" max="'+this.props.max+'" step="'+this.props.step+'"/></div>');e.find(".range-widget__scale__start").text(this.props.min),e.find(".range-widget__scale__end").text(this.props.max),this.$number=r(this.element),this.$range=e.find("input"),this.$current=e.find(".range-widget__current"),this.$number.after(e).on("applyfocus",function(){t.$range.focus()}).addClass("hide"),this.props.readonly&&this.disable(),this.$range.on("change",function(){t.$current.text(this.value),t.$number.val(this.value).trigger("change"),t._updateMercury((this.value-this.min)/(t.props.max-t.props.min))}).on("focus",function(){t.$number.trigger("fakefocus")}),e.find("input.empty").on("click",function(){t.$range.removeClass("empty").change()}),e.find(".btn-reset").on("click",this._reset.bind(this)),this.update();for(var i=this.props.ticks?Math.ceil(Math.abs((this.props.max-this.props.min)/this.props.step)):1,n=Math.ceil(i/50);i%n&&n<i;)n++;i/=n,e.find(".range-widget__ticks").append(new Array(i).fill("<span/>").join(""))},a.prototype._getProps=function(){var t=s.isNumber(this.element.getAttribute("min"))?this.element.getAttribute("min"):0,e=s.isNumber(this.element.getAttribute("max"))?this.element.getAttribute("max"):10,i=s.isNumber(this.element.getAttribute("step"))?this.element.getAttribute("step"):1,n=r(this.element).closest(".question"),o=n.hasClass("or-appearance-distress");return{min:Number(t),max:Number(e),step:Number(i),readonly:this.element.readOnly,vertical:n.hasClass("or-appearance-vertical")||o,ticks:!n.hasClass("or-appearance-no-ticks"),distress:o}},a.prototype._updateMercury=function(t){var e=r(this.element).next(".widget"),i=e.find(".range-widget__ticks").height(),n=e.find(".range-widget__bulb").height();e.find(".range-widget__bulb__mercury").css("height",t*i+.5*n+"px")},a.prototype._stepsBetweenHtml=function(t){var e="";if(t.distress&&((t.max-t.min)/t.step<=10&&(t.max-t.min)%t.step==0))for(var i=t.min+t.step;i<t.max;i+=t.step)e+='<span class="range-widget__scale__between">'+i+"</span>";return e},a.prototype._reset=function(){this.$range.val("").addClass("empty"),this.$current.text("-"),this.$number.val("").trigger("change"),this._updateMercury(-1)},a.prototype.disable=function(){r(this.element).next(".widget").find("input, button").prop("disabled",!0)},a.prototype.enable=function(){this.props&&!this.props.readonly&&r(this.element).next(".widget").find("input, button").prop("disabled",!1)},a.prototype.update=function(){var t=this.element.value;s.isNumber(t)?r(this.element).next(".widget").find("input").val(t).trigger("change").removeClass("empty"):this._reset()},r.fn[o]=function(i,n){return i=i||{},this.each(function(){var t=r(this),e=t.data(o);e||"object"!=typeof i?e&&"string"==typeof i&&e[i](this):t.data(o,new a(this,i,n))})},e.exports={name:o,selector:'.or-appearance-distress input[type="number"], .question > input[type="number"][min][max][step]'}},{"../../js/Widget":21,"../../js/utils":48,jquery:12}],69:[function(t,e,i){"use strict";var o="rankWisdfsdfdget",r=t("jquery"),n=t("../../js/Widget"),s=t("../../js/support"),a=t("html5sortable/dist/html5sortable.cjs"),l=t("enketo/translator").t;function h(t,e){this.namespace=o,n.call(this,t,e),this._init()}((h.prototype=Object.create(n.prototype)).constructor=h).prototype._init=function(){var e=this,t=this.element.value;this.props=this._getProps(),this.itemSelector="label:not(.itemset-template)",this.list=r(this.element).next(".option-wrapper").addClass("widget rank-widget")[0];var i=r(this.resetButtonHtml).on("click",function(){return e._reset(),!1}),n=s.touch?l("rankwidget.tapstart"):l("rankwidget.clickstart");r(this.list).toggleClass("rank-widget--empty",!t).append(i).append('<div class="rank-widget__overlay"><span class="rank-widget__overlay__content">'+n+"</span></div>").on("click",function(){e.element.disabled||(this.classList.remove("rank-widget--empty"),e._updateOriginalInput(e._getValueFromWidget()))}),this.element.classList.add("hide"),this._setValueInWidget(t),a(this.list,{items:this.itemSelector,containerSerializer:function(t){return{value:[].slice.call(t.node.querySelectorAll(e.itemSelector+" input")).map(function(t){return t.value}).join(" ")}}})[0].addEventListener("sortupdate",function(){e._updateOriginalInput(e._getValueFromWidget())}),this.props.readonly&&this.disable()},h.prototype._getProps=function(){return{readonly:this.element.readOnly}},h.prototype._getValueFromWidget=function(){return a(this.list,"serialize")[0].container.value},h.prototype._setValueInWidget=function(t){if(!t)return this._reset();var e=this,o=t.split(" "),i=[].slice.call(this.list.querySelectorAll(this.itemSelector+" input"));if(o.length!==i.length)throw new Error("Could not load rank widget value. Number of items mismatch.");i.sort(function(t,e){var i=o.indexOf(t.value),n=o.indexOf(e.value);if(-1===i||-1===n)throw new Error("Could not load rank widget value. Mismatch in item values.");return n<i}),i.forEach(function(t){r(e.list).find(".btn-reset").before(r(t.parentNode).detach())})},h.prototype._updateOriginalInput=function(t){r(this.element).val(t).trigger("change"),r(this.list).toggleClass("rank-widget--empty",!t)},h.prototype._reset=function(){this._updateOriginalInput("")},h.prototype.disable=function(){r(this.element).prop("disabled",!0).next(".widget").find("input, button").prop("disabled",!0),a(this.list,"disable")},h.prototype.enable=function(){this.props&&!this.props.readonly&&(r(this.element).prop("disabled",!1).next(".widget").find("input, button").prop("disabled",!1),a(this.list,"enable"))},h.prototype.update=function(){var t=this.element.value;a(this.list),t?(this._setValueInWidget(t),this._updateOriginalInput(t)):this._reset()},r.fn[o]=function(i,n){return i=i||{},this.each(function(){var t=r(this),e=t.data(o);e||"object"!=typeof i?e&&"string"==typeof i&&e[i](this):t.data(o,new h(this,i,n))})},e.exports={name:o,list:!0,selector:"input.rank"}},{"../../js/Widget":21,"../../js/support":45,"enketo/translator":28,"html5sortable/dist/html5sortable.cjs":10,jquery:12}],70:[function(t,e,i){"use strict";var r=t("jquery"),n=t("../../js/Widget"),o="autocomplete",s=!("list"in document.createElement("input")&&"options"in document.createElement("datalist")&&void 0!==window.HTMLDataListElement);function a(t,e,i){this.namespace=o,n.call(this,t,e),i&&(i.stopPropagation(),i.preventDefault()),this._init()}t("./jquery.relevant-dropdown"),((a.prototype=Object.create(n.prototype)).constructor=a).prototype._init=function(){var t=r(this.element),e=t.attr("list");this.props=this._getProps(),this.$options=t.closest(".question").find("datalist#"+e+" > option"),this.$options.each(function(t,e){var i=e.getAttribute("value");e.classList.contains("itemset-template")||null==i||(e.dataset.value=i,e.setAttribute("value",e.textContent),e.textContent="")}),this.$fakeInput=r('<input type="text" class="ignore widget autocomplete" list="'+e+'" />'),this.props.readonly&&this.$fakeInput.attr("readonly","readonly"),this.props.disabled&&this.$fakeInput.attr("disabled","disabled"),t.hide().after(this.$fakeInput),s&&(console.debug("Polyfill required"),this.$fakeInput.relevantDropdown()),this._setFakeInputListener(),this._setFocusListener(),this._showCurrentLabel()},a.prototype._getProps=function(){return{readonly:this.element.readOnly,disabled:this.element.disabled}},a.prototype._showCurrentLabel=function(){var t=this.element.value,e=this._findLabel(t);this.$fakeInput.val(e),t&&!e&&this.$fakeInput.trigger("input")},a.prototype._setFakeInputListener=function(){var o=this;this.$fakeInput.on("input."+this.namespace,function(t){var e=t.target,i=e.value,n=o._findValue(i)||"";o.element.value!==n&&r(o.element).val(n).trigger("change"),r(e).toggleClass("notfound",i&&!n)})},a.prototype._findValue=function(i){var n="";return i?(this.$options.each(function(t,e){if(e.value===i)return n=e.getAttribute("data-value"),!1}),n):""},a.prototype._findLabel=function(i){var n="";return i?(this.$options.each(function(t,e){if(e.dataset.value===i)return n=e.value,!1}),n):""},a.prototype._setFocusListener=function(){var t=this;this.$fakeInput.on("focus",function(){return r(t.element).trigger("fakefocus"),!0}),r(this.element).on("applyfocus",function(){r(t.$fakeInput).focus()})},a.prototype.disable=function(){this.$fakeInput.find("li").addClass("disabled")},a.prototype.enable=function(){this.$fakeInput.find("li").removeClass("disabled")},a.prototype.update=function(){r(this.element).siblings(".widget").remove(),this._init()},r.fn[o]=function(i,n){return i=i||{},this.each(function(){var t=r(this),e=t.data(o);e||"object"!=typeof i?e&&"string"==typeof i&&e[i](this):t.data(o,e=new a(this,i,n))})},e.exports={name:o,list:!0,selector:"input[list]"}},{"../../js/Widget":21,"./jquery.relevant-dropdown":71,jquery:12}],71:[function(t,e,i){var o=t("jquery"),r="relevantDropdown";function s(t,e,i){this.namespace=r,this.element=t,this.options=o.extend({fadeOutSpeed:"normal",change:null},e),i&&(i.stopPropagation(),i.preventDefault()),this._init()}o.expr[":"].RD_contains=o.expr.createPseudo(function(e){return function(t){return 0<=o(t).text().toUpperCase().indexOf(e.toUpperCase())}}),s.prototype._init=function(){var t=o(this.element);this.listId=t.attr("list"),this.$fakeDatalist=o("<ul />",{class:"datalist widget",id:this.listId}).appendTo(t.parent()),this._updateFakeDatalist(),this._setEventListeners()},s.prototype._updateFakeDatalist=function(){var t=o("#"+this.listId),e=document.createDocumentFragment();this.$fakeDatalist.empty(),t.find("option").each(function(){tempItem=o("<li />",{text:o(this).val()})[0],e.appendChild(tempItem)}),this.$fakeDatalist.append(e),this.$fakeDatalistItems=this.$fakeDatalist.find("li")},s.prototype._setEventListeners=function(){var e,r=this,s=o(this.element),a=0;s.on("focus",function(){r.$fakeDatalist.scrollTop(0),a=0}).on("blur",function(){setTimeout(function(){r.$fakeDatalist.fadeOut(r.options.fadeOutSpeed),r.$fakeDatalistItems.removeClass("active")},500)}).on("keyup",function(t){e=s.position(),r.$fakeDatalist.show().css({top:e.top+o(this).outerHeight(),left:e.left,width:s.outerWidth()}),r.$fakeDatalistItems.hide(),r.$fakeDatalist.find('li:RD_contains("'+s.val()+'")').show()}),this.$fakeDatalist.on("mouseenter","li",function(){o(this).addClass("active").siblings().removeClass("active")}).on("mouseleave","li",function(){o(this).removeClass("active")}),o(window).resize(function(){e=s.position(),r.$fakeDatalist.css({top:e.top+o(this).outerHeight(),left:e.left,width:s.outerWidth()})}),s.on("keydown",function(t){var e=r.$fakeDatalist.find("li.active"),i=r.$fakeDatalist.outerHeight(),n=r.$fakeDatalistItems.outerHeight();if(38==t.keyCode&&e.length&&(prevAll=e.prevAll("li:visible"),0<prevAll.length&&(e.removeClass("active"),prevAll.eq(0).addClass("active")),prevAll.length&&prevAll.position().top<0&&0<a&&r.$fakeDatalist.scrollTop(a-=n)),40==t.keyCode)if(e.length){var o=e.nextAll("li:visible");0<o.length&&(e.removeClass("active"),o.eq(0).addClass("active")),o.length&&o.position().top+n>=i&&r.$fakeDatalist.stop().animate({scrollTop:a+=n},200)}else r.$fakeDatalistItems.removeClass("active"),r.$fakeDatalist.find("li:visible:first").addClass("active");13!=t.keyCode&&9!=t.keyCode||(e.length&&s.val(e.text()).trigger("input"),r.$fakeDatalist.fadeOut(r.options.fadeOutSpeed),r.$fakeDatalistItems.removeClass("active")),13!=t.keyCode&&38!=t.keyCode&&40!=t.keyCode&&(r.$fakeDatalistItems.removeClass("active"),r.$fakeDatalist.find("li:visible:first").addClass("active"),r.$fakeDatalist.scrollTop(0),a=0)}),this.$fakeDatalist.on("click","li",function(){o("li.active").length&&s.val(o(this).text()).trigger("input"),r.$fakeDatalist.fadeOut(r.options.fadeOutSpeed),r.$fakeDatalistItems.removeClass("active")})},s.prototype.update=function(){this._updateFakeDatalist()},o.fn[r]=function(i,n){return i=i||{},this.each(function(){var t=o(this),e=t.data(r);e||"object"!=typeof i?e&&"string"==typeof i&&e[i](this):t.data(r,e=new s(this,i,n))})}},{jquery:12}],72:[function(t,e,i){"use strict";var h=t("jquery"),n=t("../../js/Widget"),o=t("../../js/support"),a=t("../../js/dom-utils"),l=t("../../js/event"),r=t("enketo/translator").t,s="desktopSelectpicker";function u(t,e,i){this.namespace=s,n.call(this,t,e),i&&(i.stopPropagation(),i.preventDefault()),this.$picker=null,this.noneSelectedText=r("selectpicker.noneselected"),this.multiple=void 0!==h(t).attr("multiple")&&!1!==h(t).attr("multiple"),this._init()}t("../../js/dropdown.jquery"),((u.prototype=Object.create(n.prototype)).constructor=u).prototype._init=function(){var t=this._getTemplate(),e=h(this.element);this.readonly=!!e.attr("readonly"),e.css("display","none"),t=this._createLi(t),this.$picker=t.insertAfter(e),this.$picker.find("> a").addClass(this.selectClass),this._clickListener(),this._focusListener()},u.prototype._getTemplate=function(){return'<div class="btn-group bootstrap-select widget clearfix"><button type="button" class="btn btn-default dropdown-toggle clearfix" data-toggle="dropdown"><span class="selected">__SELECTED_OPTIONS</span><span class="caret"></span></button><ul class="dropdown-menu" role="menu">__ADD_LI</ul></div>'},u.prototype._createLi=function(t){var e,i=[],n="",o=this.multiple?'type="checkbox"':'type="radio" name="'+1e5*Math.random()+'"',r=this.readonly?' readonly="readonly"':"",s=this.readonly?' disabled="disabled"':"",a=this.readonly?' class="disabled"':"";if(h(this.element).find("option").each(function(){i.push({label:h(this).text(),selected:h(this).is(":selected"),value:h(this).attr("value")})}),0<i.length){t=t.replace("__SELECTED_OPTIONS",this._createSelectedStr());for(var l=0;l<i.length;l++)i[l].value&&(e=i[l].selected?' checked="checked"':"",n+="<li "+a+(i[l].selected?'class="active"':"")+'><a class="option-wrapper" tabindex="-1" href="#"><label><input class="ignore" '+o+e+r+s+' value="'+i[l].value+'" /><span class="option-label">'+i[l].label+"</span></label></a></li>")}return t=t.replace("__ADD_LI",n),h(t)},u.prototype._createSelectedStr=function(){var t=[];return h(this.element).find("option:selected").each(function(){0<h(this).attr("value").length&&t.push(h(this).text())}),0===t.length?this.noneSelectedText:1===t.length?t[0]:r("selectpicker.numberselected",{number:t.length})},u.prototype._clickListener=function(){var s=this;this.$picker.on("click","li:not(.disabled)",function(t){var e=this,i=e.querySelector("input"),n=s.element,o=n.querySelector('option[value="'+i.value+'"]'),r=o.matches(":checked");"input"!==t.target.nodeName.toLowerCase()&&t.preventDefault(),s.multiple?t.stopPropagation():(s.$picker.find("li").removeClass("active"),a.getSiblingElementsAndSelf(o,"option").forEach(function(t){t.selected=!1}),s.$picker.find("input").prop("checked",!1)),setTimeout(function(){r?(e.classList.remove("active"),i.checked=!1,o.selected=!1):(e.classList.add("active"),o.selected=!0,i.checked=!0),s.$picker.find(".selected").html(s._createSelectedStr()),n.dispatchEvent(new l.Change)},10)}).on("keydown","li:not(.disabled)",function(t){var e=t.keyCode.toString(10);if(/(13|32)/.test(e)){/(32)/.test(e)||t.preventDefault();var i=h(":focus");i.click(),i.focus(),t.preventDefault()}}).on("click","li.disabled",function(t){return t.stopPropagation(),!1}).on("click","a",function(t){t.preventDefault()})},u.prototype._focusListener=function(){var t=this;h(this.element).on("applyfocus",function(){t.$picker.find(".dropdown-toggle").focus()}),this.$picker.on("shown.bs.dropdown",function(){return h(t.element).trigger("fakefocus"),!0})},u.prototype.disable=function(){this.$picker.find("li").addClass("disabled")},u.prototype.enable=function(){this.readonly||this.$picker.find("li").removeClass("disabled")},u.prototype.update=function(){this.$picker.remove(),this._init()},h.fn[s]=function(i,n){return i=i||{},this.each(function(){var t=h(this),e=t.data(s);e||"object"!=typeof i||o.touch?e&&"string"==typeof i&&e[i](this):t.data(s,e=new u(this,i,n))})},e.exports={name:s,list:!0,selector:"select:not(#form-languages)"}},{"../../js/Widget":21,"../../js/dom-utils":23,"../../js/dropdown.jquery":24,"../../js/event":25,"../../js/support":45,"enketo/translator":28,jquery:12}],73:[function(t,e,i){"use strict";e.exports={name:"likertitem"}},{}],74:[function(t,e,i){"use strict";var r=t("jquery"),n=t("../../js/Widget"),o=t("../../js/support"),s="mobileSelectpicker";function a(t,e){this.namespace=s,n.call(this,t,e),this._init()}((a.prototype=Object.create(n.prototype)).constructor=a).prototype._init=function(){var t=this;r(this.element).on("change."+s,function(){return t._showSelectedValues(),!0}),this._showSelectedValues()},a.prototype._showSelectedValues=function(){var t,e=[],i=r(this.element),n=0<i.next(".widget").length?i.next(".widget"):r('<span class="widget mobileselect"></span>').insertAfter(i),o=r.isArray(i.val())?i.val():[i.val()];for(t=0;t<o.length;t++)e.push(r(this).find('option[value="'+o[t]+'"]').text());n.text(o.join(", "))},a.prototype.update=function(){this._showSelectedValues()},r.fn[s]=function(i,n){return i=i||{},this.each(function(){var t=r(this),e=t.data(s);!e&&"object"==typeof i&&o.touch&&t.data(s,new a(this,i,n)),e&&"string"==typeof i&&e[i](this)})},e.exports={name:s,selector:"select[multiple]"}},{"../../js/Widget":21,"../../js/support":45,jquery:12}],75:[function(t,e,i){"use strict";e.exports={name:"tablewidget"}},{}],76:[function(t,e,i){"use strict";var n=t("../../js/Widget"),o=t("jquery"),r="lamentWidget";function s(t,e){this.namespace=r,n.call(this,t,e),this._init()}((s.prototype=Object.create(n.prototype)).constructor=s).prototype._init=function(){this._setDelegatedHandlers()},s.prototype._setDelegatedHandlers=function(){var t=o(this.element),e=t[0].querySelector("textarea"),i=e?e.clientHeight:20;t.on("input","textarea",function(){this.scrollHeight>this.clientHeight&&this.scrollHeight>i&&(this.style["min-height"]=this.scrollHeight+"px")})},o.fn[r]=function(t,e){var i=o(this),n=i.data(r);return t=t||{},n||"object"!=typeof t?n&&"string"==typeof t&&n[t](this):i.data(r,new s(i[0],t,e)),this},e.exports={name:r,selector:"form"}},{"../../js/Widget":21,jquery:12}],77:[function(t,e,i){"use strict";var n=t("../../js/Widget"),o=t("../../js/support"),r=t("jquery"),s=t("../../js/format").time,a=t("../../js/types");t("./timepicker"),t("../../js/dropdown.jquery");var l="timepickerExtended";function h(t,e){this.namespace=l,n.call(this,t,e),this._init()}((h.prototype=Object.create(n.prototype)).constructor=h).prototype._init=function(){var e=r(this.element),t=r('<div class="widget timepicker"><input class="ignore timepicker-default" type="text" placeholder="hh:mm" />'+this.resetButtonHtml+"</div>"),i=t.find(".btn-reset"),n=t.find("input");e.hide().after(t),n.timepicker({showMeridian:s.hour12,meridianNotation:{am:s.amNotation,pm:s.pmNotation}}).timepicker("setTime",this.element.value),n.on("change",function(){var t=s.hour12?a.time.convertMeridian(this.value):this.value;return e.val(t).trigger("change"),!1}),i.on("click",function(){var t=e.val()?"change":"";(t||n.val())&&n.val("").trigger(t)}),n.on("focus",function(){e.trigger("fakefocus")}),r(this.element).on("applyfocus",function(){n.focus()})},h.prototype.update=function(){r(this.element).next(".widget").find("input").timepicker("setTime",this.element.value)},r.fn[l]=function(i,n){return i=i||{},this.each(function(){var t=r(this),e=t.data(l);e||"object"!=typeof i||o.touch&&o.inputTypes.time?e&&"string"==typeof i&&e[i](this):t.data(l,new h(this,i,n))})},e.exports={name:l,selector:'input[type="time"]:not([readonly])'}},{"../../js/Widget":21,"../../js/dropdown.jquery":24,"../../js/format":30,"../../js/support":45,"../../js/types":47,"./timepicker":78,jquery:12}],78:[function(t,e,i){!function(f,m,n){"use strict";var r=function(t,e){this.widget="",this.$element=f(t),this.defaultTime=e.defaultTime,this.disableFocus=e.disableFocus,this.disableMousewheel=e.disableMousewheel,this.isOpen=e.isOpen,this.minuteStep=e.minuteStep,this.orientation=e.orientation,this.secondStep=e.secondStep,this.snapToStep=e.snapToStep,this.showInputs=e.showInputs,this.showMeridian=e.showMeridian,this.meridianNotation=e.meridianNotation,this.showSeconds=e.showSeconds,this.template=e.template,this.appendWidgetTo=e.appendWidgetTo,this.showWidgetOnAddonClick=e.showWidgetOnAddonClick,this.icons=e.icons,this.maxHours=e.maxHours,this.explicitMode=e.explicitMode,this.handleDocumentClick=function(t){var e=t.data.scope;e.$element.parent().find(t.target).length||e.$widget.is(t.target)||e.$widget.find(t.target).length||e.hideWidget()},this._init()};r.prototype={constructor:r,_init:function(){var t=this;this.showWidgetOnAddonClick&&this.$element.parent().hasClass("input-group")&&this.$element.parent().hasClass("timepicker")?(this.$element.parent(".input-group.timepicker").find(".input-group-addon").on({"click.timepicker":f.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":f.proxy(this.highlightUnit,this),"click.timepicker":f.proxy(this.highlightUnit,this),"keydown.timepicker":f.proxy(this.elementKeydown,this),"blur.timepicker":f.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":f.proxy(this.mousewheel,this)})):this.template?this.$element.on({"focus.timepicker":f.proxy(this.showWidget,this),"click.timepicker":f.proxy(this.showWidget,this),"blur.timepicker":f.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":f.proxy(this.mousewheel,this)}):this.$element.on({"focus.timepicker":f.proxy(this.highlightUnit,this),"click.timepicker":f.proxy(this.highlightUnit,this),"keydown.timepicker":f.proxy(this.elementKeydown,this),"blur.timepicker":f.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":f.proxy(this.mousewheel,this)}),!1!==this.template?this.$widget=f(this.getTemplate()).on("click",f.proxy(this.widgetClick,this)):this.$widget=!1,this.showInputs&&!1!==this.$widget&&this.$widget.find("input").each(function(){f(this).on({"click.timepicker":function(){f(this).select()},"keydown.timepicker":f.proxy(t.widgetKeydown,t),"keyup.timepicker":f.proxy(t.widgetKeyup,t)})}),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=null,this.updateFromElementVal()},clear:function(){this.hour="",this.minute="",this.second="",this.meridian="",this.$element.val("")},decrementHour:function(){if(""===this.hour&&(this.hour=this.getCurrentHour(),this.incrementHour()),this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else this.hour<=0?this.hour=this.maxHours-1:this.hour--},decrementMinute:function(t){var e;""===this.minute&&(this.minute=this.getCurrentMinute(),this.incrementMinute()),(e=t?this.minute-t:this.minute-this.minuteStep)<0?(this.decrementHour(),this.minute=e+60):this.minute=e},decrementSecond:function(){var t=this.second-this.secondStep;t<0?(this.decrementMinute(!0),this.second=t+60):this.second=t},elementKeydown:function(t){switch(t.which){case 9:if(t.shiftKey){if("hour"===this.highlightedUnit){this.hideWidget();break}this.highlightPrevUnit()}else{if(this.showMeridian&&"meridian"===this.highlightedUnit||this.showSeconds&&"second"===this.highlightedUnit||!this.showMeridian&&!this.showSeconds&&"minute"===this.highlightedUnit){this.hideWidget();break}this.highlightNextUnit()}t.preventDefault(),this.updateFromElementVal();break;case 27:this.updateFromElementVal();break;case 37:t.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(t.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update();break;case 39:t.preventDefault(),this.highlightNextUnit(),this.updateFromElementVal();break;case 40:switch(t.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update()}},getCursorPosition:function(){var t=this.$element.get(0);if("selectionStart"in t)return t.selectionStart;if(n.selection){t.focus();var e=n.selection.createRange(),i=n.selection.createRange().text.length;return e.moveStart("character",-t.value.length),e.text.length-i}},getMeridianLength:function(){var t=n.createElement("span");t.textContent=this.meridianNotation.am,t.style.position="absolute",n.querySelector("body").appendChild(t);var e=t.scrollWidth;t.textContent=this.meridianNotation.pm;var i=t.scrollWidth;return t.remove(),i<e?e:i},getTemplate:function(){var t,e,i,n,o,r;if(this.showInputs){var s=26<this.getMeridianLength()?'style="width: '+(this.getMeridianLength()+24)+'px"':"";e='<input type="text" class="timepicker-hour" '+s+"/>",i='<input type="text" class="timepicker-minute" '+s+"/>",n='<input type="text" class="timepicker-second" '+s+"/>",o='<input type="text" class="timepicker-meridian"'+s+"/>"}else e='<span class="timepicker-hour"></span>',i='<span class="timepicker-minute"></span>',n='<span class="timepicker-second"></span>',o='<span class="timepicker-meridian"></span>';switch(r='<table><tr><td><a href="#" data-action="incrementHour"><span class="'+this.icons.up+'"></span></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><span class="'+this.icons.up+'"></span></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><span class="'+this.icons.up+'"></span></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><span class="'+this.icons.up+'"></span></a></td>':"")+"</tr><tr><td>"+e+'</td> <td class="separator">:</td><td>'+i+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+n+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+o+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><span class="'+this.icons.down+'"></span></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><span class="'+this.icons.down+'"></span></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><span class="'+this.icons.down+'"></span></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><span class="'+this.icons.down+'"></span></a></td>':"")+"</tr></table>",this.template){case"dropdown":t='<div class="timepicker-widget dropdown-menu">'+r+"</div>"}return t},getTime:function(){return""===this.hour?"":(1===this.hour.toString().length?"0"+this.hour:this.hour)+":"+(1===this.minute.toString().length?"0"+this.minute:this.minute)+(this.showSeconds?":"+(1===this.second.toString().length?"0"+this.second:this.second):"")+(this.showMeridian?" "+this.meridian:"")},hideWidget:function(){!1!==this.isOpen&&(this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.$widget.removeClass("open"),f(n).off("mousedown.timepicker, touchend.timepicker",this.handleDocumentClick),this.isOpen=!1,this.$widget.detach())},highlightUnit:function(){this.position=this.getCursorPosition(),0<=this.position&&this.position<=2?this.highlightHour():3<=this.position&&this.position<=5?this.highlightMinute():6<=this.position&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():9<=this.position&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.showMeridian?this.highlightMeridian():this.showSeconds?this.highlightSecond():this.highlightMinute();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="hour",t.setSelectionRange&&setTimeout(function(){e.hour<10?t.setSelectionRange(0,1):t.setSelectionRange(0,2)},0)},highlightMinute:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="minute",t.setSelectionRange&&setTimeout(function(){e.hour<10?t.setSelectionRange(2,4):t.setSelectionRange(3,5)},0)},highlightSecond:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="second",t.setSelectionRange&&setTimeout(function(){e.hour<10?t.setSelectionRange(5,7):t.setSelectionRange(6,8)},0)},highlightMeridian:function(){var t=this.$element.get(0),e=this;this.highlightedUnit="meridian",t.setSelectionRange&&(this.showSeconds?setTimeout(function(){e.hour<10?t.setSelectionRange(8,10):t.setSelectionRange(9,11)},0):setTimeout(function(){e.hour<10?t.setSelectionRange(5,7):t.setSelectionRange(6,8)},0))},getCurrentHour:function(){var t=(new Date).getHours();return this.showMeridian?t%12:t},getCurrentMinute:function(){return(new Date).getMinutes()},incrementHour:function(){if(""===this.hour&&(this.hour=this.getCurrentHour(),this.decrementHour()),this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}this.hour!==this.maxHours-1?this.hour++:this.hour=0},incrementMinute:function(t){var e;""===this.minute&&(this.minute=this.getCurrentMinute(),this.decrementMinute()),59<(e=t?this.minute+t:this.minute+this.minuteStep-this.minute%this.minuteStep)?(this.incrementHour(),this.minute=e-60):this.minute=e},incrementSecond:function(){var t=this.second+this.secondStep-this.second%this.secondStep;59<t?(this.incrementMinute(!0),this.second=t-60):this.second=t},mousewheel:function(t){if(!this.disableMousewheel){t.preventDefault(),t.stopPropagation();var e=t.originalEvent.wheelDelta||-t.originalEvent.detail,i=null;switch("mousewheel"===t.type?i=-1*t.originalEvent.wheelDelta:"DOMMouseScroll"===t.type&&(i=40*t.originalEvent.detail),i&&(t.preventDefault(),f(this).scrollTop(i+f(this).scrollTop())),this.highlightedUnit){case"minute":0<e?this.incrementMinute():this.decrementMinute(),this.highlightMinute();break;case"second":0<e?this.incrementSecond():this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian();break;default:0<e?this.incrementHour():this.decrementHour(),this.highlightHour()}return!1}},changeToNearestStep:function(t,e){return t%e==0?t:Math.round(t%e/e)?(t+(e-t%e))%60:t-t%e},place:function(){if(!this.isInline){var t=this.$widget.outerWidth(),e=this.$widget.outerHeight(),i=f(m).width(),n=f(m).height(),o=f(m).scrollTop(),r=parseInt(this.$element.parents().filter(function(){return"auto"!==f(this).css("z-index")}).first().css("z-index"),10)+10,s=this.component?this.component.parent().offset():this.$element.offset(),a=this.component?this.component.outerHeight(!0):this.$element.outerHeight(!1),l=this.component?this.component.outerWidth(!0):this.$element.outerWidth(!1),h=s.left,u=s.top;this.$widget.removeClass("timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left"),"auto"!==this.orientation.x?(this.$widget.addClass("timepicker-orient-"+this.orientation.x),"right"===this.orientation.x&&(h-=t-l)):(this.$widget.addClass("timepicker-orient-left"),s.left<0?h-=s.left-10:s.left+t>i&&(h=i-t-10));var c,d,p=this.orientation.y;"auto"===p&&(c=-o+s.top-e,d=o+n-(s.top+a+e),p=Math.max(c,d)===d?"top":"bottom"),this.$widget.addClass("timepicker-orient-"+p),"top"===p?u+=a:u-=e+parseInt(this.$widget.css("padding-top"),10),this.$widget.css({top:u,left:h,zIndex:r})}},remove:function(){f("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(t){if(this.$element.val())this.updateFromElementVal();else if("current"===t){var e=new Date,i=e.getHours(),n=e.getMinutes(),o=e.getSeconds(),r=this.meridianNotation.am;0!==o&&60===(o=Math.ceil(e.getSeconds()/this.secondStep)*this.secondStep)&&(n+=1,o=0),0!==n&&60===(n=Math.ceil(e.getMinutes()/this.minuteStep)*this.minuteStep)&&(i+=1,n=0),this.showMeridian&&(0===i?i=12:12<=i?(12<i&&(i-=12),r=this.meridianNotation.pm):r=this.meridianNotation.am),this.hour=i,this.minute=n,this.second=o,this.meridian=r,this.update()}else!1===t?(this.hour=0,this.minute=0,this.second=0,this.meridian=this.meridianNotation.am):this.setTime(t)},setTime:function(t,e){if(t){var i,n,o,r,s,a;if("object"==typeof t&&t.getMonth)o=t.getHours(),r=t.getMinutes(),s=t.getSeconds(),this.showMeridian&&(a=this.meridianNotation.am,12<o&&(a=this.meridianNotation.pm,o%=12),12===o&&(a=this.meridianNotation.pm));else{if(2<(i=(/a/i.test(t)?1:0)+(/p/i.test(t)?2:0)))return void this.clear();if(o=(n=t.replace(/[^0-9:]/g,"").split(":"))[0]?n[0].toString():n.toString(),this.explicitMode&&2<o.length&&o.length%2!=0)return void this.clear();r=n[1]?n[1].toString():"",s=n[2]?n[2].toString():"",4<o.length&&(s=o.slice(-2),o=o.slice(0,-2)),2<o.length&&(r=o.slice(-2),o=o.slice(0,-2)),2<r.length&&(s=r.slice(-2),r=r.slice(0,-2)),o=parseInt(o,10),r=parseInt(r,10),s=parseInt(s,10),isNaN(o)&&(o=0),isNaN(r)&&(r=0),isNaN(s)&&(s=0),59<s&&(s=59),59<r&&(r=59),o>=this.maxHours&&(o=this.maxHours-1),this.showMeridian?(12<o&&(i=2,o-=12),i||(i=1),0===o&&(o=12),a=1===i?this.meridianNotation.am:this.meridianNotation.pm):o<12&&2===i?o+=12:o>=this.maxHours?o=this.maxHours-1:(o<0||12===o&&1===i)&&(o=0)}this.hour=o,this.snapToStep?(this.minute=this.changeToNearestStep(r,this.minuteStep),this.second=this.changeToNearestStep(s,this.secondStep)):(this.minute=r,this.second=s),this.meridian=a,this.update(e)}else this.clear()},showWidget:function(){this.isOpen||this.$element.is(":disabled")||(this.setTime(this.$element.val()),this.updateWidget(),this.$widget.appendTo(this.appendWidgetTo),f(n).on("mousedown.timepicker, touchend.timepicker",{scope:this},this.handleDocumentClick),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.place(),this.disableFocus&&this.$element.blur(),""===this.hour&&this.defaultTime&&this.setDefaultTime(this.defaultTime),!1===this.isOpen&&this.$widget.addClass("open"),this.isOpen=!0)},toggleMeridian:function(){this.meridian=this.meridian===this.meridianNotation.am?this.meridianNotation.pm:this.meridianNotation.am},update:function(t){this.updateElement(),t||this.updateWidget(),this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}})},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){this.setTime(this.$element.val())},updateWidget:function(){if(!1!==this.$widget){var t=this.hour,e=1===this.minute.toString().length?"0"+this.minute:this.minute,i=1===this.second.toString().length?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.timepicker-hour").val(t),this.$widget.find("input.timepicker-minute").val(e),this.showSeconds&&this.$widget.find("input.timepicker-second").val(i),this.showMeridian&&this.$widget.find("input.timepicker-meridian").val(this.meridian)):(this.$widget.find("span.timepicker-hour").text(t),this.$widget.find("span.timepicker-minute").text(e),this.showSeconds&&this.$widget.find("span.timepicker-second").text(i),this.showMeridian&&this.$widget.find("span.timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(!1!==this.$widget){var t=this.$widget.find("input.timepicker-hour").val()+":"+this.$widget.find("input.timepicker-minute").val()+(this.showSeconds?":"+this.$widget.find("input.timepicker-second").val():"")+(this.showMeridian?this.$widget.find("input.timepicker-meridian").val():"");this.setTime(t,!0)}},widgetClick:function(t){t.stopPropagation(),t.preventDefault();var e=f(t.target),i=e.closest("a").data("action");i&&this[i](),this.update(),e.is("input")&&e.get(0).setSelectionRange(0,2)},widgetKeydown:function(t){var e=f(t.target),i=e.attr("class").replace("timepicker-","");switch(t.which){case 9:if(t.shiftKey){if("hour"===i)return this.hideWidget()}else if(this.showMeridian&&"meridian"===i||this.showSeconds&&"second"===i||!this.showMeridian&&!this.showSeconds&&"minute"===i)return this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(t.preventDefault(),i){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),e.get(0).setSelectionRange(0,2);break;case 40:switch(t.preventDefault(),i){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),e.get(0).setSelectionRange(0,2)}},widgetKeyup:function(t){(65===t.which||77===t.which||80===t.which||46===t.which||8===t.which||48<=t.which&&t.which<=57||96<=t.which&&t.which<=105)&&this.updateFromWidgetInputs()}},f.fn.timepicker=function(n){var o=Array.apply(null,arguments);return o.shift(),this.each(function(){var t=f(this),e=t.data("timepicker"),i="object"==typeof n&&n;e||t.data("timepicker",e=new r(this,f.extend({},f.fn.timepicker.defaults,i,f(this).data()))),"string"==typeof n&&e[n].apply(e,o)})},f.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,disableMousewheel:!1,isOpen:!1,minuteStep:15,orientation:{x:"auto",y:"auto"},secondStep:15,snapToStep:!1,showSeconds:!1,showInputs:!0,showMeridian:!0,meridianNotation:{am:"AM",pm:"PM"},template:"dropdown",appendWidgetTo:"body",showWidgetOnAddonClick:!0,icons:{up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},maxHours:24,explicitMode:!1},f.fn.timepicker.Constructor=r,f(n).on("focus.timepicker.data-api click.timepicker.data-api",'[data-provide="timepicker"]',function(t){var e=f(this);e.data("timepicker")||(t.preventDefault(),e.timepicker())})}(t("jquery"),window,document)},{jquery:12}],79:[function(e,i,n){if("object"==typeof n&&"string"!=typeof n.nodeName&&"function"!=typeof t)var t=function(t){t(e,n,i)};function a(e,t,i,n){var o,r,s,a=Math.PI,l=500*n,h=e.getContext("2d"),u={x:t/2,y:i/2},c=Math.min(t,i)/2,d="#0000ff",p="#cccccc",f="#cccccc",m=((s=window.medicmobile_android&&"function"==typeof window.medicmobile_android.playAlert)||(r=new Audio("./audio/alert.mp3")),{play:function(){s?window.medicmobile_android.playAlert():r.play()}});function g(t,e,i){var n=a*i/180;t.beginPath(),t.arc(e.x,e.y,e.r,-a/2,n-a/2,!1),t.lineTo(e.x,e.y),t.fillStyle=e.color,t.fill()}function v(t){var e;_(d),e=t,g(h,{x:u.x,y:u.y,r:c,color:f},180*e/l)}function _(t){var e,i;e=h,i={x:u.x,y:u.y,r:c,color:t},g(e,i,360)}function y(){o=!0,setTimeout(function(){!function t(e){var i=Date.now()-e;if(!o)return;i<2*l?(v(i),requestAnimationFrame(function(){t(e)})):(_(p),o=!1,m.play())}(Date.now())},0)}!function(){function t(){o=!1,_(p)}t(),e.addEventListener("click",function(){o?t():y()})}()}t(function(t,e,i){"use strict";var n=t("../js/Widget"),o=t("jquery"),r="timerwidget";function s(t,e){this.namespace=r,n.call(this,t,e),this._init()}((s.prototype=Object.create(n.prototype)).constructor=s).prototype._init=function(){var t=o(this.element),e=o('<canvas width="%s" height="%s">'.replace(/%s/g,320));t.replaceWith(e),new a(e[0],320,320,parseInt(t.val())||60)},s.prototype.destroy=function(t){},o.fn[r]=function(i,n){return this.each(function(){var t=o(this),e=t.data(r);i=i||{},e||"object"!=typeof i?e&&"string"==typeof i&&e[i](this):t.data(r,e=new s(this,i,n))})},i.exports={name:r,selector:".or-appearance-countdown-timer"}})},{"../js/Widget":21,jquery:12}],80:[function(t,e,i){"use strict";var o="urlWidget",r=t("jquery"),n=t("../../js/Widget");function s(t,e){this.namespace=o,n.call(this,t,e),this._init()}((s.prototype=Object.create(n.prototype)).constructor=s).prototype._init=function(){this.$link=r('<a class="widget url-widget" target="_blank"/>'),r(this.element).addClass("hide").after(this.$link),this._setValueInWidget(this.element.value)},s.prototype._setValueInWidget=function(t){t=t||"",this.$link.prop({href:t,title:t}).text(t)},s.prototype.disable=function(){},s.prototype.enable=function(){},s.prototype.update=function(){this._setValueInWidget(this.element.value)},r.fn[o]=function(i,n){return i=i||{},this.each(function(){var t=r(this),e=t.data(o);e||"object"!=typeof i?e&&"string"==typeof i&&e[i](this):t.data(o,new s(this,i,n))})},e.exports={name:o,selector:'.or-appearance-url input[type="text"]'}},{"../../js/Widget":21,jquery:12}]},{},[1]);